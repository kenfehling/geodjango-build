{"version":3,"file":"static/js/281.680608f6.chunk.js","mappings":"6KAKYA,E,oJAAZ,SAAYA,GAAAA,EAAAA,EAAAA,IAAAA,GAAAA,MAAAA,EAAAA,EAAAA,QAAAA,GAAAA,UAAAA,EAAAA,EAAAA,KAAAA,GAAAA,OAAZ,CAAYA,IAAAA,EAAAA,KAiBL,IAiVKC,EAjVCC,EAAyB,CAAC,CACnCC,KAAM,SACNC,iBAAkBJ,EAAgBK,IAClCC,OAAQ,CACJC,EAAG,SACHC,EAAG,SACHC,EAAG,SAER,CACCN,KAAM,OACNC,iBAAkBJ,EAAgBU,KAClCJ,OAAQ,CAEJE,EAAG,WAER,CACCL,KAAM,MACNC,iBAAkBJ,EAAgBW,QAClCL,OAAQ,CAEJE,EAAG,WAER,CACCL,KAAM,MACNS,gBAAgB,EAChBN,OAAQ,CACJE,EAAG,WAIEK,GACTC,EAAAA,EAAAA,GAAOZ,EAAWa,KAAI,SAAAC,GAAC,OAAIA,EAAEb,QAAOD,GAe3Be,EAA2B,CAAC,CACrCd,KAAM,mBACNe,MAAO,KACPC,OAAQ,MACT,CACChB,KAAM,UACNe,MAAO,KACPC,OAAQ,KACT,CACChB,KAAM,YACNe,MAAO,IACPC,OAAQ,MACT,CACChB,KAAM,SACNe,MAAO,KACPC,OAAQ,OAGCC,GACTN,EAAAA,EAAAA,GAAOG,EAAYF,KAAI,SAAAC,GAAC,OAAIA,EAAEb,QAAOc,GA0BnCI,EAAY,SAACC,EAAmBC,EAAmBC,GACrD,IAAMC,EAAU,CAACC,sBAAuBH,EAAWI,sBAAuBL,GAC1E,OAAOM,OAAOJ,GAAKK,oBAAeC,EAAWL,IAG3CM,GAAgBC,EAAAA,EAAAA,GAAMX,EAANW,MAAiBF,OAAWA,GAC5CG,GAAiBD,EAAAA,EAAAA,GAAMX,EAANW,MAAiBF,EAAW,GAC7CI,GAAkBF,EAAAA,EAAAA,GAAMX,EAANW,MAAiBF,EAAW,GAE9CK,IADmBH,EAAAA,EAAAA,GAAMX,EAANW,MAAiBF,EAAW,IAC7BE,EAAAA,EAAAA,GAAMX,EAANW,CAAiB,EAAG,IAE/BI,EAAyE,CAClF,IAAO,SAAAC,GAAO,MAAM,IAAIC,MAAM,wCAC9B,QAAWP,EACX,QAAW,SAACQ,GAAD,OAAWL,EAAgBK,GAAS,KAC/C,QAAW,SAACA,GAAD,MAAW,KAAOA,GAAS,IAAMN,EAAeM,GAASJ,EAAgBI,KACpF,QAAW,SAACA,GAAD,OAAWN,EAAeM,GAAS,YAC9C,MAAS,SAACA,GAAD,OAAWN,EAAeM,GAAS,UAC5C,MAAS,SAACA,GAAD,OAAWN,EAAeM,GAAS,WAiCnCC,IAFTC,EAAAA,EAAAA,IAAQC,EAAAA,EAAAA,GAAK,QA5DG,CAChB,MACA,UACA,UACA,UACA,UACA,QACA,UACA,YAsD0B,CAAC,UAAW,UAAW,UAAW,UAAW,QAAS,UAIvEC,EAA4D,CACrE,cAAiB,CACbC,KAAM,UACNC,MAAO,WAMX,WAAc,CACVD,KAAM,UACNC,MAAO,WAEX,WAAc,CACVD,KAAM,UACNC,MAAO,WAEX,SAAY,CACRD,KAAM,UACNC,MAAO,WAEX,OAAU,CACND,KAAM,UACNC,MAAO,cAEX,cAAiB,CACbD,KAAM,UACNC,MAAO,cAEX,UAAa,CACTD,KAAM,UACNC,MAAO,cAEX,gBAAmB,CACfD,KAAM,QACNC,MAAO,cAEX,aAAgB,CACZD,KAAM,UACNC,MAAO,cAEX,QAAW,CACPD,KAAM,QACNC,MAAO,gBAEX,OAAU,CACND,KAAM,UACNC,MAAO,gBAEX,OAAU,CACND,KAAM,UACNC,MAAO,gBAEX,OAAU,CACND,KAAM,UACNC,MAAO,gBAEX,OAAU,CACND,KAAM,UACNC,MAAO,iBASFC,EAA2D,CACpE,IAAO,CACHF,KAAM,UACNC,MAAO,eAEX,IAAO,CACHD,KAAM,UACNC,MAAO,eAEX,KAAQ,CACJD,KAAM,UACNC,MAAO,eAEX,QAAW,CACPD,KAAM,UACNC,MAAO,eAEX,UAAa,CACTD,KAAM,UACNC,MAAO,gBA0EFE,EAAgC,CAAC,CAC1CC,MAAO,wCACPC,OAAQ,CACJC,KAAM,KACNC,MAAO,QACPC,QAAS,CAAC,MAAO,WACjBC,KAAM,SACN9C,EAAG,kBACHC,EAAG,kBAER,CACCwC,MAAO,6BACPC,OAAQ,CACJC,KAAM,KACNC,MAAO,QACPC,QAAS,CAAC,aACVC,KAAM,MACN9C,EAAG,kBACHC,EAAG,kBAER,CACCwC,MAAO,wBACPC,OAAQ,CACJC,KAAM,KACNC,MAAO,SACPE,KAAM,MACN7C,EAAG,oBAIX,SAAYP,GAAAA,EAAAA,GAAAA,KAAAA,EAAAA,GAAAA,KAAAA,EAAAA,GAAAA,KAAAA,EAAAA,GAAAA,KAAZ,CAAYA,IAAAA,EAAAA,KAYL,I,8v7UClWDqD,EAAe,SAACC,EAA0BC,GAA3B,eAAC,UACbA,GAAMD,EAAIC,EAAEC,MAKfC,EAAc,SAACC,GAEjB,IAAMC,GAAa,UAAOD,GA4B1B,OA3BMA,EAAKE,QACPD,EAAO,MAAY,CACfE,MAAM/C,EAAAA,EAAAA,IAAI,SAACgD,GAAD,eAAC,UACJA,GADG,IAENC,KAAK,eAAD,OAA0B,OAATD,EAAEN,GAAc,GAAK,IAAMM,EAAEN,QAClDE,EAAKE,OACTI,OAAQC,OAAOC,KAAKR,EAAKE,SAG3BF,EAAKS,SACPR,EAAO,OAAa,CAChBE,KAAMH,EAAKS,OACXH,OAAQC,OAAOC,KAAKR,EAAKS,UAG3BT,EAAKrD,SACPsD,EAAO,OAAa,CAChBE,MAAM/C,EAAAA,EAAAA,IAAI,SAAAyC,GAAC,OAAIF,EAAaX,EAAYa,KAAIG,EAAKrD,QACjD2D,OAAQC,OAAOC,KAAKxB,KAGtBgB,EAAKU,kBACPT,EAAO,gBAAsB,CACzBE,MAAM/C,EAAAA,EAAAA,IAAI,SAAAyC,GAAC,OAAIF,EAAaR,EAAuBU,KAAIG,EAAKU,iBAC5DJ,OAAQC,OAAOC,KAAKR,EAAKU,mBAG1BT,GAGLU,EAA0B,CAC5B/B,OAAM,kBAECmB,EAAYa,IAFd,IAGDC,OAAQ,GACRC,WAAY,CAACC,eAAgB,MAEjCC,OAAQ,QAGCC,GAAYC,EAAAA,EAAAA,IAAY,CACjC1E,KAAM,OACNmE,aAAAA,EACAQ,SAAU,CACNC,QAAS,SAACC,EAAOC,GACb,IAAMrB,EAAUF,EAAYuB,EAAOC,SACnCF,EAAMzC,MAAMiC,OAAS,GACrBQ,EAAMzC,OAAN,kBAAkByC,EAAMzC,OAAUqB,IAEtCuB,gBAAiB,SAACH,GACdA,EAAMzC,MAAMiC,OAAS,OAK1B,EAAqCI,EAAUQ,QAAvCL,EAAR,EAAQA,QAASI,EAAjB,EAAiBA,gBAEXE,EAAc,SAACL,GAAD,uBAAsBA,EAAMrB,KAAKpB,aAAjC,aAAsB,EAAkBsB,OACtDyB,EAAe,SAACN,GAAD,uBAAsBA,EAAMrB,KAAKpB,aAAjC,aAAsB,EAAkBjC,QACvDiF,EAAwB,SAACP,GAAD,uBACYA,EAAMrB,KAAKpB,aADvB,aACY,EAAkB8B,iBACtDmB,EAAe,SAACR,GAAD,uBAAsBA,EAAMrB,KAAKpB,aAAjC,aAAsB,EAAkB6B,QAGvDqB,EAAc,SAACT,GAAD,uBAAsBA,EAAMrB,KAAKpB,aAAjC,aAAsB,EAAkBmD,OAGtDC,EAAe,SAACX,GAAD,uBACxBA,EAAMrB,KAAKpB,aADa,aACxB,EAAkBiC,QAEToB,GAAiCC,EAAAA,EAAAA,IAC1CN,GACA,SAAClB,GACG,OAAOA,EAAkBA,EAAgBJ,OACpClD,KAAI,SAAA0C,GAAE,OAAIY,EAAgBP,KAAKL,MAC9B,QAIDqC,GAAsBD,EAAAA,EAAAA,IAC/BP,GACA,SAAChF,GACG,OAAOA,EAASA,EAAO2D,OAClBlD,KAAI,SAAA0C,GAAE,OAAInD,EAAOwD,KAAKL,MACtBsC,QAAO,SAAAvC,GAAC,OAAIhB,EAAewD,SAASxC,EAAEZ,SACnC,QAehB,IAXuCiD,EAAAA,EAAAA,IACnCL,GACA,SAACpB,GACG,OAAOF,OAAOM,OAAOJ,EAAON,MAAM/C,KAAI,SAAAoC,GAAK,yBACpCA,GADoC,IAEvCN,MAAO,aACPD,KAAM,cAKHgC,EAAf,SC9GaqB,GAAYpB,EAAAA,EAAAA,IAAY,CACnC1E,KAAM,OACNmE,aAP8B,CAC9B/B,MAAO,KACPoC,OAAQ,QAMRG,SAAU,CACRoB,QAAS,SAAClB,EAAOC,GACf,IAAM1C,EAAQ0C,EAAOC,QACR,MAAT3C,GAAiBA,IAAUyC,EAAMzC,QACjCyC,EAAMzC,MAAQA,KAItB4D,eAAc,UAEXvB,EAAUQ,QAAQL,SAAU,SAACC,EAAOC,GACnC,IAAMtB,EAAOsB,EAAOC,QAIhBvB,EAAK+B,QACPV,EAAMzC,OAAQ6D,EAAAA,EAAAA,GAAKzC,EAAK+B,aAMjBQ,EAAYD,EAAUb,QAAtBc,QACFG,GAAa,SAACrB,GAAD,OAAsBA,EAAMsB,KAAK/D,OAC3D,GAAe0D,EAAf,QC7BaM,IAAgB1B,EAAAA,EAAAA,IAAY,CACrC1E,KAAM,WACNmE,aAPgC,CAChC/B,MAAO,MACPoC,OAAQ,QAORG,SAAU,CAEN0B,YAAa,SAACxB,EAAOC,GACjB,IAAM1C,EAAQ0C,EAAOC,QACR,MAAT3C,GAA2B,KAAVA,IACjByC,EAAMzC,MAAQA,OAKfiE,GAAgBD,GAAcnB,QAA9BoB,YACFC,GAAiB,SAACzB,GAAD,OAAsBnE,EAAemE,EAAM0B,SAASnE,QAClF,GAAegE,GAAf,Q,WCnBMI,GAAgBzC,OAAOC,KAAKI,EAAAA,QAE5BD,GAA8B,CAChC/B,MAAO,CACHW,KAAM,KACNE,QAAS,GACTD,MAAO,QACP5C,EAAGoG,GAAc,GACjBnG,EAAGmG,GAAc,GACjBlG,EAAG,iBAEPmG,QAAQ,GAGCC,IAAgBhC,EAAAA,EAAAA,IAAY,CACrC1E,KAAM,WACNmE,aAAAA,GAEAQ,SAAU,CACNgC,YAAa,SAAC9B,EAAOC,GACjB,IAAM8B,GAAQ,kBAAO/B,EAAMzC,OAAU0C,EAAOC,UACvC8B,EAAAA,GAAAA,GAAOhC,EAAMzC,MAAOwE,KACrB/B,EAAMzC,MAAQwE,IAGtBE,UAAW,SAACjC,GACRA,EAAM4B,QAAS,MAKpB,GAAmCC,GAAczB,QAAzC0B,GAAR,GAAQA,YAAaG,GAArB,GAAqBA,UAKfC,GAAuB,SAAClC,GAAD,OAChCA,EAAMmC,SAASP,QAEnB,GAAeC,GAAf,QC5CaO,IAAQC,EAAAA,EAAAA,IAAe,CAClCC,QAAS,CACP3D,KAAM4D,EACNjB,KAAMkB,GACNd,SAAUe,GACVN,SAAUO,M,qOCcd,GAvBwB,SAACC,EAAYC,IACjCC,EAAAA,EAAAA,YAAU,WACN,IAAMC,EAAgB,SAAAC,GACbJ,EAAWK,UAAWL,EAAWK,QAAQC,SAASF,EAAMG,SAG7DN,EAAQG,IAUZ,OAFAI,SAASC,iBAAiB,aAAcN,GAEjC,WACHK,SAASE,oBAAoB,aAAcP,MAGhD,CAACH,EAAYC,K,8HC2BpB,IC3CcpE,GD2Cd,IAAe8E,EAAAA,GAAAA,IA7Cf,YAWqC,IAVMC,EAUP,EAVCC,KACKC,EASN,EATCC,IASD,IARCC,WAAAA,OAQD,MARc,GAQd,MAPCC,UAAAA,OAOD,MAPa,GAOb,EANCC,EAMD,EANCA,KACAC,EAKD,EALCA,WAEAC,GAGD,EAJCC,SAID,EAHCD,UACAE,EAED,EAFCA,MACGC,GACJ,cAE5BV,EAAOD,EACPG,EAAMD,EAsBV,OApBIK,IACIA,EAAW5H,MAAQ,IACfsH,EAAOG,EAAaE,EAAK3H,MAAQ4H,EAAW5H,QAC5CsH,EAAOM,EAAW5H,MAAQ2H,EAAK3H,MAAQyH,GAEvCH,EAAO,IACPA,EAAO,IAIXM,EAAW3H,OAAS,IAChBuH,EAAME,EAAYC,EAAK1H,OAAS2H,EAAW3H,SAC3CuH,EAAMI,EAAW3H,OAAS0H,EAAK1H,OAASyH,GAExCF,EAAM,IACNA,EAAM,MAMd,UAAC,MAAD,gBACIO,OAAK,QAAIP,IAAK,EAAGS,UAAU,aAAD,OAAeX,EAAf,eAA0BE,EAA1B,QAAuCO,IAC7DC,GAFR,aAIKH,QEzCAK,GAAiB,kBAAMC,EAAAA,EAAAA,OACvBC,GAAkDC,EAAAA,G,4CDFzDC,GAAO,SAAAC,GAAE,OAAI,SAAAjG,GAAC,OAAIiG,EAAGC,QAAQlG,MAGrBA,GAIV,SAAAiG,GAAE,OAAI,SAAAE,GAAE,OACJH,GAAKG,EAALH,EACI,SAAAjJ,GAAC,OAAIiJ,GAAKC,EAALD,EACD,SAAAzF,GAAC,MAAI,CACD,CAACA,GAAG6F,OAAOrJ,YARZ,SAAAwD,GAAC,OAAI,SAAA0F,GAAE,OACtBA,EAAGI,aAAY,SAAC9F,EAAGxD,GAAJ,OAAUiD,GAAEjD,EAAFiD,CAAKO,KAAIA,MAWpC,CACE,KAWG,IAEM+F,GAAmB,SAACC,GAAD,OAC5B7F,OAAOM,OAAOuF,GAAKC,OAAM,SAAAxG,GAAC,OAAS,MAALA,MAY3B,SAASyG,GAAgBzF,GAC5B,MAAO,CAACA,EAAO,GAAIA,EAAOA,EAAO0F,OAAS,IAGvC,SAASC,GAAsB3F,GAClC,OAAOA,EAAOzD,IAAIkJ,IAGf,SAASG,GAAWC,GACvB,OAAOA,EAAE,GAAGC,cAAgBD,EAAEE,MAAM,GAGjC,IACMC,GAAU,SAACC,GAAD,OADJ,SAACA,GAAD,OAAWA,EAAMC,QAAO,SAAC3G,EAAG4G,GAAJ,OAAU5G,EAAI4G,KACvBC,CAAIH,GAASA,EAAMP,Q,WE5C/CW,GAA0B,CAACC,EAAG,IAAKT,EAAG,GAAKU,EAAG,GAE9CC,GAAc,CAChB,IACA,IACA,GACA,IACA,KAGEC,GAAY,CAAC,GAAK,GAkBXC,GAAwB,SACjCC,EAAG5I,EAAO6I,EAAcC,EAAOC,GAE/B,GAAIA,EACA,OAboB,SAACH,EAAaI,EAAWC,GACjD,OAAO,kBAAIL,GAAX,IAAcL,EAAGE,GAAYQ,KAYlBC,CAAaN,EAAGC,EAAcC,GAGrC,IAAMK,EAAST,GAAU,GAInBU,GAHO,EAGSD,GAAUN,EAC1BQ,GAAQ,GAAkBR,EAChC,OAAO,kBAAID,GAAX,IAAcd,EAAGqB,EAASC,EAAQN,EAAON,EAJ1B,EAIsCa,EAAQP,KAU/DQ,GAAgD,CAClD,IAAQ,SAACV,EAAG5I,GAAJ,eAAC,UACA4I,GADD,IACIL,EAAuB,MAApBvI,EAAMuJ,UAAoB,IAAM,OAC/C,KAAQZ,GACR,QAAWA,GACX,UAAaA,GACb,IAZiC,SACjCC,EAAG5I,EAAO6I,EAAcC,EAAOC,GAE/B,OAzBwB,SAACH,EAAaI,EAAWC,GACjD,IAAMnB,GAAMY,GAAU,GAAKA,GAAU,IAAMM,EAAKC,EAAIP,GAAU,GAC9D,OAAO,kBAAIE,GAAX,IAAcd,EAAAA,EAAGU,EAAGV,GAAK,GAAM,EAAIA,EAAE,EAAI,IAuBlC0B,CAAaZ,EAAGC,EAAcC,KAYnCW,GAAwD,CAC1D,IAAO,EACP,KAAQ,EACR,QAAW,EACX,UAAa,EACb,IAAO,GAsBX,SAASC,GAAed,GAEpB,IAAMe,EAAMf,EAAEgB,SAAS,IACvB,OAAsB,IAAfD,EAAIhC,OAAe,IAAMgC,EAAMA,EAOnC,IAAME,GAAW,SAACtB,EAAGT,EAAGU,GAC3B,MA9BJ,SAAkBD,EAAGT,EAAGU,GACpB,IAAIsB,EAAGC,EAAG3B,EACJ4B,EAAKzB,EAAI,IACTU,EAAIgB,KAAKC,MAAW,EAALF,GACf/I,EAAS,EAAL+I,EAASf,EACbxK,EAAI+J,GAAK,EAAIV,GACbqC,EAAI3B,GAAK,EAAIvH,EAAI6G,GACjBsC,EAAI5B,GAAK,GAAK,EAAIvH,GAAK6G,GAC7B,OAAQmB,EAAI,GACR,KAAK,EAAGa,EAAItB,EAAGuB,EAAIK,EAAGhC,EAAI3J,EAAG,MAC7B,KAAK,EAAGqL,EAAIK,EAAGJ,EAAIvB,EAAGJ,EAAI3J,EAAG,MAC7B,KAAK,EAAGqL,EAAIrL,EAAGsL,EAAIvB,EAAGJ,EAAIgC,EAAG,MAC7B,KAAK,EAAGN,EAAIrL,EAAGsL,EAAII,EAAG/B,EAAII,EAAG,MAC7B,KAAK,EAAGsB,EAAIM,EAAGL,EAAItL,EAAG2J,EAAII,EAAG,MAC7B,KAAK,EAAGsB,EAAItB,EAAGuB,EAAItL,EAAG2J,EAAI+B,EAE9B,MAAO,CAAM,IAAJL,EAAa,IAAJC,EAAa,IAAJ3B,GAAU5J,KAAI,SAAAR,GAAC,OAAIiM,KAAKI,MAAMrM,MAcvCsM,CAAS/B,EAAGT,EAAGU,GAAjC,eACA,OANJ,SAAkBsB,EAAGC,EAAG3B,GACpB,MAAO,IAAMsB,GAAeI,GAAKJ,GAAeK,GAAKL,GAAetB,GAK7DmC,CADP,iBAiDEC,GAAY,SAACC,EAAwB7I,GACvC,GAAKA,EAAK8I,GAEH,CACH,IAAMC,EAjBG,SAACF,EAAwB7I,GACtC,GAAIA,EAAKgJ,GAAI,CACT,IAAMC,GAAkBtM,EAAAA,EAAAA,GACpBkM,EAAKjM,KAAI,SAACsM,GAAD,OAASA,EAAI5J,MACtBuJ,EAAKjM,KAAI,SAACsB,EAAGmJ,GAAJ,OAAUA,MAEvB,GAAI4B,EAAgBjJ,EAAK8I,GAAGK,OAASF,EAAgBjJ,EAAKgJ,GAAGG,OACzD,MAAO,CAAEL,GAAI9I,EAAKgJ,GAAIA,GAAIhJ,EAAK8I,IAGvC,OAAO9I,EAOQoJ,CAASP,EAAM7I,GAC1B,OAAO+I,EAAGD,GAAGK,MAAQ,IAAMJ,EAAGD,GAAG1K,OAChC2K,EAAGC,GAAM,IAAMD,EAAGC,GAAGG,MAAQ,IAAMJ,EAAGC,GAAG5K,MAAS,IAJnD,MAAO,IA4BTiL,GAAuB,SAACxM,EACAgM,EACAS,GAC1B,OAAOzM,EAAE+L,GAAUC,EAAMS,KAGhBC,GAAsB,SAAC1M,EACAgM,EACAzK,GAFD,OAG/BiL,GAAqBxM,EAAE2M,QAASX,EAvBf,SAAC3I,EACA9B,GAClB,IAAMyK,EAAO9I,OAAOM,OAAOH,GAC3B,GAAoB,IAAhB2I,EAAK9C,OACL,MAAO,GAEX,IAAM0D,EAAI,CAAEX,GAAI,CAAEK,MAAON,EAAK,GAAGvJ,GAAIlB,MAAOA,EAAMyK,EAAK,GAAGvJ,MAC1D,OAAQuJ,EAAK9C,QACT,KAAK,EAAG,OAAO0D,EACf,KAAK,EAAG,OAAO,kBAAKA,GAAZ,IAAeT,GAAI,CAAEG,MAAON,EAAK,GAAGvJ,GAAIlB,MAAOA,EAAMyK,EAAK,GAAGvJ,OACrE,QAAS,MAAM,IAAInB,MAAM,oCAAsC0K,EAAK9C,SAalC2D,CAAab,EAAMzK,KAEvDuL,GAAiB,SAAC1K,GAAD,OACnBc,OAAOM,OAAOpB,EAAQoB,QAAQzD,KAAI,SAAAgK,GAAC,OAAIA,EAAEe,cAEvCiC,GAAgB,SAAC3K,GAAD,OAClBc,OAAOM,OAAOpB,EAAQoB,QAAQzD,KAAI,SAAAgK,GAAC,OAAIA,EAAEiD,aAE7C,SAASC,GAA0BC,EACAC,EACAC,GAC/B,OAAOlK,OAAOM,OAAO2J,EAAK3J,QAAQzD,KAAI,SAACsN,GAAD,OAClCnK,OAAOM,OAAO4J,EAAK5J,QAAQzD,KAAI,SAACuN,GAAD,OAAQJ,EAAG,CACtCjB,GAAI,CAACK,MAAOa,EAAK1K,GAAIlB,MAAO8L,EAAGvC,WAC/BqB,GAAI,CAACG,MAAOc,EAAK3K,GAAIlB,MAAO+L,EAAGxC,mBAI3C,IC1NIyC,GAAOC,GD8NLC,GAAoB,SAACzB,EACA0B,GACvB,IAAM1N,EAAI,CAAE2M,QAAS,IACrBe,EAAMC,SAAQ,SAACC,IAtDO,SAAC5N,EACAgM,EACA7I,EAAmB0K,GAC1C7N,EAAE+L,GAAUC,EAAM7I,IAAS0K,EAoDvBC,CACI9N,EAAE2M,QACFX,EACA4B,EAAKzK,KACLiI,GAASwC,EAAKC,MAAM/D,EAAG8D,EAAKC,MAAMxE,EAAGuE,EAAKC,MAAM9D,OAExD,IAAMgE,EAAUL,EAAM3N,KAAI,SAAA6N,GAAI,OAAIA,EAAKzK,QACjC6K,GAAWhN,EAAAA,EAAAA,GAAMwL,GAANxL,CAA4BhB,EAAE2M,QAASX,GAClDiC,GAAejN,EAAAA,EAAAA,GAAMiM,GAANjM,CAA8BgN,GACnD,OAAQhC,EAAK9C,QACT,KAAK,EACD,OAAO,kBACAlJ,GADP,IAEIkO,OAAQ,CAAEC,KAAM,GAAIC,KAAM,IAC1BC,UAAW,CAAEF,KAAM,GAAIC,KAAM,IAC7BE,OAAQ,CAAEC,YAAa,MAE/B,KAAK,EACD,MAAwB,YAAjBvC,EAAK,GAAGpK,MAAR,kBACA5B,GADA,IAEHkO,OAAQ,CACJC,KAAMpB,GAAcf,EAAK,IACzBoC,KAAM,IAEVC,UAAW,CACPF,KAAMpB,GAAcf,EAAK,IACzBoC,KAAM,IAEVE,OAAQ,CACJC,YAAaR,EAAQhO,KAAIyO,EAAAA,GAAAA,IAAQ,SAAAjP,GAAC,MAAI,CAACA,KAAIyO,QAX5C,kBAcAhO,GAdA,IAeHkO,OAAQ,CACJC,KAAM,GACNC,KAAMnF,GAAa6D,GAAed,EAAK,MAE3CqC,UAAW,CACPF,KAAM,GACNC,KAAMnF,GAAa8D,GAAcf,EAAK,MAE1CsC,OAAQ,CACJC,YAAa,CAACtF,GAAa8E,EAAQhO,IAAIiO,QAGnD,KAAK,EACD,GAAqB,YAAjBhC,EAAK,GAAGpK,KAAoB,CAC5B,IAAM6M,EAvDqB,SAACzC,GAAD,OACvC9I,OAAOM,OAAOwI,EAAK,GAAGxI,QAAQ0F,QAAUhG,OAAOM,OAAOwI,EAAK,GAAGxI,QAAQ0F,OAChE8C,EAAO,CAACA,EAAK,GAAIA,EAAK,IAqDF0C,CAAmC1C,GACjD,MAAwB,YAAjBA,EAAK,GAAGpK,MAAR,kBACA5B,GADA,IAEHkO,OAAQ,CACJC,KAAMrB,GAAe2B,EAAM,IAC3BL,KAAMtB,GAAe2B,EAAM,KAE/BJ,UAAW,CACPF,KAAMpB,GAAc0B,EAAM,IAC1BL,KAAMrB,GAAc0B,EAAM,KAE9BH,OAAQ,CACJC,YAAaN,EAAaQ,EAAM,GAAIA,EAAM,QAX3C,kBAcAzO,GAdA,IAeHkO,OAAQ,CACJC,KAAMpB,GAAcf,EAAK,IACzBoC,KAAMnF,GAAa6D,GAAed,EAAK,MAE3CqC,UAAW,CACPF,KAAMpB,GAAc0B,EAAM,IAC1BL,KAAMnF,GAAa8D,GAAcf,EAAK,MAE1CsC,OAAQ,CACJC,YAAapF,GAAmB8E,EAAajC,EAAK,GAAIA,EAAK,QAInE,MAAwB,YAAjBA,EAAK,GAAGpK,MAAR,kBACA5B,GADA,IAEHkO,OAAQ,CACJC,KAAMlF,GAAa6D,GAAed,EAAK,KACvCoC,KAAMnF,GAAa6D,GAAed,EAAK,MAE3CqC,UAAW,CACPF,KAAMlF,GAAa8D,GAAcf,EAAK,KACtCoC,KAAMnF,GAAa8D,GAAcf,EAAK,MAE1CsC,OAAQ,CACJC,YAAatF,GAAaE,GAAmB8E,EAAajC,EAAK,GAAIA,EAAK,UAXzE,kBAcAhM,GAdA,IAeHkO,OAAQ,CACJC,KAAMpB,GAAcf,EAAK,IACzBoC,KAAMnF,GAAa6D,GAAed,EAAK,MAE3CqC,UAAW,CACPF,KAAMpB,GAAcf,EAAK,IACzBoC,KAAMnF,GAAa8D,GAAcf,EAAK,MAE1CsC,OAAQ,CACJC,YAAapF,GAAmB8E,EAAajC,EAAK,GAAIA,EAAK,QAI3E,QACI,MAAM,IAAI1K,MAAJ,cAAiB0K,EAAK9C,OAAtB,8BEhULyF,GAAoB,SAC7BC,EACAC,EACAC,EACAC,GAEA,IAAMC,EAAa,SAACjF,GAChB,IAAMkF,EAAKJ,EAAczM,QACnB8M,EAAMJ,EAAU/E,EAAEoF,OAClBjN,EAAO2M,EAAc3M,KACrBkN,EAAUH,EAAG/F,OAAS,IAAO,OAAHgG,QAAG,IAAHA,OAAA,EAAAA,EAAKG,UAArB,OAA2CH,QAA3C,IAA2CA,OAA3C,EAA2CA,EAAK/P,MAC1DmQ,EAAWL,EAAG/F,OAAS,EAAIhH,EAAKmN,OAASnN,EAAK/C,KAapD,MAJc,CARAiQ,GAAWE,EAUrBL,EAAGlP,KATM,SAAAoK,GACT,OAAKA,EAAE3G,OAAOuG,EAAEI,EAAE1H,KAIX0H,EAAE3G,OAAOuG,EAAEI,EAAE1H,KAAK8M,WAFd,MAMEC,KAAK,OAETzK,QAAO,SAAAxF,GAAC,OAAIA,EAAE2J,OAAS,KAAGsG,KAAK,OAEhD,OAAOZ,EAAG7O,KAAI,SAAAgK,GAAC,yBACRA,GADQ,IAEX5K,KAAM6P,EAAWjF,GACjBxK,EAAGwK,EAAE8E,EAActP,EAAEkD,IACrBjD,EAAGuK,EAAE8E,EAAcrP,EAAEiD,IACrBhD,EAAGsK,EAAE8E,EAAcpP,EAAEgD,IACrBoL,MAAOnB,GAAoBqC,EAAcF,EAAczM,QAAS2H,SAOlE0F,GAAsB,SAACjI,EACAkI,EACAC,EACAC,GACzB,IAAMC,IAAWC,EAAAA,GAAAA,GAAItI,GAAQmI,GAAUA,EACjCI,IAAYD,EAAAA,GAAAA,GAAIJ,GAASC,GAAUA,EAEnCK,GAAwB,EAATL,GAAaM,EAAAA,GAAAA,GAAIzI,IAASmI,EACzCO,GAAyB,IAATP,GAAeM,EAAAA,GAAAA,GAAIP,IAAUC,EAC7CQ,GAAUF,EAAAA,GAAAA,GAAI,CAACJ,EAASE,EAAUC,EAAYE,IACpD,GAAmB,MAAfN,EAAqB,CACrB,GAAIA,IAAgB3Q,EAAamR,GAC7B,MAAO,CAACC,OAAQpR,EAAamR,GAAIE,iBAAkBT,GAChD,GAAID,IAAgB3Q,EAAasR,GACpC,MAAO,CAACF,OAAQpR,EAAasR,GAAID,iBAAkBP,GAChD,GAAIH,IAAgB3Q,EAAauR,GACpC,MAAO,CAACH,OAAQpR,EAAauR,GAAIF,iBAAkBN,GAChD,GAAIJ,IAAgB3Q,EAAawR,GACpC,MAAO,CAACJ,OAAQpR,EAAawR,GAAIH,iBAAkBJ,GAG3D,OAAIL,IAAYM,EACL,CAACE,OAAQpR,EAAamR,GAAIE,iBAAkBT,GAC5CE,IAAaI,EACb,CAACE,OAAQpR,EAAasR,GAAID,iBAAkBP,GAC5CC,IAAeG,EACf,CAACE,OAAQpR,EAAauR,GAAIF,iBAAkBN,GAC5CE,IAAgBC,EAChB,CAACE,OAAQpR,EAAawR,GAAIH,iBAAkBJ,GAE5C,CAACG,OAAQpR,EAAamR,GAAIE,iBAAkBT,IAI9Ca,GAAuB,SAAChL,EACAiL,EACAhO,EACAiN,GACjC,IAAMgB,EAAc,SAACC,EACArN,EACAsN,EACAC,GACjB,MAAO,CACHvN,EAAOuB,QAAO,SAACgF,EAAGS,GAAJ,OAAUqG,EAAK9G,EAAGS,GAAKsG,KAAI/Q,KAAI,SAAAgK,GAAC,OAAIA,EAAEvK,KACpDgE,EAAOuB,QAAO,SAACgF,EAAGS,GAAJ,OAAUqG,EAAK9G,EAAGS,GAAKuG,KAAIhR,KAAI,SAAAgK,GAAC,OAAIA,EAAEvK,OAGtDmQ,EAASnG,GAAQmH,EAAcnR,GACrC,GAAsB,WAAlBkG,EAASvG,KAAmB,CAC5B,IAAMgL,EAAIX,GAAQmH,EAAcpR,GAG1ByR,GAAO7G,EAFCwG,EAAcpR,EAAE,IAEJ,EACpB0R,GAAO9G,EAFCwG,EAAcpR,EAAE,IAEJ,EAC1B,OAAOkQ,GAAmB,WAAnB,WAAuBmB,GAAY,SAAAM,GAAC,OAAIA,EAAE3R,IAAGoD,EAAMqO,EAAKC,IAAxD,QAA8DtB,EAAQC,KAC1E,GAAsB,SAAlBlK,EAASvG,KAAiB,CACjC,IAAMgL,EAAIX,GAAQmH,EAAcrL,MAChC,OAAOmK,GAAmB,WAAnB,WAAuBmB,GAAY,SAAAM,GAAC,OAAIA,EAAE5L,OAAM3C,EAAMwH,EAAGA,IAAzD,QAA6DwF,EAAQC,KACzE,GAAsB,QAAlBlK,EAASvG,KAAgB,CAChC,IAAMgS,EAAaxO,EAAKyO,MAAK,SAACrO,EAAG4G,GAAJ,OAAU5G,EAAEsO,QAAU1H,EAAE0H,WAC/ClH,EAAIxH,EAAKuG,OAAS,EACxB,OAAOuG,GAAmB,WAAnB,WAAuBmB,GAAY,SAACvP,EAAGmJ,GAAJ,OAAUA,IAAG2G,EAAYhH,EAAGA,IAA/D,QAAmEwF,EAAQC,KAElF,MAAM,IAAItO,MAAM,wBAA0BoE,EAASvG,O,WCtF9CmS,IAA2BzM,EAAAA,EAAAA,KTiBC,SAACb,GAAD,OACrCA,EAAMmC,SAAS5E,QShBfuD,GACA,SAACyM,EAAIC,GACD,OAAKA,GAAsB,IAAfA,EAAItI,QAGT,kBACAqI,GADP,IAEIhS,EAAGgS,EAAGhS,GAAKiS,EAAI,GAAG/O,GAClBjD,EAAG+R,EAAG/R,GAAKgS,EAAI,GAAG/O,GAClBhD,EAAG8R,EAAG9R,GAAK+R,EAAI,GAAG/O,KANX8O,KAWNE,IAAsB5M,EAAAA,EAAAA,IAC/BR,EACAG,EACAF,EACAC,EACA+M,IACA,SAACzO,EAAOO,EAAQ9D,EAAQ+D,EAAiBG,GACrC,OAAOkO,EAAAA,GAAAA,IAAc,SAAC3H,EAAG6C,GACrB,OAAKtN,GAAWyK,EAEC,SAAN6C,EACA/J,EAAMC,KAAKiH,GACL,YAAN6C,EACA7C,EAAEhK,KAAI,SAAAwR,GAAE,OAAIlO,EAAgBP,KAAKyO,MAC1B,UAAN3E,EACDxJ,EAAON,KAAKiH,GAEZzK,EAAOwD,KAAKiH,GARZ,OAUZvG,MAIEmO,IAAqB9M,EAAAA,EAAAA,IAC9B4M,IACA,SAACtL,GAEG,OHyQ0B,SAAC9C,GAC/B,IAAM2I,EAAO9I,OAAOM,OAAOH,GACrBuO,EAAa5F,EAAKjM,KAAI,SAAAsM,GAAG,OAAIrB,GAA4BqB,EAAI5J,OAC7DoP,EAAcrG,KAAKsE,IAAL,MAAAtE,MAAI,QAAQoG,IAC1BE,EAAetG,KAAKyE,IAAL,MAAAzE,MAAI,QAAQoG,IAC3BtH,EAAgB,SAAC+B,EAAqB7B,GACxC,OAAIqH,IAAgBC,EACH,IAANtH,EAEAQ,GAA4BqB,EAAI5J,MAAQqP,GAGjDpE,EAAQ1B,EAAKtC,QAAO,SACtBqI,EACA1F,EACA2F,GAEA,IAAMC,GAAkBF,EAAM,GAAG5O,KAAK8I,GAChCiB,EAAKrC,GAAqBwB,EAAI5J,IACpC,IAAKyK,EACD,MAAM,IAAI5L,MAAM,gCAAkC+K,EAAI5J,IAE1D,IAAMyP,EAA+BH,EAAMrJ,SAAQ,SAC/CyJ,GAEA,IAAMC,EAAclP,OAAOM,OAAO6I,EAAI7I,QAChC4G,EAAegI,EAAYlJ,OACjC,OAAOkJ,EAAYrS,KAAI,SAACsS,EAA2BC,GAA5B,MAAoC,CACvDnP,KAAM8O,EAAiB,CACnBhG,GAAI,CACAK,MAAOD,EAAI5J,GACXlB,MAAO8Q,EAAKvH,aAHA,kBAMbqH,EAAShP,MANI,IAOhBgJ,GAAI,CACAG,MAAOD,EAAI5J,GACXlB,MAAO8Q,EAAKvH,aAGpB+C,MAAOX,EACHiF,EAAStE,MACTwE,EACAjI,EACAkI,EACAhI,EAAc+B,EAAK2F,WAG/B,OAAOC,EAAiBC,EAAH,mBAAmBH,IAAnB,QAA6BG,MACnD,CAAC,CAACrE,MAAOhE,GAAe1G,KAAM,MACjC,OAAOsK,GAAkBzB,EAAM0B,GG3TpB6E,CADMpM,EAAS/D,YAKjBoQ,IAAyB3N,EAAAA,EAAAA,KZiBA,SAACb,GAAD,uBAClCA,EAAMrB,KAAKpB,aADuB,aAClC,EAAkBuN,UAAU2D,UYhB5BnB,IACA,SAACoB,EAAYnB,GACT,OAAOmB,EAAWnB,EAAGpP,UAIhBwQ,IAAmB9N,EAAAA,EAAAA,KZMc,SAACb,GAAD,uBAC1CA,EAAMrB,KAAKpB,aAD+B,aAC1C,EAAkBkC,WAAWC,iBYL7B4N,IACA,SAACsB,EAAOC,GACJ,OAAI3P,OAAOC,KAAKyP,GAAO1J,OAAS,GACrB0J,EAAMC,EAAI3Q,MAAQ0Q,EAAMC,EAAI3Q,MAAM2Q,EAAI1Q,OAEtC,QAKN2Q,IAAajO,EAAAA,EAAAA,IACtBR,EACAiN,IACA,SAACzO,EAAO0O,GACJ,OAAO1O,EAAMC,KAAKyO,EAAGrP,SAIhB6Q,IAA8BlO,EAAAA,EAAAA,IACvCN,EACA+M,IACA,SAAC0B,EAAIzB,GACD,OAAOA,EAAGnP,QAAQrC,KAAI,SAAAoK,GAAC,OAAI6I,EAAGlQ,KAAKqH,SAIrC8I,GAAyB,SAACrE,EAAI1M,EAAMgR,EAAIC,EAAIC,GAC9C,IAAMC,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,SAC5C,OAAOR,GAAkB0E,EAAKF,EAAID,EAAIE,IAIpCE,GAA4B,SAAC1E,EAAI1M,EAAMgR,EAAIC,EAAIC,GACjD,IAAMC,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,SAC5C,OAAOR,GAAkB0E,EAAKF,EAAID,EAAIE,IAQ7BG,IAAiB1O,EAAAA,EAAAA,IAC1BY,GACAd,EACAmO,GACAN,GACAf,GACApM,GACAsM,IACA,SAACjM,EAAUkJ,EAAI1M,EAAMgR,EAAIC,EAAI7N,EAAM8N,GAC/B,IAIMI,EAAiB,WACnB,IAAMH,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,OAASpF,EAAEzE,OAASA,KAChE,OAAOqJ,GAAkB0E,EAAKF,EAAID,EAAIE,IAO1C,GAAsB,WAAlB1N,EAASvG,KACT,OAAOqU,IACJ,GAAsB,SAAlB9N,EAASvG,KAChB,OAA0B,IAAtBgU,EAAG/Q,QAAQ8G,OACJoK,GAA0B1E,EAAI1M,EAAMgR,EAAIC,EAAIC,GAE5CH,GAAuBrE,EAAI1M,EAAMgR,EAAIC,EAAIC,GAEjD,GAAsB,QAAlB1N,EAASvG,KAChB,OAA0B,IAAtBgU,EAAG/Q,QAAQ8G,OACJsK,IAvBK,WAChB,IAAMH,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,OAASpF,EAAEzE,OAASA,KAChE,OAAOqJ,GAAkB0E,EAAKF,EAAID,EAAIE,GAuB3BK,GAER,GAAsB,QAAlB/N,EAASvG,KAChB,OApBmC,WACnC,IAAMkU,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,OAASpF,EAAEzE,OAASA,KAChE,OAAOqJ,GAAkB0E,GAAD,QAAC,UAASF,GAAV,IAAc/Q,QAAS,KAAK8Q,EAAIE,GAkBjDM,GAEP,MAAM,IAAIpS,MAAM,wBAA0BoE,EAASvG,SAKlDwU,IAAsB9O,EAAAA,EAAAA,IAC/BY,GACAd,EACAmO,GACAN,GACAf,GACAE,IACA,SAACjM,EAAUkJ,EAAI1M,EAAMgR,EAAIC,EAAIC,GACzB,IAAMzQ,EACoB,QAAlB+C,EAASvG,KA1DyB,SAACyP,EAAI1M,EAAMgR,EAAIC,EAAIC,GACjE,IAAMC,EAAMzE,EAAG7J,QAAO,SAAAgF,GAAC,OAAIA,EAAEoF,QAAUjN,EAAKiN,SAC5C,OAAOR,GAAkB0E,GAAD,QAAC,UAASF,GAAV,IAAc/Q,QAAS,KAAK8Q,EAAIE,GAyDrCQ,CAA0ChF,EAAI1M,EAAMgR,EAAIC,EAAIC,GAC1C,WAAlB1N,EAASvG,MAA2C,IAAtBgU,EAAG/Q,QAAQ8G,OACzCoK,GAA0B1E,EAAI1M,EAAMgR,EAAIC,EAAIC,GAE5CH,GAAuBrE,EAAI1M,EAAMgR,EAAIC,EAAIC,GAGlDS,EAAM,CACRtU,EAAGoD,EAAK5C,KAAI,SAAAgK,GAAC,OAAIA,EAAExK,KACnBC,EAAGmD,EAAK5C,KAAI,SAAAgK,GAAC,OAAIA,EAAEvK,KACnBC,EAAGkD,EAAK5C,KAAI,SAAAgK,GAAC,OAAIA,EAAEtK,KACnB6F,KAAM3C,EAAK5C,KAAI,SAAAgK,GAAC,OAAIA,EAAEzE,SAE1B,MAAO,CACH/F,EAAG,EAAC0Q,EAAAA,GAAAA,GAAI4D,EAAItU,IAAIuQ,EAAAA,GAAAA,GAAI+D,EAAItU,IACxBC,EAAG,EAACyQ,EAAAA,GAAAA,GAAI4D,EAAIrU,IAAIsQ,EAAAA,GAAAA,GAAI+D,EAAIrU,IACxBC,EAAG,EAACwQ,EAAAA,GAAAA,GAAI4D,EAAIpU,IAAIqQ,EAAAA,GAAAA,GAAI+D,EAAIpU,IACxB6F,KAAM,EAAC2K,EAAAA,GAAAA,GAAI4D,EAAIvO,OAAOwK,EAAAA,GAAAA,GAAI+D,EAAIvO,WAK7BwO,IAAuBjP,EAAAA,EAAAA,IAChCY,GACA8N,GACAI,IACA,SAACjO,EAAU/C,EAAMgO,GACb,GAA0B,MAAtBA,EAAcnR,EAAE,GAApB,CAEO,GAAsB,WAAlBkG,EAASvG,MAAuC,SAAlBuG,EAASvG,KAC9C,OAAOuR,GAAqBhL,EAAUiL,EAAehO,GAClD,GAAsB,QAAlB+C,EAASvG,KAChB,OAAOuR,GAAqBhL,EAAUiL,EAAehO,EAAM1D,EAAasR,IAExE,MAAM,IAAIjP,MAAM,wBAA0BoE,EAASvG,UAKlD4U,IAAoBlP,EAAAA,EAAAA,IAC7BR,GACA,SAACxB,GAAD,OAA0Bd,EAAahC,KAAI,SAAAC,GAAC,MAAK,CAC7CgC,MAAOhC,EAAEgC,MACTE,KAAMW,EAAMC,KAAK9C,EAAEiC,OAAOC,MAC1B8R,IAAK,QAAUC,GAAAA,UAAsBjU,EAAEiC,OAAQ,CAACiS,YAAa,mBAGxDC,IAAWtP,EAAAA,EAAAA,IACpBF,GACA,SAACnB,GACG,OAAOA,EAAO0F,OAAS,KChNzBkL,GAAkB,CACpBC,gBAAiB,GACjBC,kBAAmB,IACnBC,eAAgB,GAChBC,SAAS,GAMPC,GAAc,SAAdA,EAAeC,EAAqBC,GACtC,IAAMC,GAAKC,EAAAA,GAAAA,IAAQ,SAAAC,GAAI,OAAIA,EAAKJ,EAAU,OAAKlR,EAAAA,GAAAA,GAAOmR,IACtD,OAAyB,IAArBD,EAAUxL,OACH0L,GAEA7U,EAAAA,EAAAA,IAAIiB,EAAAA,EAAAA,GAAMyT,EAANzT,EAAmB+T,EAAAA,GAAAA,GAAKL,IAAaE,IAQlDI,GAAa,SAAC7R,EAAgB8R,GAChC,IAAMC,EALS,SAAC/R,EAAgB8R,GAChC,OAAOvL,EAAAA,GAAAA,IAAO,SAACkL,EAAIhI,GAAL,OAAWgI,EAAGhI,KAAIqI,EAAS9R,GAIzBgS,CAAWhS,EAAM8R,GACjC,GAAuB,IAAnBC,EAAQhM,OACR,OAAOgM,EAAQ,GAEf,MAAM,IAAI5T,MAAJ,gBAAmB4T,EAAQhM,OAA3B,kCAA2D/F,KAInEiS,GAAiB,SAACC,EAAuBC,GAC3C,IAAM/K,EAAIiB,KAAKyE,IAAIoF,EAAYnM,OAAQoM,EAASpM,QAGhD,OAAOqM,EAAAA,GAAAA,IAAI,SAAA/K,GAAC,OAAI6K,EAAY7K,IAAM8K,EAAS9K,MAAIgL,EAAAA,GAAAA,GAAM,EAAGjL,KAGtDkL,GAAiB,SAAC,GAAY,IAAXX,EAAU,EAAVA,KACf3O,EAAWmC,GAAemJ,IAC1B/L,EAAW4C,GAAe7C,IAE1BiQ,EAAiB,SAAC,GAA8B,IAA7BpJ,EAA4B,EAA5BA,MACfqJ,EAAcvU,EAA6B+E,EAASmG,GAAO1K,MACjE,OACI8D,EAASpG,OAAOgN,IAAUnG,EAASmG,KAC/B,4BACKnG,EAASmG,GAAOnN,KADrB,IAC4B,IACvBwW,EAAYb,EAAKxI,QAMlC,OACI,kBAAKsJ,UAAU,kBAAf,WACI,kBAAKA,UAAU,gBAAf,WACI,yBAAKd,EAAK3V,QACV,iBAAKyW,UAAU,OAAf,SAAuBd,EAAKxP,WAEhC,kBAAKsQ,UAAU,eAAf,WACI,UAACF,EAAD,CAAgBpJ,MAAM,OACtB,UAACoJ,EAAD,CAAgBpJ,MAAM,aA+ItC,GAzIkB,SAACqI,EAAcD,EACdmB,GAA2C,IAAhCC,EAA+B,wDACnDC,EAAarB,EAAUxL,OACvB+L,EAAUR,GAAYC,EAAWC,GACvC,EAAmCqB,EAAAA,SAAyB,MAA5D,eAAOC,EAAP,KAAqBC,EAArB,KACA,GAOIC,EAAAA,GAAAA,KANAC,EADJ,EACIA,YACAC,EAFJ,EAEIA,YACAC,EAHJ,EAGIA,WACAC,EAJJ,EAIIA,YACAC,EALJ,EAKIA,YACAC,EANJ,EAMIA,YAGEC,EAASV,EAAAA,aACX,SAACV,GACG,IAAKW,IAAiBb,GAAea,EAAcX,GAAW,CAC1DY,EAAWZ,GACX,IAAMR,EAAOE,GAAWM,EAAUL,GAClCuB,EAAY,CACRD,aAAa,UAACd,GAAD,CAAgBX,KAAMA,IACnCuB,YAAavB,EAAK6B,QAClBL,WAAYxB,EAAKzD,aAI7B,CAACmF,EAAavB,EAASgB,IAGrBW,EAAWZ,EAAAA,aAAkB,WAC/BE,EAAW,MACXO,MACD,CAACA,IAEEI,EAAU,SAACC,GACb,OAAQf,GACJ,KAAK,EAAG,MAAO,CAACe,GAChB,KAAK,EAAG,MAAO,CAACA,GAAM1R,EAAAA,EAAAA,IAAKjC,EAAAA,GAAAA,GAAK8R,EAAQ6B,MACxC,QAAS,MAAM,IAAIxV,MAAM,0BAA4ByU,KAI7DC,EAAAA,WAAgB,WACRH,GACAa,EAAOG,EAAQhB,OAIvB,IAAMkB,EAAUf,EAAAA,MAAW,WACvB,IAAMgB,EAAMhB,EAAAA,OAAa,MAIzB,OADAiB,GAAgBD,EAAKJ,GACdL,GACH,gCACKH,GAAeG,IAEZ,UAAC,GAAD,CACI7O,IAAK4O,EACL9O,KAAM6O,EACNpO,OAAK,kBACEiP,GAAAA,GADF,IAEDC,SAAU,MACVC,QAAS,QACTC,OAAQ,WAEZzB,UAAU,8BATd,UAWI,iBAAKoB,IAAKA,EAAV,SACKT,QAKjB,QAGFe,EAAiBtB,EAAAA,aAAkB,SAACuB,EAAkBpN,GAAiC,IAA9B1J,EAA6B,uDAApB2T,GAEpE,GAAmCoD,EAAAA,GAAAA,YAAU,iBAAO,CAChDC,YAAahX,EAAQ8T,mBADzB,eAASkD,EAAT,KAASA,YAAeC,EAAxB,KAGMC,EAAa1B,GAAgBb,GAAea,EAAcsB,GAC1DK,EAAUD,EAAalX,EAAQ4T,gBAAkB4B,EAAexV,EAAQ6T,kBAAoB7T,EAAQ8T,eACpGC,EAA6B,MAAnB/T,EAAQ+T,UAAuC,IAApB/T,EAAQ+T,QACnD,OAAIA,GACAkD,EAAQ,CAACD,YAAaG,KAOlB,UAAC,GAAAC,SAAA,EAAD,CACIC,YAAaL,EAAYM,IAAG,SAAAxY,GAAC,OAAIA,KACjCyY,cAAeP,EAAYM,IAAG,SAAAxY,GAAC,OAAIA,KAFvC,SAKK4K,GAFIoN,EAAU/H,KAAK,OAMrBwG,EAAAA,aAAmB7L,GAAnB,kBACAA,EAAE8N,OADF,IAEHC,IAAKX,EAAU/H,KAAK,KACpBsI,YAAaF,EACbI,cAAeJ,OAGxB,CAAC3B,IAEEkC,EAAkBnC,EAAAA,aAAkB,SAACuB,EAAuBpN,GAC9D,GAAI2L,EACA,OAAO3L,EAEP,IAAMiO,EAAW,SAACrR,GACd,IAAMsR,EAAoBd,EAAUxX,KAAI,SAAA6M,GAAC,OAAIA,aAAa0L,SAAW1L,EAAE7F,GAAS6F,KAChF8J,EAAO2B,IAEX,OAAOrC,EAAAA,aAAmB7L,GAAnB,kBACAA,EAAE8N,OADF,IAEHM,aAAcH,EACdI,YAAaJ,EACbK,aAAc7B,OAGvB,CAACF,EAAQE,EAAUd,IAEhB4C,EAA+B1C,EAAAA,aACjC,SAACuB,EAAuBpN,GAAiC,IAA9B1J,EAA6B,uDAApB2T,GAC1BuE,EAAepB,EAAUxS,QAAO,SAAA6H,GAAC,QAAMA,aAAa0L,aAC1D,OAAOH,EAAgBZ,EAAWD,EAAeqB,EAAcxO,EAAG1J,MACnE,CAAC6W,EAAgBa,IAExB,MAAO,CAACb,eAAAA,EAAgBa,gBAAAA,EAAiBO,6BAAAA,EAA8B3B,QAAAA,IC9I3E,GAlEmB,SAAC,GAOI,IANpBpU,EAMmB,EANnBA,KACAgO,EAKmB,EALnBA,cAKmB,IAJnBkF,UAAAA,OAImB,MAJP,KAIO,MAHnBC,mBAAAA,OAGmB,SAFnB5V,EAEmB,EAFnBA,MACAC,EACmB,EADnBA,OAEMiX,EAnBS,GAmBC5L,KAAKyE,IAAI/P,EAAOC,GAC1ByY,EAAS5C,EAAAA,SAAc,kBACzB6C,EAAAA,GAAAA,GAAoB,CAChBC,OAAQnI,EAAcpR,EACtBiW,MAAO,CAAC4B,EAASlX,EAAQkX,GACzBxL,OAAO,MACP,CAAC+E,EAAeyG,EAASlX,IAC3B6Y,EAAS/C,EAAAA,SAAc,kBACzB6C,EAAAA,GAAAA,GAAoB,CAChBC,OAAQnI,EAAcnR,EACtBgW,MAAO,CAACrV,EAASiX,EAAU,EAAGA,GAC9BxL,OAAO,MACP,CAAC+E,EAAeyG,EAASjX,IAC3B6Y,EAAYhD,EAAAA,SAAc,kBAC5BiD,EAAAA,GAAAA,GAAmB,CACfH,OAAQ,CAAsB,GAArBnI,EAAclR,EAAE,GAA8B,IAArBkR,EAAclR,EAAE,IAClD+V,MAAO,CAAC,KAAQrV,EAASiX,GAAU,KAAQjX,EAASiX,IACpD8B,SAAU,OACV,CAACvI,EAAeyG,EAASjX,IAC3BwU,EAAQhS,EACToC,QAAO,SAAAgF,GAAC,OAAW,MAAPA,EAAExK,GAAoB,MAAPwK,EAAEvK,GAAoB,MAAPuK,EAAEtK,KAC5CM,KAAI,SAAAgK,GAAC,yBACCA,GADD,IAEF4M,QAASiC,EAAO7O,EAAExK,GAClB8R,QAAS0H,EAAOhP,EAAEvK,GAClB2Z,KAAMH,EAAgB,IAANjP,EAAEtK,QAG1B,EACI2Z,GAAUzE,EAAO,CAAC,QAASkB,EAAWC,GADnC4C,EAAP,EAAOA,6BAA8B3B,EAArC,EAAqCA,QAE/BsC,EAAS,SAAAhP,GAAK,MAAK,CACrBiP,MAAO3E,EAAMtK,GAAOsM,QACpB4C,MAAO5E,EAAMtK,GAAOgH,QACpBmI,SAAU7E,EAAMtK,GAAO8O,OAE3B,GAAuBM,EAAAA,GAAAA,YAAW9E,EAAMzL,OAAQmQ,GAAhD,eAAOK,EAAP,KAGA,OAHA,KACIC,MAAMN,IAGN,mCACI,iBAAKnZ,MAAOA,EAAOC,OAAQA,EAA3B,SACKwU,EAAM5U,KAAI,SAAC+U,EAAMtK,GACd,OAAOkO,EAA6B,CAAC5D,EAAK3V,OACtC,UAAC,GAAA0Y,SAAA,OAAD,CACI+B,GAAIF,EAAQlP,GAAG8O,MACfO,GAAIH,EAAQlP,GAAG+O,MACflO,EAAGqO,EAAQlP,GAAGgP,SACdM,KAAMhF,EAAKjH,MAAQ,KACnBkM,OAAQjF,EAAKjH,eAK7B,UAACkJ,EAAD,Q,mIC7CNiD,IAAaC,EAAAA,GAAAA,KACbC,GAAgC,CAAC,KAAO,GAExCC,GAAiB,CACnB9F,gBAAiB,EACjBC,kBAAmB,GACnBC,eAAgB,GAChBC,SAAS,GAKP4F,GAAc,SAAC,GACwD,IADtDzX,EACqD,EADrDA,KAAMgO,EAC+C,EAD/CA,cAAezQ,EACgC,EADhCA,MAAOC,EACyB,EADzBA,OAAQ+B,EACiB,EADjBA,KAAM4M,EACW,EADXA,UAAWrL,EACA,EADAA,WACA,IAAnDoS,UAAAA,OAAmD,MAAvC,KAAuC,MAAjCC,mBAAAA,OAAiC,SAClEuE,EAAQ7O,KAAKI,MAAgC,IAA1BJ,KAAKyE,IAAI/P,EAAOC,IACnCma,EAAcC,GAAAA,EAAiB9W,EAAYA,EAAW+W,QAAQ7X,MAClD8X,EAAaH,EAAvBI,SAIFC,GAAa9B,EAAAA,GAAAA,KACdC,OAAOnI,EAAcnR,GAErBgW,MAAM,EACHoF,EAAAA,GAAAA,IAAI,yBACJA,EAAAA,GAAAA,IAAI,aAEPC,YAAYC,GAAAA,GAEXC,GAAOC,EAAAA,GAAAA,KAAUhB,WAAWA,IAClCA,GAAWK,MAAM,GAAGY,UAAsB,OAAZ/Y,EAAKO,GAAcyX,GAAc,CAAC,EAAG,IACnE,IAAMvQ,EAAIoR,EAAKG,OAAOZ,GAChBjR,EAAI,IAAMmC,KAAKsE,KAAKnG,EAAE,GAAG,GAAKA,EAAE,GAAG,IAAMzJ,GAAQyJ,EAAE,GAAG,GAAKA,EAAE,GAAG,IAAMxJ,GACtEwL,EAAI,EAAEzL,EAAQmJ,GAAKM,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,GAAIxJ,EAASkJ,GAAKM,EAAE,GAAG,GAAKA,EAAE,GAAG,KAAO,GACvFqQ,GAAWK,MAAMhR,GAAG4R,UAAU,CAACtP,EAAE,GAAIA,EAAE,KAEvC,IAAMwP,EAAYxY,EAAK5C,KAAI,SAAAgK,GAAC,iCACrBA,GACA+E,EAAU/E,EAAEoF,QAFS,IAGxBtB,MAAO8M,EAAW5Q,EAAEvK,QAElByV,GAAUnV,EAAAA,EAAAA,GAAOqb,EAAUpb,KAAI,SAAAmR,GAAC,OAAIA,EAAE/B,SAAQgM,GAC9CxG,EAAQ8F,EAAS1a,KAAI,SAAAyC,GACvB,IAAM2H,EAAI6P,IAAWoB,EAAAA,GAAAA,GAAY5Y,IACjC,OAAO,kBACAyS,EAAQzS,EAAEC,KADjB,IAEIkU,QAASxM,EAAE,GACXkH,QAASlH,EAAE,QAInB,EACIiP,GAAUzE,EAAO,CAAC,QAASkB,EAAWC,GADnC4C,EAAP,EAAOA,6BAA8B3B,EAArC,EAAqCA,QAE/BsC,EAAS,SAAAhP,GAAK,MAAK,CAAEgR,UAAW1G,EAAMtK,GAAOwD,QACnD,GAAuB4L,EAAAA,GAAAA,YAAW9E,EAAMzL,OAAQmQ,GAAhD,eAAOK,EAAP,KAEA,OAFA,KACIC,MAAMN,GACHnZ,EAAQ,GAAK,MAChB,mCACI,iBAAKA,MAAOA,EAAOC,OAAQA,EAA3B,UACI,UAACmb,GAAA,EAAD,CACI3Y,KAAM8X,EACNJ,MAAOhR,EACP4R,UAAW,CAACtP,EAAE,GAAIA,EAAE,IAHxB,SAKK,qBAAG+O,SAEK3a,KAAI,WAAoByK,GAAO,IAAxB+Q,EAAuB,EAAvBA,QAASR,EAAc,EAAdA,KACPjG,EAAOG,EAAQsG,EAAQ9Y,IAC7B,OAAKqS,EAGE4D,EAA6B,CAAC5D,EAAK3V,OACtC,UAAC,GAAA0Y,SAAA,KAAD,CACIjC,UAAU,WACV1E,EAAG6J,GAAQ,GACXjB,KAAMJ,EAAQlP,GAAG6Q,UACjBG,YAA2B,WAAd1G,EAAK3V,KAAoB,EAlEzD,KAkE6Dkb,IAC1CF,IARG,cAc/B,UAACpD,EAAD,QAgBZ,GAXgB,SAACkB,GACb,IAAM/V,EAAOoG,GAAewK,IACtBrP,EAAa6E,GAAeqK,IAC5B7D,EAAYxG,GAAekK,IACjC,OAAO/O,IACL,UAAC2W,IAAD,kBAAiBnC,GAAjB,IACa/V,KAAMA,EACN4M,UAAWA,EACXrL,WAAYA,M,2CC3GzBgY,GAAc,CAChBpH,gBAAiB,GACjBC,kBAAmB,IACnBC,eAAgB,GAChBC,SAAS,GAGPkH,GAAe,CACjBrH,gBAAiB,EACjBC,kBAAmB,EACnBC,eAAgB,EAChBC,SAAS,GA+Fb,GA5FiB,SAAC,GAOI,IANlB7R,EAMiB,EANjBA,KACAgO,EAKiB,EALjBA,cAKiB,IAJjBkF,UAAAA,OAIiB,MAJL,KAIK,MAHjBC,mBAAAA,OAGiB,SAFjB5V,EAEiB,EAFjBA,MACAC,EACiB,EADjBA,OAEMwb,EAAW3F,EAAAA,SAAc,iBAlCf,KAmCR7V,IACJ,CAACA,IAECyb,EAAW5F,EAAAA,SAAc,iBArCf,GAsCR9V,IACJ,CAACA,IAEC0Y,GAASC,EAAAA,GAAAA,GAAoB,CAC/BC,OAAQnI,EAAcrL,KACtBkQ,MAAO,CAACmG,EAAUzb,EAAQyb,GAC1B/P,OAAO,IAELmN,GAASF,EAAAA,GAAAA,GAAoB,CAC/BC,OAAQnI,EAAcnR,EACtBgW,MAAO,CAACrV,EAASyb,EAAUA,GAC3BhQ,OAAO,IAEL+I,EAAQhS,EACT5C,KAAI,SAAAmR,GAAC,yBACCA,GADD,IAEFyF,QAASiC,EAAO1H,EAAE5L,MAClB+L,QAAS0H,EAAO7H,EAAE1R,QAGpBqc,GAAQhH,EAAAA,GAAAA,IAAQ,SAAA3D,GAAC,OAAIA,EAAE/R,OAAMwV,GAC7BmH,EAAW5Y,OAAOC,KAAK0Y,GAC7B,EACIzC,GAAUzE,EAAO,CAAC,OAAQ,QAASkB,EAAWC,GAD3CwB,EAAP,EAAOA,eAAgBoB,EAAvB,EAAuBA,6BAA8B3B,EAArD,EAAqDA,QAI/CyE,EAAchQ,KAAKsE,IAAItE,KAAKI,MAAM1L,EAAQ,KAAM,GAChD6b,EAAavQ,KAAKI,MAAoB,GAAd4P,GAExBQ,GAAkBC,EAAAA,GAAAA,GAAQ,CAC5B1c,EANY,SAAC2R,GAAD,OAAOA,EAAEyF,SAOrBnX,EANY,SAAC0R,GAAD,OAAOA,EAAEG,SAOrBnR,MAAAA,EACAC,OAAAA,IAGE+b,EAAc,SAACC,EAAMpV,GACvB,IAAMqV,GAAQC,EAAAA,GAAAA,GAAWtV,GAEzB,OADgBiV,EAAgBG,GAAMG,KAAKF,EAAM7c,EAAG6c,EAAM5c,GAAGmD,KAC9C2C,MAGnB,OACI,mCACI,iBAAKpF,MAAOA,EAAOC,OAAQA,EAA3B,UACI,gCACK2b,EAAS/b,KAAI,SAACmY,GACX,IAAMiE,EAAON,EAAM3D,GACnB,OACI,0BACKQ,EAA6B,CAACyD,EAAK,GAAGhd,MAAM6B,EAAAA,EAAAA,GAAMkb,EAANlb,CAAmBmb,KAC5D,UAACI,GAAA,EAAD,CACA5Z,KAAMwZ,EACN5c,EAAG,SAAC6c,GAAD,OAAgBA,EAAMzF,SACzBnX,EAAG,SAAC4c,GAAD,OAAgBA,EAAM/K,SACzB0I,OAAQoC,EAAK,GAAGtO,MAChB2N,YAAaA,IACTC,IAEPU,EAAKpc,KAAI,SAAAqc,GAAK,OAAI9E,EAAe,CAAC8E,EAAMjd,KAAMid,EAAM9W,OACjD,UAACkX,GAAA,EAAD,CACAhV,KAAM4U,EAAMzF,QACZjP,IAAK0U,EAAM/K,QACXyI,KAAMsC,EAAMvO,MACZkM,OAAO,UACPZ,KAAM4C,EACNP,YAAahQ,KAAKsE,IAAI0L,EAAc,EAAG,KACnCE,SAlBJxD,WAyBxB,UAACnB,EAAD,Q,WC/BZ,GAlEgB,SAAC,GAOI,IANjBpU,EAMgB,EANhBA,KACAgO,EAKgB,EALhBA,cAKgB,IAJhBkF,UAAAA,OAIgB,MAJJ,KAII,MAHhBC,mBAAAA,OAGgB,SAFhB5V,EAEgB,EAFhBA,MACAC,EACgB,EADhBA,OAEMwb,EAAW3F,EAAAA,SAAc,iBA3Bf,KA4BZxK,KAAKyE,IAAI/P,EAAOC,KAChB,CAACD,EAAOC,IAENyb,EAAW5F,EAAAA,SAAc,iBA9Bf,IA+BZxK,KAAKyE,IAAI/P,EAAOC,KAChB,CAACD,EAAOC,IAENsc,EAvBkB,SAAC9L,EAA8BxQ,GAA0D,IAA1Cuc,IAAyC,yDAC1G5D,EAASnI,EAAcnR,EAAE,IAAMkd,EAAc,EAAI/L,EAAcnR,EAAE,IACjEmd,EAAchM,EAAcnR,EAAE,GAAKsZ,EACnCtD,EAAQ,kBACd,OAAOrV,EAASqL,KAAKyE,IAAI9P,EAAQA,GAAUqV,EAAQmH,IAmB1BC,CAAqBjM,EAAexQ,GACvD4Y,EAAS/C,EAAAA,SAAc,kBAAM6C,EAAAA,GAAAA,GAAoB,CACnDC,OAAQ,CAAC,EAAGnI,EAAcnR,EAAE,IAC5BgW,MAAO,CAACrV,EAASyb,EAAUa,EAAmBb,GAC9ChQ,OAAO,MACP,CAACzL,EAAQsc,EAAkBb,EAAUjL,IACnCwK,EAAmBxY,EACpB5C,KAAI,SAAAgK,GAAC,yBACCA,GADD,IAEFsH,QAAS0H,EAAOhP,EAAEvK,QAErB4R,MAAK,SAACrO,EAAG4G,GAAJ,OAAU5G,EAAEsO,QAAU1H,EAAE0H,WAC5BuH,EAAS5C,EAAAA,SAAc,kBAAM6G,EAAAA,GAAAA,GAAkB,CACjDrH,MAAO,CAACmG,EAAUzb,EAAQyb,GAC1B/P,OAAO,EACPkN,QAAQtD,EAAAA,GAAAA,GAAM,EAAG2F,EAAUjS,QAC3BkO,QAAS,QACT,CAAC+D,EAAWQ,EAAUzb,IACpByU,EAAQwG,EAAUpb,KAAI,SAAC+U,EAAMtK,GAAP,eAAC,UACtBsK,GADqB,IAExB6B,QAASiC,EAAOpO,QAEpB,EACI4O,GAAUzE,EAAO,CAAC,QAASkB,EAAWC,GADnC4C,EAAP,EAAOA,6BAA8B3B,EAArC,EAAqCA,QAE/BsC,EAAS,SAAAhP,GAAK,MAAK,CACrBkP,MAAO5E,EAAMtK,GAAOgH,QACpByL,WAAY3c,EAASwU,EAAMtK,GAAOgH,UAEtC,GAAuBoI,EAAAA,GAAAA,YAAW9E,EAAMzL,OAAQmQ,GAAhD,eAAOK,EAAP,KAEA,OAFA,KACIC,MAAMN,IAEN,mCACI,iBAAKnZ,MAAOA,EAAOC,OAAQA,EAASyb,EAApC,SACKjH,EAAM5U,KAAI,SAAC+U,EAAMtK,GACd,OAAOkO,EAA6B,CAAC5D,EAAK3V,OACtC,UAAC,GAAA0Y,SAAA,KAAD,CACIrY,EAAGka,EAAQlP,GAAG+O,MACdpZ,OAAQuZ,EAAQlP,GAAGsS,WACnBvd,EAAGuV,EAAK6B,QACRzW,MAAO0Y,EAAOmE,YACdjD,KAAMhF,EAAKjH,eAK3B,UAACkJ,EAAD,Q,gPCrFCiG,GAAgB,SAAC3T,GAC1B,IAAM4T,EAAQC,OAAOC,SAASC,KAAKC,MAAM,KACzCH,OAAOC,SAASC,KAAO,CAACH,EAAM,GAAI5T,EAAEiU,QAAQ,IAAK,KAAK9N,KAAK,MC8DzD+N,GAAa,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,OAAQC,EAAyC,EAAzCA,QAAS1V,EAAgC,EAAhCA,SAAgC,IAAtB2V,WAAAA,OAAsB,SAClE,EAAsC1H,EAAAA,UAAe,GAArD,eAAO2H,EAAP,KAAoBC,EAApB,KACOC,GAAUC,EAAAA,EAAAA,MAAVD,OAgBP,OAdA7H,EAAAA,WAAgB,WACRwH,IACKK,EAAO7Y,SAAS,iBACb2Y,GACAF,GAAQ,GACRG,GAAe,KAEfZ,GAAc,CAACa,EAAQ,eAAerO,KAAK,MAC3CoO,GAAe,QAI5B,CAACC,EAAQJ,EAASD,EAAQG,KAGzB,UAACI,GAAA,EAAD,CACInI,UAAU,eACVoI,KAAMR,EACNS,QAAS,WACLR,GAAQ,GACRP,OAAOgB,QAAQC,QAEnBT,WAAYA,EACZU,aAAW,EARf,SAUKrW,KAKPsW,GAAkB,SAAC3Y,EACAxD,EACAoD,EACAgZ,EACAC,EACAC,GACrB,IAAMvP,EAAKqP,EAASpV,OAAS,EAAI,OAASoV,EAASve,KAAI,SAAAoK,GAAC,OAAIA,EAAEhL,QAAMqQ,KAAK,KAAO,GAChF,OAAS9J,EAAStG,kBAAoBsG,EAAStG,mBAAqBJ,EAAgBW,QAEhF6e,EAAa,MAAQD,EAAWE,cAAgBxP,EADhDuP,EAAavP,IAEM,SAAlBvJ,EAASvG,KAAkB,GAA3B,YAAqC+C,EAAKmN,OAA1C,aAAqD/J,EAArD,OAGIoZ,GAAkB,SAAC,GAEkC,IAFjCrc,EAEgC,EAFhCA,KAAMmb,EAE0B,EAF1BA,OAAQC,EAEkB,EAFlBA,QAA0BkB,GAER,EAFTC,MAES,EAFFC,SAEE,EAFQF,gBACzCL,EACiC,EADjCA,SAAUC,EACuB,EADvBA,WAAYC,EACW,EADXA,WAAYM,EACD,EADCA,eAClCpZ,EAAiC,EAAjCA,SAAUxD,EAAuB,EAAvBA,KAAMoD,EAAiB,EAAjBA,KACtCyZ,GADuD,EAAXpK,MAChC0J,GAAgB3Y,EAAUxD,EAAMoD,EAAMgZ,EAAUC,EAAYC,IACxEQ,EAAmB/e,EAAY,GACrC,EAA8C+V,EAAAA,SAAegJ,GAA7D,eAAOC,EAAP,KAAwBC,EAAxB,KACA,EAAsClJ,EAAAA,SAAe,CACjD9V,MAxEkB,IAyElBC,OAxEmB,MAsEvB,eAAOgf,EAAP,KAAoBC,EAApB,KAIA,EAAkCpJ,EAAAA,SAAe,CAC7C9V,MAAO8e,EAAiB9e,MACxBC,OAAQ6e,EAAiB7e,SAF7B,eAAOkf,EAAP,KAAkBC,EAAlB,KAIA,EAA4BtJ,EAAAA,SAAe,OAA3C,eAAOuJ,EAAP,KAAeC,EAAf,KACA,EAA8BxJ,EAAAA,SAAuB,MAArD,eAAOyJ,EAAP,KAAgBC,EAAhB,KACMvI,EAAW3L,KAAKI,MAAMuT,EAAYjf,MAAQ,IAC1Cyf,GAAQC,EAAAA,GAAAA,KACRlC,GAAamC,EAAAA,GAAAA,GAAcF,EAAMG,YAAYC,KAAK,OACxD,EAA0C/J,EAAAA,SAAe2I,GAAzD,eAAOqB,EAAP,KAAsBC,EAAtB,KACMC,EAAclK,EAAAA,OAAa,IACjCkK,EAAYlZ,QAAUgZ,EAEtB,IAAMG,EAAe,WACjB,IAAMC,GAAWC,EAAAA,EAAAA,GAAY1B,EAAgB,CACzC2B,cAAe,oBACfC,eAAgB,qBAChBC,WAAY,oBAKhB,OAHAxK,EAAAA,WAAgB,WACZkK,EAAYlZ,QAAUoZ,EAASK,SAAWL,EAASM,YACpD,CAACN,KAEA,kBAAKxK,UAAU,aAAf,WACI,kBAAKA,UAAU,aAAf,WACI,iBAAKA,UAAU,QAAf,SAAwBmJ,KACxB,iBAAKnJ,UAAU,WAAf,sDAGCvT,KAEHyc,GAAkBP,IAClB,iBAAK3I,UAAU,SAAf,SACK2I,GAAc,SAGnBO,GAAkBN,IAClB,iBAAK5I,UAAU,SAAf,SACK4I,QAmBbmC,EAAiB,SAAC,GAAkB,IAAjBjB,EAAgB,EAAhBA,WAoBfkB,EAAa,SAACC,GAChBvB,EAAauB,GACbzB,EAvJiB,SAAC,GAAqB,IAApBlf,EAAmB,EAAnBA,MACrB4gB,EADwC,EAAZ3gB,OACXD,EACjBqL,EAAKC,KAAKyE,IALM,IAKF6Q,EAJG,KAKjBC,EAAIvV,KAAKyE,IAAI1E,EAAKuV,EANF,KAQtB,MAAO,CAAC5gB,MAAO6gB,EAAG5gB,OADRqL,KAAKyE,IAAI8Q,EAAID,IAmJAE,CAAqBH,KAuCxC,OACI,mCACI,iBAAKjL,UAAU,eAAf,6BACA,WAACqL,GAAA,EAAD,CAAerL,UAAU,iBAAzB,WACI,kBAAKnT,GAAG,oBAAR,WACI,iBAAKA,GAAG,UAAUwF,OAAK,kBAAMkX,GAAN,IAAmBhI,SAAAA,IAA1C,UACI,UAACgJ,EAAD,OAEJ,iBAAKvK,UAAU,4BAAf,yBAIJ,iBAAKA,UAAU,iBAAf,UACI,kBAAKA,UAAU,cAAf,WACI,WAACsL,GAAA,EAAD,YACI,UAACC,GAAA,EAAD,CAAYC,QAAQ,WAAWC,QAAQ,cAAvC,mBACA,WAACC,GAAA,EAAD,CAAc7e,GAAG,cACH8e,SArDX,SAACxa,GACxB,IAAM5H,EAAO4H,EAAMG,OAAO3F,MAC1B,GAAa,WAATpC,EACA+f,EAAmB,MACnB/X,SACKqa,uBAAuB,uBAAuB,GAC9CA,uBAAuB,iBAAiB,GACxCC,SAAS,EAAG,UACd,CACH,IAAMpY,EAAIjJ,EAAejB,GACzB+f,EAAmB7V,GACnBuX,EAAWvX,KA2CmB9H,MAAO0d,EAAkBA,EAAgB9f,KAAO,SAF9D,WAGI,sBAAUyf,MAAM,UAAhB,SACK3e,EAAYF,KAAI,SAACsJ,GAAD,OACb,6BAAsBA,EAAElK,MAAXkK,EAAElK,YAGvB,+CAGR,UAACuiB,GAAA,EAAD,CAAWC,KAAG,EAAC/L,UAAU,oCAAzB,SACK,CAAC,QAAS,UAAU7V,KAAI,SAACsJ,GAAD,OACrB,UAAC6X,GAAA,EAAD,CAAqBtL,UAAU,+BAA/B,UACI,UAACgM,GAAA,EAAD,CAAWC,WAAYxY,EACZ+X,QAAQ,WACRG,SAAU,SAACxa,GAAD,OArD/B8Z,GAsDsC,kBAAIxB,GAAL,cAAiBhW,EAAItC,EAAMG,OAAO3F,QArDzF2d,EAAmB,WACnB0B,EAAWC,GAFM,IAACA,GAuDqBtf,MAAO8d,EAAUhW,MALdA,SAsB1B,WAACqY,GAAA,EAAD,CAAWC,KAAG,EAAC/L,UAAU,iBAAzB,WACI,WAACsL,GAAA,EAAD,CAAatL,UAAU,eAAvB,WACI,UAACuL,GAAA,EAAD,CAAYC,QAAQ,WAAWC,QAAQ,SAAvC,qBACA,WAACC,GAAA,EAAD,CAAc7e,GAAG,SACHlB,MAAOge,EACPgC,SAnEnB,SAACxa,GACpB,IAAMxF,EAAQwF,EAAMG,OAAO3F,MAC3Bie,EAAUje,IA+Dc,WAII,sCACA,4CAGR,WAAC2f,GAAA,EAAD,CAAatL,UAAU,eAAvB,WACI,UAACuL,GAAA,EAAD,CAAYC,QAAQ,WAAWC,QAAQ,aAAvC,mBAGA,WAACC,GAAA,EAAD,CAAc7e,GAAG,aACHlB,MAAO2e,EAAYlZ,QAAU,OAAS,QACtCua,SA1ErB,SAACxa,GAClB,IAAMxF,EAAQwF,EAAMG,OAAO3F,MAE3B0e,EADoB,SAAV1e,IAsEc,WAGI,wCACA,wDAiBxB,WAACugB,GAAA,EAAD,CAAelM,UAAU,iBAAzB,WACI,UAACmM,GAAA,EAAD,CAAQnb,QAAS,kBAAMsW,OAAOgB,QAAQC,QAAtC,oBACA,UAAC4D,GAAA,EAAD,CAAQnb,QArJH,WACb,IAAMob,EAAU7a,SACX8a,eAAe,WACfT,uBAAuB,cAAc,IAZ5B,WAClB,OAAQjC,GACJ,IAAK,MAAO,OAAO2C,GAAAA,GACnB,IAAK,MAAO,OAAOA,GAAAA,GACnB,QAAS,MAAM5gB,MAAM,qBAAuBie,KAS5C4C,EAAAA,CAAgBH,EAAI,CAChBI,YAAa/C,EAAUnf,MACvBmiB,aAAchD,EAAUlf,OACxBmiB,WAAY,EACZpiB,MAAO8hB,EAAGO,YACVpiB,OAAQ6hB,EAAGQ,aAEXva,MAAO,CACHE,UAAW,cAEhBsa,MAAK,SAACC,GACLhD,EAAWgD,OAsIP,6BAMVC,EAAiB,SAAC,GAA2B,IAA1BlD,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,WACxB1L,EAAMkJ,OAAOC,SAASyF,KAc5B,OACI,mCACI,iBAAKhN,UAAU,eAAf,6BACA,WAACqL,GAAA,EAAD,CAAerL,UAAU,iBAAzB,WACI,iBAAKA,UAAU,kBAAf,UACI,eAAGiN,SAAU9D,EAAW6D,KAAMnD,EAA9B,UACI,iBAAKqD,IAAI,YAAYC,IAAKtD,SAGlC,iBAAK7J,UAAU,iBAAf,UACI,iBAAKA,UAAU,mBAAf,UACI,iBAAKA,UAAU,kBAAf,UACI,WAACoN,GAAA,EAAD,CACIhP,IAAKA,EACLiP,MAAOxD,EAFX,WAII,UAACyD,GAAA,EAAD,CAAetX,OAAK,KACpB,iBAAK3D,MAAO,CAAC4F,MAAO,WAApB,6CAQpB,WAACiU,GAAA,EAAD,CAAelM,UAAU,iBAAzB,WACI,UAACmM,GAAA,EAAD,CAAQnb,QAAS,kBAAM8Y,EAAW,OAAlC,mBACA,UAACqC,GAAA,EAAD,CAAQnb,QAAS,kBAAMsW,OAAOgB,QAAQC,QAAtC,oBACA,UAAC4D,GAAA,EAAD,CAAQa,KAAMnD,EAASoD,SAAU9D,EAAjC,6BAKhB,OACI,UAACxB,GAAD,CAAYC,OAAQA,EAAQC,QAASA,EAASC,WAAYA,EAA1D,SACK+B,GACK,UAACkD,EAAD,CAAgBlD,QAASA,EAASC,WAAYA,KAC9C,UAACiB,EAAD,CAAgBjB,WAAYA,OAMjCyD,GAAc,SAAClL,GACxB,IAAMvS,EAAW4C,GAAe7C,IAC1BvD,EAAOoG,GAAewK,IACtBxN,EAAOgD,GAAejD,IAE5B,OAAO,UAACqZ,IAAD,kBAAqBzG,GAArB,IACiBvS,SAAUA,EACVxD,KAAMA,EACNoD,KAAMA,EACNqP,MALV,OAQLyO,GAAmB,SAAC,GAAsD,IAArD5F,EAAoD,EAApDA,OAAQC,EAA4C,EAA5CA,QAA4C,IAAnCzb,MAAAA,OAAmC,MAA7B,wBAA6B,EAC5EgS,EAAMkJ,OAAOC,SAASyF,KAC5B,OACI,UAACrF,GAAD,CAAYC,OAAQA,EAAQC,QAASA,EAArC,UACI,mCACI,iBAAK7H,UAAU,gBAAf,UACI,iBAAKA,UAAU,eAAf,sBAEJ,WAACqL,GAAA,EAAD,CAAerL,UAAU,iBAAzB,WACI,kBAAKA,UAAU,cAAf,WACI,UAACyN,GAAA,EAAD,CACIrP,IAAKA,EACLsP,MAAOthB,EAFX,UAII,UAACuhB,GAAA,EAAD,CAAc3X,OAAK,OAEvB,UAAC4X,GAAA,EAAD,CACIxP,IAAKA,EACLhS,MAAOA,EAFX,UAII,UAACyhB,GAAA,EAAD,CAAa7X,OAAK,OAEtB,UAAC8X,GAAA,EAAD,CACI1P,IAAKA,EACLhS,MAAOA,EAFX,UAII,UAAC2hB,GAAA,EAAD,CAAY/X,OAAK,OAErB,UAACgY,GAAA,EAAD,CAAqB5P,IAAKA,EAA1B,UACI,UAAC6P,GAAA,EAAD,CAAcjY,OAAK,UAG3B,kBAAK3D,MAAO,CAAC6b,QAAS,QAAtB,WACI,UAAClC,GAAA,EAAD,CAAWrgB,MAAOyS,KAClB,UAAC,GAAA+P,gBAAD,CAAiBC,OAAQ,aAAUC,KAAMjQ,EAAzC,UACI,UAACkQ,GAAA,EAAD,CAAY,aAAW,OACXtO,UAAU,WACV5T,MAAM,oBAFlB,UAGI,UAACmiB,GAAA,EAAD,eAKhB,UAACrC,GAAA,EAAD,CAAelM,UAAU,iBAAzB,UACI,UAACmM,GAAA,EAAD,CAAQnb,QAAS,kBAAMsW,OAAOgB,QAAQC,QAAtC,2BAOPiG,GAAmB,SAAC,GAAyD,IAAxD5G,EAAuD,EAAvDA,OAAQC,EAA+C,EAA/CA,QAASa,EAAsC,EAAtCA,SAAUC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,WAC/D9Y,EAAW4C,GAAe7C,IAC1BvD,EAAOoG,GAAewK,IACtBxN,EAAOgD,GAAejD,IACtB0Z,EAAYV,GAAgB3Y,EAAUxD,EAAMoD,EAAMgZ,EAAUC,EAAYC,GAC9E,OAAO,UAAC4E,GAAD,CAAkB5F,OAAQA,EAAQC,QAASA,EAASzb,MAAO+c,K,WCpchEsF,IAAeC,E,QAAAA,GAAOC,GAAAA,GAAPD,CAAe,CAChCzW,MAAO,UACP1N,OAAQ,EACR,qBAAsB,CAClBqkB,OAAQ,QAEZ,qBAAsB,CAClBrkB,OAAQ,GACRD,MAAO,GACPukB,gBAAiB,OACjBD,OAAQ,yBACR,qDAAsD,CAClDE,UAAW,WAEf,WAAY,CACRZ,QAAS,SAGjB,0BAA2B,CACvBa,WAAY,IACZxN,SAAU,GACVyN,WAAY,QACZxN,QAAS,EACTlX,MAAO,GACPC,OAAQ,GACR0kB,aAAc,gBACdJ,gBAAiB,UACjBK,gBAAiB,cACjB3c,UAAW,gDACX,WAAY,CAAE2b,QAAS,QACvB,6BAA8B,CAC1B3b,UAAW,iDAEf,QAAS,CACLA,UAAW,kBAGnB,wCAAyC,CACrC2b,QAAS,UAsCjB,GAlCmB,WACf,IAAMxe,EAAOgD,GAAejD,IACtBK,EAAW4C,GAAe7C,IAC1Bf,EAAQ4D,GAAe7D,GACvBsgB,EAAW3c,KAEjB,OAAO1C,GAAYhB,GAASY,IACxB,UAAC0f,GAAA,EAAD,CAAKC,GAAI,CACLC,KAAM,OADV,UAGI,UAACb,GAAD,CACIzO,UAAU,gBACVrU,MAAO+D,EACP2K,IAAKvL,EAAM,GACXoL,KAAK1K,EAAAA,EAAAA,GAAKV,GACVygB,KAAM,EACNC,SAA4B,SAAlB1f,EAASvG,KACnBkmB,kBAAkB,KAClB9D,SAAU,SAACxa,EAAOvH,GACV8F,IAAS9F,GACTulB,EAAS7f,EAAQ1F,KAGzBylB,GAAI,CACAK,WAAY,OACZ,yBAA0B,CACtB5d,IAAK,c,iCV5EzB,GAAY,CAAC,QAAS,WAE1B,SAAS6d,KAA2Q,OAA9PA,GAAWriB,OAAOsiB,QAAU,SAAUte,GAAU,IAAK,IAAIsD,EAAI,EAAGA,EAAIib,UAAUvc,OAAQsB,IAAK,CAAE,IAAIkb,EAASD,UAAUjb,GAAI,IAAK,IAAI0N,KAAOwN,EAAcxiB,OAAOyiB,UAAUC,eAAeC,KAAKH,EAAQxN,KAAQhR,EAAOgR,GAAOwN,EAAOxN,IAAY,OAAOhR,GAAkBqe,GAASO,MAAMC,KAAMN,WAEhT,SAASO,GAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkExN,EAAK1N,EAAnEtD,EAEzF,SAAuCwe,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DxN,EAAK1N,EAA5DtD,EAAS,GAAQgf,EAAahjB,OAAOC,KAAKuiB,GAAqB,IAAKlb,EAAI,EAAGA,EAAI0b,EAAWhd,OAAQsB,IAAO0N,EAAMgO,EAAW1b,GAAQyb,EAASE,QAAQjO,IAAQ,IAAahR,EAAOgR,GAAOwN,EAAOxN,IAAQ,OAAOhR,EAFxMkf,CAA8BV,EAAQO,GAAuB,GAAI/iB,OAAOmjB,sBAAuB,CAAE,IAAIC,EAAmBpjB,OAAOmjB,sBAAsBX,GAAS,IAAKlb,EAAI,EAAGA,EAAI8b,EAAiBpd,OAAQsB,IAAO0N,EAAMoO,EAAiB9b,GAAQyb,EAASE,QAAQjO,IAAQ,GAAkBhV,OAAOyiB,UAAUY,qBAAqBV,KAAKH,EAAQxN,KAAgBhR,EAAOgR,GAAOwN,EAAOxN,IAAU,OAAOhR,EAMne,SAASsf,GAAWC,EAAMC,GACxB,IAAI1kB,EAAQykB,EAAKzkB,MACb2kB,EAAUF,EAAKE,QACf1O,EAAQ+N,GAAyBS,EAAM,IAE3C,OAAoB,gBAAoB,MAAOlB,GAAS,CACtDqB,MAAO,6BACP1mB,MAAO,QACPC,OAAQ,QACR0mB,QAAS,cACT7P,IAAK0P,EACL,kBAAmBC,GAClB1O,GAAQjW,EAAqB,gBAAoB,QAAS,CAC3DS,GAAIkkB,GACH3kB,GAAS,KAAMuL,KAAUA,GAAqB,gBAAoB,OAAQ,CAC3EuM,KAAM,UACNgN,SAAU,UACV/M,OAAQ,UACRgN,cAAe,SACfC,eAAgB,QAChB9V,EAAG,0DACA1D,KAAWA,GAAsB,gBAAoB,OAAQ,CAChEsM,KAAM,UACNgN,SAAU,UACV/M,OAAQ,UACRyB,YAAa,GACbuL,cAAe,SACfE,iBAAkB,EAClB/V,EAAG,sBAIP,IAAIgW,GAA0B,aAAiBV,I,IAChC,I,sHW9BTW,GAAW,SAACC,GAAD,OAAa,kBAC1B,UAACC,GAAA,EAAD,CAASC,UAAWF,EAASP,QAAQ,kBAG5BU,GAA8C,CACvD,IAAOC,GAAAA,EACP,QAAWL,GAASM,IACpB,QAAWN,GAASM,IACpB,QAAWN,GAASM,IACpB,QAAWC,GAAAA,EACX,QAAWC,GAAAA,EACX,QAAWC,GAAAA,EACX,MAASA,GAAAA,EACT,MAASC,GAAAA,EACT,KAAQC,GAAAA,EACR,QAAWC,GAAAA,GAGFC,GAAwD,CACjE,OAAUC,GAAAA,EACV,KAAQC,GAAAA,EACR,IAAOC,GAAAA,EACP,IAAOC,GAAAA,GCFX,GA3BuB,WACnB,IAAM1iB,EAAW4C,GAAe7C,IAC1Bsf,EAAW3c,KAMjB,OACI,iBAAKwN,UAAU,YAAf,UACI,UAACyS,GAAA,EAAD,CAAmBlP,KAAK,QACL5X,MAAOmE,EAASvG,KAChBmpB,WAAS,EACT/G,SATJ,SAACxa,EAAO5H,GAC3B4lB,EAASvf,GAAYrG,KAKjB,SAIKD,EAAWa,KAAI,SAACwoB,GACb,IAAMC,EAAOR,GAAoBO,EAAGppB,MACpC,OACI,UAACspB,GAAA,EAAD,CAA4BlnB,MAAOgnB,EAAGppB,KAAtC,UACK,UAACqpB,EAAD,KADcD,EAAGppB,c,2GCiBxCupB,GAAc,SAACppB,GACjB,IAAMqpB,GAAK9T,EAAAA,GAAAA,IAAQ,SAAArS,GAAC,OAAIA,EAAEX,QAAOvC,GACjC,OAAO4D,OAAOC,KAAKwlB,GAAI5oB,KAAI,SAAA6M,GAAC,MAAK,CAAEzN,KAAMyN,EAAGtN,OAAQqpB,EAAG/b,QAGrDgc,GAAoB,SAAC,GAAsC,IAArC7gB,EAAoC,EAApCA,SAAU/F,EAA0B,EAA1BA,MAAOgc,EAAmB,EAAnBA,KAAMP,EAAa,EAAbA,QAK/C,OAJA5W,EAAAA,EAAAA,YAAU,WACNM,SAAS0hB,KAAK5gB,MAAM6gB,SAAW9K,EAAO,QAAU,YACjD,CAACA,KAGA,UAAC+K,GAAA,GAAD,CACIC,OAAO,SACPC,WAAY,CACRhhB,MAAO,CACH9H,OxB0TgB,IwBzThB0kB,aAAa,GAAD,OxB0TI,EwB1TJ,cxB0TI,EwB1TJ,YAGpBqE,WAAY,CACR9K,aAAa,GAEjBJ,KAAMA,EACNC,QAAS,kBAAMR,GAAQ,IAZ3B,UAcI,6BACI,kBAAK7H,UAAU,oBAAf,WACI,iBAAKA,UAAU,QAAf,SAAwB5T,KACxB,iBAAK4T,UAAU,UAAf,UACI,UAACmM,GAAA,EAAD,CAAQnb,QAAS,kBAAM6W,GAAQ,IAA/B,yBAGR,iBAAK7H,UAAU,wBAAf,SACK7N,UAOfohB,GAAkB,SAAC,GAAD,IAAEphB,EAAF,EAAEA,SAAUqhB,EAAZ,EAAYA,SAAUC,EAAtB,EAAsBA,YAAtB,OACpB,UAACC,GAAA,EAAD,CACIlI,QAAQ,OACRgI,SAAUA,EACVpL,KAAkB,MAAZoL,EACNnL,QAAS,kBAAMoL,EAAY,OAC3BE,cAAe,CACXC,KAAM,WANd,SASKzhB,KAIH0hB,GAAc,SAAC,GAA8C,IAA7C1hB,EAA4C,EAA5CA,SAAU/F,EAAkC,EAAlCA,MAAOonB,EAA2B,EAA3BA,SAAUC,EAAiB,EAAjBA,YACvC1J,GAAQC,EAAAA,GAAAA,KAEd,OADkBC,EAAAA,GAAAA,GAAcF,EAAMG,YAAYC,KAAK,QAEnD,UAAC6I,GAAD,CAAmB5mB,MAAOA,EACPgc,KAAkB,MAAZoL,EACN3L,QAAS,kBAAM4L,EAAY,OAF9C,SAGKthB,KAGL,UAACohB,GAAD,CAAiBC,SAAUA,EACVC,YAAaA,EAD9B,SAEKthB,KAKP2hB,GAAkB,SAAC,GAIgD,IAJ/Cpd,EAI8C,EAJ9CA,MAAO7L,EAIuC,EAJvCA,QAAS8gB,EAI8B,EAJ9BA,SAI8B,IAJpB6D,SAAAA,OAIoB,SAJJxG,EAII,EAJJA,MACvCrd,EAG2C,EAH3CA,MAG2C,IAHpCqU,UAAAA,OAGoC,WAH1B9U,EAG0B,EACpE,EAAgCkV,EAAAA,SAAe,MAA/C,eAAOoT,EAAP,KAAiBC,EAAjB,KAIA,OACI,6BACI,WAACnI,GAAA,EAAD,CAAatL,UAAU,eAAewP,SAAUA,EAAhD,WACI,UAACjE,GAAA,EAAD,CAAYC,QAAQ,WAAWC,QAAO,gBAAW/U,GAAjD,SACKsS,KAEL,kBAAKhJ,UAAS,UAAKwP,EAAW,gBAAiB,IAAjC,OAAsCxP,EAAYA,EAAY,IAAM,GAApE,sIACThP,QAVW,SAACG,IACxBqe,GAAYiE,EAAYtiB,EAAM4iB,gBAQvB,WAEI,iBAAKH,KAAK,SAAS,gBAAc,QAC5B,gBAAc,UAAU,kBAAgB,eACxC/mB,GAAG,eACHmT,UAAU,wEAHf,SAIKrU,KAEL,UAACqoB,GAAA,EAAD,CAAmBhU,UAAU,eAC7B,UAACiU,GAAA,EAAD,CAAOpnB,GAAE,gBAAW6J,GACbsJ,UAAU,yDACVhU,KAAK,SACLL,MAAOA,EACP,cAAY,gBAI3B,UAACkoB,GAAD,CAAaznB,MAAO4c,EAAOwK,SAAUA,EAAUC,YAAaA,EAA5D,SACK5oB,EAAQiI,SAAQ,SAAC4C,EAAGd,GAAJ,OACbA,EAAI,GAAI,UAACsf,GAAA,EAAD,aAAiBxe,EAAEnM,KAAnB,aAAwC,MAChD,UAAC4qB,GAAA,EAAD,CAAU3E,UAAU,EAEVxP,UAAU,oBAFpB,SAGKtK,EAAEnM,MAHP,UACkBmM,EAAEnM,KADpB,aAFa,gBAOVmM,EAAEhM,OAAOS,KAAI,SAAAyC,GACZ,IAAMgmB,EAAOjB,GAAqB/kB,EAAEZ,OAAS2lB,GAAAA,QAC7C,OACI,WAACwC,GAAA,EAAD,CACUxoB,MAAOiB,EAAEC,GACTunB,SAAUxnB,EAAErD,OAASoC,EACrB6jB,SAAU5iB,EAAE4iB,SACZxe,QAAS,kBAAM2a,GAAS,UAAEjV,EAAQ9J,EAAEC,MAJ9C,WAKI,UAACwnB,GAAA,EAAD,WACI,UAACzB,EAAD,OAEJ,UAAC0B,GAAA,EAAD,CAAcC,QAAS3nB,EAAErD,KACXirB,UAAW5nB,EAAE6nB,gBAThB7nB,EAAEC,kBAiL7C,GA9JiB,WACb,IAiBoBnD,EAjBdoG,EAAW4C,GAAe7C,IAC1BU,EAAWmC,GAAemJ,IAC1B6Y,EAAkBxhB,GAAiB3C,GACnCokB,EAAgBjiB,GAAexD,GAC/BzB,EAAkBiF,GAAe1D,GACjC/B,EAAQyF,GAAejE,GACvBjB,EAASkF,GAAe9D,GACxBugB,EAAW3c,KAsBXoiB,EAAqB9B,GAAY6B,GACjCE,EAAkB/B,IAbJppB,EARQ,SAACA,GACzB,IAAMorB,EAAOvkB,EAAS/D,QAAQrC,KAAI,SAAAoK,GAAC,OAAIA,EAAE1H,MACzC,OAAOnD,EAAOS,KAAI,SAAAyC,GAAC,yBACZA,GADY,IAEf4iB,SAAUsF,EAAK1lB,SAASxC,EAAEC,SAiBakoB,CAAoBtnB,GAJzD,CARO,CACTZ,GAAI,OACJb,KAAM,OACNzC,KAAM,OACNkrB,YAAa,cACbxoB,MAAO,gBACP2B,OAAQ,KAEZ,gBAAiBlE,MAMfsrB,EAAc,SAACC,GACjB,OAAO9F,EAASjf,IAAYhG,EAAAA,EAAAA,GAAOoD,OAAOC,KAAK0nB,GAAW3nB,OAAOM,OAAOqnB,OAGtEC,EAAgB,SAACtgB,EAAWqgB,GAC9B,IAAME,EAAcF,EACdje,EAAI1J,OAAOC,KAAK0nB,GAAU,GAC1B9gB,EAAI7G,OAAOM,OAAOqnB,GAAU,GAClC,GAAU,SAAN9gB,EACA,OAAQS,GACJ,KAAK,EAAGugB,EAAYne,GAAiC,IAA5BzG,EAAS/D,QAAQ8G,OACtC,CAAC/C,EAAS/D,QAAQ,GAAGK,IAAM,GAAI,MACnC,KAAK,EAAGsoB,EAAYne,GAAK,CAACzG,EAAS/D,QAAQ,GAAGK,IAAK,MACnD,QAAS,MAAM,IAAInB,MAAM,6BAA+BkJ,QAG5D,OAAQA,GACJ,KAAK,EAAGugB,EAAYne,GAAiC,IAA5BzG,EAAS/D,QAAQ8G,OACtC,CAACa,EAAG5D,EAAS/D,QAAQ,GAAGK,IAAM,CAACsH,GAAI,MACvC,KAAK,EAAGghB,EAAYne,GAAK,CAACzG,EAAS/D,QAAQ,GAAGK,GAAIsH,GAAI,MACtD,QAAS,MAAM,IAAIzI,MAAM,6BAA+BkJ,GAGhE,OAAOogB,EAAYG,IAUjBC,EAAuB,SAAC,GAAD,MAAExgB,EAAF,EAAEA,EAAF,OACzB,UAACkf,GAAD,CAAiBpd,MAAK,UACLsJ,UAAU,aACVnV,QAASgqB,EACTlJ,UAAUvgB,EAAAA,EAAAA,GAAM8pB,EAAN9pB,CAAqBwJ,GAC/B4a,SAA4B,QAAlB1f,EAASvG,MAAkBqL,EAAIrE,EAAS/D,QAAQ8G,OAC1D0V,MAAM,aACNrd,OAAO,UAAA4E,EAAS/D,QAAQoI,UAAjB,eAAqBrL,OAAQ,OAInDsqB,EAAc,SAAC,GAAD,IAAEnd,EAAF,EAAEA,MAAF,OAChB,UAACod,GAAD,CAAiBpd,MAAOA,EACP7L,QAAS+pB,EACTjJ,SAAUqJ,EACVxF,UAAW1f,EAASpG,OAAOgN,GAC3BsS,MAAOlZ,EAASpG,OAAOgN,IAAhB,UAA6BA,EAAMhD,cAAnC,SACP/H,MAAO4E,EAASmG,GAAOnN,QAItC8rB,EACF,SAAC,GAAD,IAAE3e,EAAF,EAAEA,MAAO7L,EAAT,EAASA,QAAT,IAAkB2kB,SAAAA,OAAlB,aACK7D,SAAAA,OADL,MACc,SAAC2J,GAAD,OAAON,GAAY,UAAEte,EAAQ4e,EAAEhkB,OAAO3F,SADpD,SAIA,WAAC2f,GAAA,EAAD,CAAatL,UAAU,eAAewP,SAAUA,EAAhD,WACI,UAACjE,GAAA,EAAD,CAAYC,QAAQ,WAAWC,QAAO,gBAAW/U,GAAjD,SACKlD,GAAWkD,MAEhB,UAACgV,GAAA,EAAD,CAAc7e,GAAI6J,EACJsJ,UAAU,gBACV2L,SAAUA,EACVhgB,MAAO4E,EAASmG,GAAO7J,GAHrC,SAIKhC,EAAQwC,OAAOlD,KAAI,SAAA0C,GAAE,OAClB,oBAAiBlB,MAAOkB,EAAxB,SAA6BhC,EAAQqC,KAAKL,GAAItD,MAAjCsD,YAuB7B,OAAO6nB,GAAmBznB,EAAMI,OAAOiG,OAAS,IAC5C,kBAAK0M,UAAU,WAAf,WACI,UAAC,GAAD,KACA,UAACqV,EAAD,CAAa3e,MAAM,OACN7L,QAASoC,EACT0e,SAAU,SAAC2J,GACP,IAAMnhB,EAAImhB,EAAEhkB,OAAO3F,MACnBqpB,EAAY,CACR,KAAQ7gB,EACR,MAAe,OAANA,EAAa,QAAU,eAGrD,UAACkhB,EAAD,CAAa3e,MAAM,QAAQ7L,QAAS2C,EAAQgiB,UAAU,KACtD,kBAAKxP,UAAU,sBAAf,WACI,kBAAKA,UAAU,SAAf,WACI,UAACoV,EAAD,CAAsBxgB,EAAG,KACzB,UAACwgB,EAAD,CAAsBxgB,EAAG,QAG7B,iBAAKoL,UAAU,SAAf,UACI,UAACsO,GAAA,EAAD,CAAY/K,KAAK,QACLiM,SAA4B,QAAlB1f,EAASvG,MAAkBgH,EAAS/D,QAAQ8G,OAAS,EAC/DtC,QAvFL,WACnB,IAAMikB,EAAW,CACb,QAAW,CAAC1kB,EAAS/D,QAAQ,GAAGK,GAAI0D,EAAS/D,QAAQ,GAAGK,KAE5D,OAAOmoB,EAAYC,IAiFP,UAGI,UAACM,GAAA,EAAD,YAIZ,UAAC1B,EAAD,CAAand,MAAM,OACnB,UAACmd,EAAD,CAAand,MAAM,OACnB,UAACmd,EAAD,CAAand,MAAM,U,iCChK/B,GArFoB,WAChB,IAAM5G,EAAW4C,GAAe7C,IAC1BU,EAAWmC,GAAegJ,IAC1B8Z,EAAgB9iB,GAAe/D,GAC/B8mB,EAAiB/iB,GAAepC,IAChC6e,EAAW3c,KA6EjB,OA3EA4N,EAAAA,WAAgB,WACZ,IAWMsV,EAAe,SAACnhB,GAElB,QAASA,EAAElI,OAAOG,SAGhBmpB,EAAY,SAACxhB,GACf,IAAMyhB,EAAgBzhB,EAAE9H,OAAOG,QAAQrC,KAAI,SAAAoK,GAAC,OAAIJ,EAAEpH,KAAKwH,MACvD,OAAOJ,EAAEpH,KAAKwM,MAAQ,IAAMpF,EAAEpH,KAAK2C,KAAO,IAAMkmB,EAAchc,KAAK,MAGjEic,EAAgB,SAAC7c,GACnB,IAAM8c,GAAU,QAAO,IAAIC,IAAI/c,EAAGlG,SAAQ,SAAAqB,GAAC,OAAIA,EAAE9H,OAAOsZ,aAClDqQ,GAAO,QAAO,IAAID,IAAI/c,EAAGlG,SAAQ,SAAAqB,GAAC,OAAI7G,OAAOC,KAAK4G,EAAEpH,WACpDkpB,GAAgBC,EAAAA,GAAAA,GAAWF,EAASF,GACpCK,EAAS,GAYf,OAXAnd,EAAGjB,SAAQ,SAAA5D,GACP2hB,EAAW/d,SAAQ,SAAA4N,GACf,IAAMyQ,EAAejiB,EAAEpH,KAAK4Y,GACR,MAAhByQ,IACAD,EAAOxQ,GAAWyQ,SAI9BH,EAAcle,SAAQ,SAAAuK,GAClB6T,EAAO7T,GAAOtJ,EAAG,GAAGjM,KAAKuV,MAEtB6T,GAULE,EAAkB,SAAChd,GACrB,IACMid,EATY,SAACjd,GACnB,IAAML,EAA4BK,EAAGvG,SACjC,SAAAyB,GAAC,OAAIA,EAAExH,KAAK5C,KAAI,SAAAmR,GAAC,MAAK,CAACvO,KAAMuO,EAAGjP,OAAQkI,EAAElI,cAE9C,OADwCiB,OAAOM,QAAOqR,EAAAA,GAAAA,GAAQ0W,EAAW3c,IAC3D7O,IAAI0rB,GAKAU,CADKld,EAAGlK,OAAOumB,IAE3Bc,EAAYnd,EAAGlK,QAAO,SAAAoF,GAAC,OAAKmhB,EAAanhB,MAAIpK,KAAI,SAAAoK,GAAC,OAAIA,EAAExH,QACxDA,GAAI,QAAKa,OAAQ0oB,GjB3GE,SAACG,GAElC,IADA,IAAMC,EAAa,GACX9hB,EAAI,EAAGA,EAAI6hB,EAAInjB,OAAQsB,IAC3B,IAAI,IAAM+hB,KAAYF,EAAI7hB,GACtB8hB,EAAW,GAAD,OAAIC,IAAcF,EAAI7hB,GAAG+hB,GAG3C,OAAOD,EiBoGsCE,CAAsBJ,IAC3DrH,EAAShhB,EAAQpB,KAkBjB0oB,GACAtG,GAPO,SAACA,EAAU0H,GATD,IAACxd,EAUd8V,EAAS5gB,KAVK8K,EAvDC,WACnB,IAzBR/M,EACAC,EAwBcmc,EAbG,SAAC8M,EAAe9M,GACjC,OAAO8M,EAAcnoB,OAAO8B,QAAO,SAAAoF,GAAC,OAAImU,EAAStZ,SAASmF,MAYjCuiB,CAAatB,EAAejlB,EAAS/D,SAC/C7C,EAAW4G,EAAX5G,EAAGC,EAAQ2G,EAAR3G,EAAGC,EAAK0G,EAAL1G,EACb,MAAM,GAAN,gBACO,CAACF,EAAGC,EAAGC,GAAGM,KAAI,SAAAyC,GAAC,OAhDD,SAC7BN,EACAC,EACAoZ,EACAnZ,EACAsD,GAEA,IAAMyE,EAAuB,IAAnB/H,EAAQ8G,QAA6B,QAAbxD,EAAqB,MAAQtD,EAAQoN,KAAK,KAC5E,MAAO,CACHwE,IAAI,SAAD,OAAW9R,EAAX,YAAmBC,EAAnB,YAA4BoZ,EAA5B,YAAuCpR,EAAvC,SACHlI,OAAQ,CACJC,KAAAA,EACAC,MAAAA,EACAC,QAAAA,EACAmZ,QAAAA,IAmCQoR,CACIxmB,EAASjE,KAAMiE,EAAShE,MAAOK,EAAG8b,EAAU5Y,EAASvG,UAHjE,EA3BR+C,EA+BiCiE,EAASjE,KA9B1CC,EA8BgDgE,EAAShE,MA5BlD,CACH6R,IAAI,eAAD,OAAiB9R,EAAjB,SACHD,OAAQ,CACJC,KAAAA,EACAC,MAAAA,OAmFiByqB,GAVjBC,QAAQtX,IAAItG,EAAGlP,KAAI,SAAAoK,GAAC,OAAI2iB,KAAAA,IzBhJhC,oDyBgJqD3iB,EAAE6J,SAAOyO,MAAK,SAACsK,GACxD,IAAMC,EAAMD,EAAUhtB,KAAI,SAACsL,EAAGb,GAAJ,MACrB,CAAC7H,KAAM0I,EAAE1I,KAAMV,OAAQgN,EAAGzE,GAAGvI,WAClCgqB,EAAgBe,WAazB,CAACjI,EAAUrf,EAAUS,EAAUklB,IAE3B,M,WC5JLpX,GAAcgZ,EAAQ,MAoE5B,GAlEY,WACR,IAAM9mB,EAAWmC,GAAegJ,IAC1B4b,EAAa5kB,GAAejD,IAC5B8nB,EAAiB7kB,GAAe7C,IAChCsf,EAAW3c,KACVyV,GAAUC,EAAAA,EAAAA,MAAVD,OAIDuP,EAAY,WACd,OAAO,SAACrI,EAAU0H,GACd,IAAMzoB,EAAQyoB,IACRtmB,EAAWsL,GAAoBzN,GAC/BkpB,EAAa7nB,GAAWrB,GACxBmpB,EAAiB1nB,GAAezB,GACtC,GAAIA,EAAMmC,SAASP,OAAQ,CACvB,IAAMynB,GAAS,gBACXhrB,KAAM8qB,EAAehuB,OAClBY,EAAAA,EAAAA,IAAI,SAAAyC,GAAC,OAAIA,EAAIA,EAAEC,GAAK,OAAM0D,IAFlB,IAGX/D,QAAS+D,EAAS/D,QAAQrC,KAAI,SAAAoK,GAAC,OAAIA,EAAE1H,MACrC6C,KAAM4nB,IAEJjrB,GAAS8C,EAAAA,GAAAA,IAAO,SAAA/E,GAAC,QAAMA,IAAGqtB,GAC1BC,EAAOrZ,GAAYsZ,UAAUtrB,EAAQ,CAACiS,YAAa,YACrDoZ,IAASzP,GACTb,GAAcsQ,MAsC9B,OAZAtX,EAAAA,WAAgB,WACZ+O,GAPO,SAACA,EAAU0H,GACd1H,EAASqI,KACTrI,EAAS9e,WAMd,IAEH+P,EAAAA,WAAgB,YAtBM,WAClB,MACI/B,GAAYuZ,MAAM3P,EAAQ,CAAC3J,YAAa,YADpC3U,EAAR,EAAQA,EAAGC,EAAX,EAAWA,EAAGC,EAAd,EAAcA,EAAGyC,EAAjB,EAAiBA,KAAMC,EAAvB,EAAuBA,MAAOC,EAA9B,EAA8BA,QAASC,EAAvC,EAAuCA,KAAMiD,EAA7C,EAA6CA,KAEvCmoB,GAAkB1oB,EAAAA,GAAAA,IAAO,SAAAgF,GAAC,QAAMA,IAAG,CAACxK,EAAAA,EAAGC,EAAAA,EAAGC,EAAAA,EAAGyC,KAAAA,EAAMC,MAAAA,EAAOC,QAAAA,IAChE2iB,EAASjf,GAAY2nB,IACfprB,GACF0iB,EAASvf,GAAYnD,IACnBiD,GACFyf,EAAS7f,EAAQwoB,SAASpoB,KAe9BqoB,KACD,CAAC9P,IAEJ7H,EAAAA,WAAgB,WACZ+O,EAASqI,OACV,CAACrI,EAAU5e,EAAU+mB,EAAYC,IAE7B,M,WCvDLS,GAAa,KAEbC,GAAe,SAAC,GAAsC,IAArCC,EAAoC,EAApCA,UAAWC,EAAyB,EAAzBA,QAAyB,IAAhBnP,MAAAA,OAAgB,MAAV,KAAU,EACvD,OACI,iCACI,iBAAKhJ,UAAU,QACV3N,MAAO,CACH+lB,gBAAgB,6BAAD,OAA+BF,EAAYF,GAA3C,aAA0DG,EAAUH,GAApE,MAFxB,SAIKhP,OAMXqP,GAAgB,SAAC,GAAD,IAAEtU,EAAF,EAAEA,MAAOuU,EAAT,EAASA,IAAT,OAClB,kBAAKtY,UAAU,eAAf,WACI,iBAAKA,UAAU,QAAQ3N,MAAO,CAAEP,IAAK,EAAGF,KAAM,GAA9C,SAAoDmS,KACpD,iBAAK/D,UAAU,QAAQ3N,MAAO,CAAEP,IAAK,EAAGgI,MAAO,GAA/C,SAAqDwe,QAIvDC,GAAgB,SAAC,GAA0C,IAAzCpf,EAAwC,EAAxCA,aACpB,OACI,kBAAK6G,UAAU,UAAf,WACI,UAACqY,GAAD,CAAetU,MAAO5K,EAAab,OAAOE,KAAK,GAChC8f,IAAKnf,EAAab,OAAOE,KAAK,MAC7C,UAACyf,GAAD,CAAcC,UAAW/e,EAAaT,OAAOC,YAAY,GAAG,GAC9Cwf,QAAShf,EAAaT,OAAOC,YAAY,GAAG,SAMhE6f,GAAgB,SAAC,GAA0C,IAAzCrf,EAAwC,EAAxCA,aAQpB,OACI,iBAAK6G,UAAU,UAAf,SACK7G,EAAaT,OAAOC,YAAYxO,KAAI,SAAC4hB,EAAKtW,GAAN,OACjC,iBACKuK,UAAU,QACV3N,MAAO,CAAEwc,gBAAiB9C,EAAI,GAAKiM,IAFxC,SAGK7e,EAAab,OAAOC,KAAK9C,IAHpB,OAASA,SAU7BgjB,GAAyB,SAAC,GAAD,IAAEtf,EAAF,EAAEA,aAAF,OAC3B,kBAAK6G,UAAU,UAAf,WACI,UAACqY,GAAD,CAAetU,MAAO5K,EAAab,OAAOE,KAAK,GAChC8f,IAAKnf,EAAab,OAAOE,KAAK,KAC5CW,EAAaT,OAAOC,YAAYxO,KAAI,SAACuuB,EAAUjjB,GAAX,OACjC,UAACwiB,GAAD,CACcC,UAAWQ,EAAS,GACpBP,QAASO,EAAS,GAClB1P,MAAO7P,EAAab,OAAOC,KAAK9C,IAH3B,OAASA,UASlCkjB,GAAyB,SAAC,GAAD,IAAExf,EAAF,EAAEA,aAAF,OAC3B,mBAAO6G,UAAU,eAAe4Y,YAAa,EAAGC,YAAa,EAA7D,UACI,+BACI,4BACI,mBACC1f,EAAab,OAAOE,KAAKrO,KAAI,SAAC2uB,EAAKvkB,GAAN,OAC1B,gBAA4ByL,UAAU,aAAtC,SACK8Y,GADI,cAAgBvkB,SAKhC4E,EAAaT,OAAOC,YAAYxO,KAAI,SAACuuB,EAAUjjB,GAAX,OACjC,4BACI,gBAAIuK,UAAU,aAAd,SACK7G,EAAab,OAAOC,KAAK9C,KAE7BijB,EAASvuB,KAAI,SAAC4uB,EAAWxkB,GAAZ,OACV,UAAC4M,GAAA,EAAD,CAAS6X,sBAAoB,EAEpB5sB,MACI+M,EAAaV,UAAUF,KAAK9C,GAAK,KACjC0D,EAAaV,UAAUD,KAAKjE,GAJzC,UAKI,gBAAIyL,UAAU,OACV3N,MAAO,CACHwc,gBAAiBkK,EAAYf,OAPzC,eACsBzjB,EADtB,YAC2BkB,SAN1B,OAASA,YAsB5BwjB,GAAyB,SAAC,GAA0C,IAAzC9f,EAAwC,EAAxCA,aACvBE,EAAKF,EAAaT,OAAOC,YACzBugB,EAAK/f,EAAab,OACxB,OACI,kBAAM0H,UAAU,UAAhB,WACI,iBAAKA,UAAU,QACV3N,MAAO,CACH+lB,gBAAgB,6BAAD,OAA+B/e,EAAG,GAAG,GAAK2e,GAA1C,aAAyD3e,EAAG,GAAG,GAAK2e,GAApE,SAIxB,iBAAKhY,UAAU,QACV3N,MAAO,CACH+lB,gBAAgB,6BAAD,OAA+B/e,EAAG,GAAG,GAAK2e,GAA1C,aAAyD3e,EAAG,GAAG,GAAK2e,IACnFmB,WAAY,yEACZC,KAAM,6EAIf,kBAAKpZ,UAAU,QAAQ3N,MAAO,CAAEP,IAAK,EAAGF,KAAM,IAA9C,cAAqDsnB,EAAG1gB,KAAK,OAC7D,kBAAKwH,UAAU,QAAQ3N,MAAO,CAAEP,IAAK,EAAGgI,MAAO,IAA/C,cAAsDof,EAAG1gB,KAAK,OAC9D,kBAAKwH,UAAU,QAAQ3N,MAAO,CAAEP,IAAK,GAAIF,KAAM,GAA/C,cAAsDsnB,EAAG3gB,KAAK,OAC9D,kBAAKyH,UAAU,QAAQ3N,MAAO,CAAEgnB,OAAQ,GAAIznB,KAAM,GAAlD,cAAyDsnB,EAAG3gB,KAAK,UAsC7E,GAfe,WACX,IAAMY,EAAezG,GAAeqJ,IAC9B2M,EAAWhW,GAAeyK,IAC1B+V,EAAWxgB,GAAewL,IAC1Bob,EAtBiB,SAAC5Q,GACxB,IAAM6Q,EAAQ7Q,EAASve,KAAI,SAAAoK,GAAC,OAAIA,EAAEvI,QAClC,OAAQ0c,EAASpV,QACb,KAAK,EACD,OAAO,KACX,KAAK,EACD,MAAoB,YAAbimB,EAAM,GAAmBf,GAAgBD,GACpD,KAAK,EACD,MAAiB,YAAbgB,EAAM,GACc,YAAbA,EAAM,GAAmBZ,GAAyBF,GAErC,YAAbc,EAAM,GAAmBN,GAAyBR,GAEjE,QACI,MAAM,IAAI/sB,MAAJ,cAAiBgd,EAASpV,OAA1B,6BAQUkmB,CAAmB9Q,GAC3C,OAAKwK,GAAgC,IAApBxK,EAASpV,QAItB,iBAAK0M,UAAS,iBAAYkT,EAASzY,QAAnC,UACI,UAAC6e,EAAD,CAAiBngB,aAAcA,EAAcuP,SAAUA,MAJpD,M,qKCvJT+Q,GAAe,SAAC,GAAiC,IAAhCpL,EAA+B,EAA/BA,KAAMqL,EAAyB,EAAzBA,KAAyB,IAAnBvnB,SAAAA,OAAmB,MAAV,KAAU,EAClD,EAAwBiO,EAAAA,UAAe,GAAvC,eAAOgI,EAAP,KAAaP,EAAb,KACA,OACI,mCACI,WAAC8R,GAAA,EAAD,CAAgB3oB,QAAS,kBAAM6W,GAASO,IAAxC,WACI,UAACiM,GAAA,EAAD,CAAcrU,UAAU,iBAAxB,SAA0C0Z,KAC1C,UAACpF,GAAA,EAAD,CAAcC,QAASlG,IACtBlc,IAAaiW,GAAO,UAACwR,GAAA,EAAD,KAAiB,UAACC,GAAA,EAAD,QAEzC1nB,IACG,UAAC2nB,GAAA,EAAD,CAAUC,GAAI3R,EAAM4R,QAAQ,OAAOC,eAAa,EAACja,UAAU,cAA3D,SACK7N,QAyHrB,GAlHY,SAAC,GAA4C,IAA3CqY,EAA0C,EAA1CA,SAAU0P,EAAgC,EAAhCA,YAAgC,IAAnB/nB,SAAAA,OAAmB,MAAV,KAAU,EAC9CgoB,EAAcznB,GAAeyL,IACnC,EAAkCiC,EAAAA,UAAe,GAAjD,eAAOga,EAAP,KAAkBC,EAAlB,KACA,EAAoCja,EAAAA,UAAe,GAAnD,eAAOka,EAAP,KAAmBC,EAAnB,KACMC,GACF,kBAAKxa,UAAU,YAAf,WACI,UAACkU,GAAA,EAAD,KACA,WAACuG,GAAA,EAAD,YACI,eAAGzN,KAAK,IAAR,UACI,UAACyM,GAAD,CAAcpL,KAAK,eAAeqL,MAAM,UAACgB,GAAA,EAAD,SAG5C,UAACjB,GAAD,CAAcpL,KAAK,UAAUqL,MAAM,UAAC,KAAD,IAAnC,UACI,UAACe,GAAA,EAAD,UACMN,EAAYhwB,KAAI,SAACC,GAAD,OACd,UAAC,KAAD,CAAM+X,GAAI,IAAM/X,EAAEgU,IAAlB,UACI,UAACub,GAAA,EAAD,WACI,UAACrF,GAAA,EAAD,UAAelqB,EAAEgC,WAFGhC,EAAEgC,kBAS9C,UAAC8nB,GAAA,EAAD,OAGR,OACI,mCACI,6BACI,UAACyG,GAAA,EAAD,CAAQC,MAAI,EAAZ,UACI,UAACzH,GAAA,GAAD,CACI3H,QAAQ,YACRpD,KAAMkS,EACNjS,QAAS,kBAAMkS,GAAc,IAC7BjH,WAAY,CACR9K,aAAa,GALrB,SAQKgS,OAGT,UAACG,GAAA,EAAD,CAAQE,QAAM,EAAd,UACI,UAAC1H,GAAA,GAAD,CACI3H,QAAQ,YACRpD,MAAI,EAFR,SAIKoS,UAIb,UAACM,GAAA,EAAD,CAAQ9a,UAAU,UACVkT,SAAS,SACT6H,UAAWvQ,EAAS7e,MAAQ,EAAI,EAFxC,UAGI,WAACqvB,GAAA,EAAD,CAASxP,QAAQ,QAAjB,WACI,UAAC8C,GAAA,EAAD,CAAY2M,KAAK,QACL5L,GAAI,CACA6L,YAAa,QACbhN,QAAS,CAAErb,GAAI,cAAesoB,GAAI,SAEtCnqB,QAAS,kBAAMupB,GAAeD,IAC9BriB,MAAM,UACN,aAAW,OAPvB,UAQI,UAAC,KAAD,OAEJ,UAACmjB,GAAA,EAAD,CACIvuB,GAAG,aACH2e,QAAQ,KACR6D,GAAI,CACAnB,QAAS,CAAC,OAAQ,UAJ1B,UAOI,WAAC,KAAD,CAAM/L,GAAG,IAAI9P,MAAO,CAChB4F,MAAO,UACPojB,eAAgB,QAFpB,4BAIkB,2BAAK,6BAAO,8CAGlC,UAACD,GAAA,EAAD,CACIvuB,GAAG,aACH2e,QAAQ,KACR6D,GAAI,CACAnB,QAAS,CAAC,QAAS,SAJ3B,UAOI,WAAC,KAAD,CAAM/L,GAAG,IAAI9P,MAAO,CAChB4F,MAAO,UACPojB,eAAgB,QAFpB,eAIK,2BAAK,6BAAO,wCAGrB,iBAAKrb,UAAU,SACd7N,GACD,UAACmc,GAAA,EAAD,CAAYtO,UAAU,WACVhP,QAAS,kBAAMqpB,GAAa,IAC5BpiB,MAAM,UAFlB,UAGI,UAACqjB,GAAA,EAAD,OAEJ,UAAChN,GAAA,EAAD,CAAY2M,KAAK,MACLjb,UAAU,WACVhP,QAASwZ,EAAS+Q,OAClBtjB,MAAM,UAHlB,SAIKuS,EAAS7e,OAAQ,UAAC6vB,GAAA,EAAD,KAAoB,UAACC,GAAA,EAAD,MAEzCrB,IAAa,UAACF,EAAD,CAAatS,OAAQwS,EAAWvS,QAASwS,aCvE3E,IACA,GAAe,IAA0B,0DChCzCqB,EAAAA,GAAAA,IAAiBC,GACjBtE,EAAQ,MAER,IAAMuE,GAAc,SAAC,GAAD,IAAEtxB,EAAF,EAAEA,MAAOC,EAAT,EAASA,OAAT,OAChB,iBAAKyV,UAAU,eAAe3N,MAAO,CAAC/H,MAAAA,EAAOC,OAAAA,GAA7C,UACI,UAACsxB,GAAA,EAAD,CAAkBrQ,QAAQ,gBACRjI,KAAM3N,KAAKyE,IAAIzE,KAAKI,MAAM1L,EAAQ,GAAI,SAI1DwxB,GAAW,SAAC,GAGyB,IAHxBhsB,EAGuB,EAHvBA,SACGisB,EAEoB,EAFpBA,WAEoB,IAFRpT,WAAAA,OAEQ,MAFG,KAEH,MAFSC,WAAAA,OAET,MAFoB,KAEpB,MADpB1I,mBAAAA,OACoB,SADQD,EACR,EADQA,UACzBrW,GAAiB,EAApBD,EAAoB,EAAjBC,GAAGoyB,EAAc,EAAdA,SAClBC,EAAe,SAAC,GAAqB,IAApB3xB,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,OAGpB8X,EAAQ,CACVtV,KAHS2F,GAAeiL,IAIxB5C,cAHkBrI,GAAeqL,IAIjCkC,UAAAA,EACAC,mBAAAA,EACA5V,MAAAA,EACAC,OAAAA,GAEJ,OAAQuF,EAASvG,MACb,IAAK,SAAU,OAAO,UAAC,IAAD,UAAgB8Y,IACtC,IAAK,OAAQ,OAAO,UAAC,IAAD,UAAcA,IAClC,IAAK,MAAO,OAAO,UAAC,IAAD,UAAaA,IAChC,QAAS,OAAO,UAAC,IAAD,kBAAaA,GAAb,IAAoB6Z,SAAUtyB,OAGhDuyB,GAAWzpB,GAAe6L,IAChC,OACI,UAAC6d,GAAA,EAAD,CAAYC,aAAc,GAAIrc,UAAU,KAAxC,SACK,YAAwB,IAArB1V,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,OACP,OAAQD,EAAQC,EAAU,IACtB,kBAAKyV,UAAU,OAAO3N,MAAO,CAAC/H,MAAAA,EAAOC,OAAAA,GAArC,UACK4xB,GACD,UAACP,GAAD,CAAatxB,MAAOA,EAAOC,OAAQA,KACnC,UAAC0xB,EAAD,CAAc3xB,MAAOA,EAAOC,OAAQA,IACnCwxB,IAAejsB,EAAS9F,iBACrB,mCACI,iBAAKgW,UAAU,SAAf,SACK2I,GAAcqT,KAEnB,iBAAKhc,UAAU,SAAS3N,MAAO,CAAC/H,MAAOC,GAAvC,SACKqe,OAIM,QAAlB9Y,EAASvG,OAAkB,UAAC,GAAD,WAc9C+yB,GAAgB,SAAC,GAAwD,IAAD,EAAtD9R,EAAsD,EAAtDA,SAAU1a,EAA4C,EAA5CA,SAAUS,EAAkC,EAAlCA,SACxC,EAAkC6P,EAAAA,SAAe,MAAjD,eAAOH,EAAP,KAAkBsc,EAAlB,KAWM5T,EAToB,WACtB,OAAQ7Y,EAAStG,kBACb,KAAKJ,EAAgBK,IAAK,OAAO8G,EAAS5G,EAAEJ,KAC5C,KAAKH,EAAgBW,QAAS,OAAOwG,EAAS/D,QAAQrC,KAAI,SAAAoK,GAAC,OAAIA,EAAEhL,QAAMqQ,KAAK,KAC5E,KAAKxQ,EAAgBU,KAAM,MAAO,OAClC,QAAS,OAAO,MAIL0yB,GACb5T,EAAU,UAAGrY,EAAS3G,SAAZ,aAAG,EAAYL,KAEzBkzB,EAAe,WACjB,MAAoCrc,EAAAA,UAAe,GAAnD,eAAOsc,EAAP,KAAmBC,EAAnB,KACA,OACI,mCACI,UAAC,GAAD,CAAKnS,SAAUA,EAAU0P,YACrB,gBAAEtS,EAAF,EAAEA,OAAQC,EAAV,EAAUA,QAAV,OAAuB,UAAC2G,GAAD,CACnB9F,SAAUnY,EAAS/D,QACnBmc,WAAYA,EACZC,WAAYA,EACZhB,OAAQA,EACRC,QAASA,KANjB,UAQI,UAACyG,GAAA,EAAD,CAAYtO,UAAU,WACVhP,QAAS,kBAAM2rB,GAAc,IAC7B1kB,MAAM,UAFlB,UAGI,UAAC2kB,GAAA,EAAD,QAGPF,IAAc,UAACnP,GAAD,CACb3F,OAAQ8U,EACR7U,QAAS8U,EACT3T,MAAO/I,EACPgJ,SAAUsT,EACV7T,SAAUnY,EAAS/D,QACnBmc,WAAYA,EACZC,WAAYA,EACZM,gBAAiBpZ,EAAS9F,eAC1B+e,eAAgByB,EAAS7e,MACzBc,MAAM,UAACowB,EAAD,CAAMd,YAAY,EACZ7b,oBAAoB,EACpBD,UAAWA,UAK/B4c,EAAO,SAAC,GAAgE,IAA/Dd,EAA8D,EAA9DA,WAA8D,IAAlD9b,UAAAA,OAAkD,MAAtC,KAAsC,MAAhCC,mBAAAA,OAAgC,SACzE,OACI,UAAC4b,GAAD,CAAUhsB,SAAUA,EACVisB,WAAYA,EACZ7b,mBAAoBA,EACpBD,UAAWA,EACXtW,EAAG4G,EAAS5G,EACZC,EAAG2G,EAAS3G,EACZ+e,WAAYA,EACZC,WAAYA,EACZoT,SAAUzrB,EAAShE,MAAMhD,QAO3C,OACI,mCACI,UAACkzB,EAAD,KACA,kBAAK5vB,GAAG,YAAR,WACI,8BACI,iBAAKmT,UAAU,YAAf,UACI,UAAC8c,GAAA,EAAD,CAAM9c,UAAU,UAAhB,UACI,iBAAKnT,GAAG,uBAAR,UACI,UAACgwB,EAAD,CAAMd,YAAY,WAI9B,kBAAK/b,UAAU,WAAf,WACI,UAACsO,GAAA,EAAD,CAAYtO,UAAU,OAAOwP,SAA4B,SAAlB1f,EAASvG,KAAhD,UACI,UAAC,KAAD,OAEJ,UAAC,GAAD,WAGR,6BACI,UAAC,GAAD,aAOdwzB,GAAY,SAAC,GAAgB,IAAfvS,EAAc,EAAdA,SACV1a,EAAW4C,GAAe7C,IAC1BU,EAAWmC,GAAemJ,IAC1B6Y,EAAkBxhB,GAAiB3C,GACzC,OACI,kCAEQmkB,GAAmB5kB,IACnB,UAACwsB,GAAD,CAAe9R,SAAUA,EACV1a,SAAUA,EACVS,SAAUA,KAE7B,UAAC,GAAD,KACA,UAAC,GAAD,QAKNysB,GAAe,SAAC,GAAD,IAAE7a,EAAF,EAAEA,GAAF,IAAM9P,MAAAA,OAAN,MAAY,GAAZ,EAAgBF,EAAhB,EAAgBA,SAAhB,OACjB,eAAG6a,KAAM7K,EACH7Q,OAAO,SACP2rB,IAAI,aACJjd,UAAU,WACV3N,MAAOA,EAJb,SAMKF,KAIH+qB,GAAiB,SAAC,GAAD,IAAEC,EAAF,EAAEA,KAAF,OACnB,eAAGnQ,KAAM,gBAAkBmQ,EAAMnd,UAAU,aAAa1O,OAAO,aAA/D,UACI,iBAAK6b,IAAK,gBAAkBgQ,EAAM7yB,MAAM,OAAO4iB,IAAI,kBAIrDkQ,GAAW,SAAC,GAAD,IAAE5S,EAAF,EAAEA,SAAU2P,EAAZ,EAAYA,YAAZ,OACb,mCACI,UAAC,GAAD,CAAK3P,SAAUA,EAAU0P,YAAa1M,MACtC,kBAAK3gB,GAAG,OAAR,WACI,4BACI,WAACiwB,GAAA,EAAD,CAAM9c,UAAU,UAAhB,WACI,iBAAKA,UAAU,OAAOmN,IAAKkQ,GAAUnQ,IAAI,wBACzC,wDAA6B,yCAC7B,+DAGA,eAAG7a,MAAO,CAACirB,UAAW,SAAU7b,OAAQ,WAAxC,UACI,UAAC,KAAD,CAAMU,GAAG,OAAOnC,UAAU,MAA1B,UACI,UAACmM,GAAA,EAAD,CAAQX,QAAQ,YAAhB,uCAGR,2DACA,mBAAO3e,GAAG,gBAAV,UACI,+BACA,4BACI,mCACA,4CAEFstB,EAAYhwB,KAAI,SAACC,GAAD,OACd,4BACI,0BACI,UAAC4yB,GAAD,CAAc7a,GAAI/X,EAAEkC,KAAKc,KACnBiF,MAAO,CAACkrB,WAAY,UAD1B,SAEKnzB,EAAEkC,KAAK/C,UAGhB,0BACI,UAAC,KAAD,CAAM4Y,GAAI,IAAM/X,EAAEgU,IAAlB,SAAwBhU,EAAEgC,YARzBhC,EAAEgC,qBAgB3B,+BACI,UAAC8wB,GAAD,CAAgBC,KAAK,qBACrB,UAACD,GAAD,CAAgBC,KAAK,qBACrB,UAACD,GAAD,CAAgBC,KAAK,qBACrB,UAACD,GAAD,CAAgBC,KAAK,8BAM/BzC,GAAO,SAAC,GAAgB,IAAflQ,EAAc,EAAdA,SACL2P,EAAcznB,GAAeyL,IACnC,OAAO,UAACif,GAAD,CAAU5S,SAAUA,EAAU2P,YAAaA,KAGhDqD,GAAQ,SAAC,GAAD,IAAEhT,EAAF,EAAEA,SAAF,OACV,mCACI,UAAC,GAAD,CAAKA,SAAUA,EAAU0P,YAAa1M,MACtC,iBAAK3gB,GAAG,QAAR,4BAuDR,GAjDqB,WACjB,IAAM4wB,GAAkBxT,EAAAA,GAAAA,GAAc,gCAChCO,GAAWC,EAAAA,EAAAA,GAAYgT,GACvB1T,EAAQ3J,EAAAA,SACV,kBACIsd,EAAAA,GAAAA,GAAY,CACRC,QAAS,CACLC,KAAMpT,EAAS7e,MAAQ,OAAS,QAChC4oB,QAAS,CACLsJ,KAAMrT,EAAS7e,MAAQ,UAAY,YAG3Cue,YAAa,CACTtc,OAAQ,CACJiF,GAAI,EACJirB,GAAI,IACJC,GAAI,IACJC,GAAI,IACJ7C,GAAI,WAIpB,CAAC3Q,IAEL,OACI,UAAC,KAAD,CAAUha,MAAOA,GAAjB,UACI,WAACytB,GAAA,EAAD,CAAelU,MAAOA,EAAtB,WACI,UAACmU,GAAA,GAAD,KACA,UAAC9O,GAAA,EAAD,CAAKC,GAAI,CACL8O,UAAW,aACX7zB,MAAO,OACPC,OAAQ,OACR2jB,QAAS,OACTkQ,cAAe,SACfC,YAAa,CAAExrB,GAAI,EAAGsoB,GAAI,UAN9B,UAQI,UAAC,KAAD,WACI,WAAC,KAAD,YACI,UAAC,KAAD,CAAOhW,KAAK,GAAGmZ,SAAS,UAAC,GAAD,CAAM9T,SAAUA,OACxC,UAAC,KAAD,CAAOrF,KAAK,QAAQmZ,SAAS,UAACd,GAAD,CAAOhT,SAAUA,OAC9C,UAAC,KAAD,CAAOrF,KAAK,OAAOmZ,SAAS,UAAC,GAAD,CAAW9T,SAAUA","sources":["dashboard/config.tsx","features/data/dataSlice.ts","features/year/yearSlice.ts","features/plotType/plotTypeSlice.ts","features/controls/controlsSlice.ts","app/store.ts","hooks/useTouchOutside.ts","dashboard/CustomTooltipWithBounds.tsx","dashboard/utils/misc.ts","app/hooks.ts","dashboard/utils/colors.ts","dashboard/icons/Compare.svg","dashboard/utils/domain.ts","dashboard/selectors.ts","hooks/useSelect.tsx","dashboard/BubblePlot.tsx","dashboard/MapPlot.tsx","dashboard/LinePlot.tsx","dashboard/BarPlot.tsx","dashboard/utils/url.ts","dashboard/sharing.tsx","features/year/YearSlider.tsx","dashboard/icons.tsx","features/plotType/PlotTypeSelect.tsx","features/controls/Controls.tsx","features/data/DataManager.tsx","dashboard/Url.tsx","dashboard/Legend.tsx","dashboard/Nav.tsx","dashboard/icons/logo.svg","dashboard/Dashboard.tsx"],"sourcesContent":["import {zipObj, indexBy, prop, curry} from \"ramda\";\n\nexport const DATA_DIR = process.env.REACT_APP_ENV === 'production' ?\n    'https://storage.googleapis.com/statistipedia/data' : 'data';\n\nexport enum AxisLabelSource {\n    VAR,\n    COMPARE,\n    YEAR\n}\n\nexport type PlotType = {\n    name: string,\n    xAxisLabelSource?: AxisLabelSource,\n    hideAxisLabels?: boolean,\n    fields: {\n        x?: string,\n        y?: string,\n        z?: string\n    }\n};\n\nexport const PLOT_TYPES: PlotType[] = [{\n    name: 'bubble',\n    xAxisLabelSource: AxisLabelSource.VAR,\n    fields: {\n        x: 'X-Axis',\n        y: 'Y-Axis',\n        z: 'Size'\n    }\n}, {\n    name: 'line',  // aka. time series chart\n    xAxisLabelSource: AxisLabelSource.YEAR,\n    fields: {\n        // X-Axis is always time. Existing selection is kept, only disabled\n        y: 'Y-Axis'\n    }\n}, {\n    name: 'bar',\n    xAxisLabelSource: AxisLabelSource.COMPARE,\n    fields: {\n        // compare: 'Compare by',  // Secondary grouping nested under \"Compare by\"\n        y: 'Y-Axis'\n    }\n}, {\n    name: 'map',\n    hideAxisLabels: true,\n    fields: {\n        y: 'Color'\n    }\n}];\n\nexport const PLOT_TYPES_MAP: {[k: string]: PlotType} =\n    zipObj(PLOT_TYPES.map(p => p.name), PLOT_TYPES);\n\nexport type FeatureRanges = {\n    x: [number, number],\n    y: [number, number],\n    z: [number, number],\n    year: [number, number]\n};\n\nexport type ShareSize = {\n  name: string,\n  width: number,\n  height: number\n};\n\nexport const SHARE_SIZES: ShareSize[] = [{\n    name: 'Instagram Square',\n    width: 1080,\n    height: 1080\n}, {\n    name: 'Twitter',\n    width: 1024,\n    height: 512\n}, {\n    name: 'Pinterest',\n    width: 800,\n    height: 1200\n}, {\n    name: 'Tumblr',\n    width: 1280,\n    height: 1920\n}];\n\nexport const SHARE_SIZE_MAP: {[k: string]: ShareSize} =\n    zipObj(SHARE_SIZES.map(p => p.name), SHARE_SIZES);\n\nexport type Area = {\n    id: string\n    abbrev: string\n    name: string\n    geoid: string\n    link: string\n}\n\nexport interface IDashboardProps {\n    area?: string;\n    compare?: string[]\n}\n\nconst FIELD_TYPES = [\n    'geo',\n    'numeric',\n    'percent',\n    'dollars',\n    'minutes',\n    'hours',\n    'nominal',\n    'ordinal'\n];\n\nconst formatNum = (minDigits: number, maxDigits: number, num: number) : string => {\n    const options = {maximumFractionDigits: maxDigits, minimumFractionDigits: minDigits};\n    return Number(num).toLocaleString(undefined, options);\n};\n\nconst justAddCommas = curry(formatNum)(undefined, undefined);\nconst removeDecimals = curry(formatNum)(undefined, 0);\nconst oneDecimalPlace = curry(formatNum)(undefined, 1);\nconst twoDecimalPlaces = curry(formatNum)(undefined, 2);\nconst dollarsAndCents = curry(formatNum)(2, 2);\n\nexport const FIELD_TYPE_FORMAT_VALUES_MAP: {[name: string]: (value: any) => string} = {\n    'geo': _ => { throw new Error('Should not be asked to format value') },\n    'numeric': justAddCommas,\n    'percent': (value) => oneDecimalPlace(value) + '%',\n    'dollars': (value) => '$' + (value >= 100 ? removeDecimals(value) : dollarsAndCents(value)),\n    'minutes': (value) => removeDecimals(value) + ' minutes',\n    'hours': (value) => removeDecimals(value) + ' hours',\n    'years': (value) => removeDecimals(value) + ' years',\n};\n\nexport type FieldType = {\n    name: string\n    formatValue: (value: any) => string\n}\n\nexport type DataField = {\n    id: string,\n    name: string,\n    description: string,\n    group: string\n    type: string\n};\n\nexport type CompareByFieldValue = {\n    shortName: string\n    mediumName: string\n    fullName: string\n}\n\nexport type CompareByField = DataField & {\n    values: {[cbfvId: string]: CompareByFieldValue}\n}\n\nexport type CompareByFields = {\n    [id: string]: CompareByField\n}\n\nexport const FIELD_TYPES_MAP: {[name: string]: FieldType} =\n    indexBy(prop('name'), FIELD_TYPES);\n\nexport const NUMERIC_FIELDS = ['numeric', 'percent', 'dollars', 'minutes', 'hours', 'years'];\n\n// The processData script uses this config object,\n// so changes may not be reflected until reprocessing\nexport const FIELD_CFGS: {[id: string]: {type: string, group: string}} = {\n    'pct_total_pop': {\n        type: 'percent',\n        group: 'General'\n    },\n    // 'pop_density': {\n    //     type: 'numeric',\n    //     group: 'General'\n    // },\n    'gross_rent': {\n        type: 'dollars',\n        group: 'Housing'\n    },\n    'prop_value': {\n        type: 'dollars',\n        group: 'Housing'\n    },\n    'prop_tax': {\n        type: 'dollars',\n        group: 'Housing'\n    },\n    'income': {\n        type: 'dollars',\n        group: 'Employment'\n    },\n    'income_per_hr': {\n        type: 'dollars',\n        group: 'Employment'\n    },\n    'hh_income': {\n        type: 'dollars',\n        group: 'Employment'\n    },\n    'work_hrs_per_wk': {\n        type: 'hours',\n        group: 'Employment'\n    },\n    'commute_time': {\n        type: 'minutes',\n        group: 'Employment'\n    },\n    'avg_age': {\n        type: 'years',\n        group: 'Demographics'\n    },\n    'wh_pct': {\n        type: 'percent',\n        group: 'Demographics'\n    },\n    'bl_pct': {\n        type: 'percent',\n        group: 'Demographics'\n    },\n    'as_pct': {\n        type: 'percent',\n        group: 'Demographics'\n    },\n    'hi_pct': {\n        type: 'percent',\n        group: 'Demographics'\n    }\n};\n\nexport type CompareByFieldCfg = {\n    type: string,\n    group: string\n}\n\nexport const COMPARE_BY_FIELD_CFGS: {[id: string]: CompareByFieldCfg} = {\n    'sex': {\n        type: 'nominal',\n        group: 'Demographic'\n    },\n    'age': {\n        type: 'ordinal',\n        group: 'Demographic'\n    },\n    'race': {\n        type: 'nominal',\n        group: 'Demographic'\n    },\n    'marital': {\n        type: 'nominal',\n        group: 'Demographic'\n    },\n    'education': {\n        type: 'nominal',\n        group: 'Demographic'\n    }\n}\n\nexport type DataValue = any & {\n    geoid: string\n    year: number\n}\n\nexport type DerivedDataValueSet = any & {\n    geoid: string\n    name: string\n    year: number\n    x: number\n    y: number\n    z: number\n}\n\nexport type ApiData = {\n    areas: {[id: string]: Area},\n    levels: {[id: string]: DataField},\n    fields: {[id: string]: DataField},\n    compareByFields: CompareByFields,\n    years: number[],\n    divisions: { byLevel: {[levelId: string]: any[]} }\n    values: DerivedDataValueSet[]\n    topologies: { byAreaAndLevel: {[areaId: string]: {[levelId: string]: any}}}\n}\n\nexport type Data = {\n    areas: { byId: {[id: string]: Area}, allIds: string[]}\n    levels: { byId: {[id: string]: DataField}, allIds: string[]}\n    fields: { byId: {[id: string]: DataField}, allIds: string[]}\n    compareByFields: { byId: CompareByFields, allIds: string[]}\n    years: number[],\n    divisions: { byLevel: {[levelId: string]: any[]} }\n    values: DerivedDataValueSet[]\n    topologies: { byAreaAndLevel: {[areaId: string]: {[levelId: string]: any}}}\n}\n\nexport interface ControlValues {\n    area: string,\n    level: string,\n    compare: string[],\n    x: string,\n    y: string,\n    z: string\n}\n\nexport type UrlParams = {\n    level?: string\n    area?: string\n    compare?: string[]\n    plot?: string\n    x?: string\n    y?: string\n    z?: string\n}\n\nexport const getOgImageUrl = (params: IDashboardProps) : string => {\n    return '';\n};\n\ntype PlotPresetCfg = {\n    title: string\n    params: UrlParams\n}\n\nexport type PlotPreset = {\n    title: string\n    area: Area\n    url: string\n}\n\nexport const PLOT_PRESETS: PlotPresetCfg[] = [{\n    title: 'Hourly income by sex / marital status',\n    params: {\n        area: 'us',\n        level: 'state',\n        compare: ['sex', 'marital'],\n        plot: 'bubble',\n        x: 'work_hrs_per_wk',\n        y: 'income_per_hr'\n    }\n}, {\n    title: 'Hourly income by education',\n    params: {\n        area: 'us',\n        level: 'state',\n        compare: ['education'],\n        plot: 'bar',\n        x: 'work_hrs_per_wk',\n        y: 'income_per_hr'\n    }\n}, {\n    title: 'NY county populations',\n    params: {\n        area: 'ny',\n        level: 'county',\n        plot: 'map',\n        y: 'pct_total_pop'\n    }\n}];\n\nexport enum LegendCorner {\n    NW = 'nw',\n    NE = 'ne',\n    SW = 'sw',\n    SE = 'se'\n}\n\nexport type LegendPosition = {\n    corner: LegendCorner\n    closestDataPoint: number\n}\n\nexport const BOTTOM_DRAWER_HEIGHT = 320;\nexport const BOTTOM_DRAWER_CORNER = 4;\nexport const PCT_V_SPACE_LEFT_FOR_LEGEND = 1/3;\n","import {createSelector, createSlice, PayloadAction} from '@reduxjs/toolkit';\nimport {RootState} from '../../app/store';\nimport {\n    ApiData, Area, COMPARE_BY_FIELD_CFGS, CompareByField, CompareByFields,\n    Data,\n    DataField, DerivedDataValueSet,\n    FIELD_CFGS,\n    NUMERIC_FIELDS\n} from \"../../dashboard/config\";\nimport {map, zipObj} from 'ramda';\nimport masterData from '../../dashboard/data/master.json'\n\nexport interface DataState {\n    value: Data,\n    status: 'idle' | 'loading' | 'failed';\n}\n\nconst augmentField = (cfg: {[id: string]: any}, f: DataField) : DataField =>\n    ({...f, ...cfg[f.id]});\n\n/**\n * Takes (partial) incoming API data and formats it for Redux store\n */\nconst processData = (data: ApiData) : Data => {\n    // @ts-ignore\n    const newData: Data = {...data};\n    if (!!data.areas) {\n        newData['areas'] = {\n            byId: map((a: Area) => ({\n                ...a,\n                link: `../places/us${a.id === 'us' ? '' : '/' + a.id}`\n            }), data.areas),\n            allIds: Object.keys(data.areas)\n        }\n    }\n    if (!!data.levels) {\n        newData['levels'] = {\n            byId: data.levels,\n            allIds: Object.keys(data.levels)\n        }\n    }\n    if (!!data.fields) {\n        newData['fields'] = {\n            byId: map(f => augmentField(FIELD_CFGS, f), data.fields),\n            allIds: Object.keys(FIELD_CFGS)\n        }\n    }\n    if (!!data.compareByFields) {\n        newData['compareByFields'] = {\n            byId: map(f => augmentField(COMPARE_BY_FIELD_CFGS, f), data.compareByFields),\n            allIds: Object.keys(data.compareByFields)\n        }\n    }\n    return newData;\n};\n\nconst initialState: DataState = {\n    value: {\n        // @ts-ignore\n        ...processData(masterData),\n        values: [],\n        topologies: {byAreaAndLevel: {}}\n    },\n    status: 'idle',\n};\n\nexport const dataSlice = createSlice({\n    name: 'data',\n    initialState,\n    reducers: {\n        setData: (state, action: PayloadAction<any>) => {\n            const newData = processData(action.payload);\n            state.value.values = [];\n            state.value = {...state.value, ...newData};\n        },\n        clearDataValues: (state) => {\n            state.value.values = [];\n        }\n    }\n});\n\nexport const { setData, clearDataValues } = dataSlice.actions;\nexport const selectData = (state: RootState) => state.data.value;\nexport const selectAreas = (state: RootState) => state.data.value?.areas;\nexport const selectFields = (state: RootState) => state.data.value?.fields;\nexport const selectCompareByFields = (state: RootState) :\n    {byId: CompareByFields, allIds: string[]} => state.data.value?.compareByFields;\nexport const selectLevels = (state: RootState) => state.data.value?.levels;\nexport const selectTopologiesByAreaAndLevel = (state: RootState) =>\n    state.data.value?.topologies.byAreaAndLevel;\nexport const selectYears = (state: RootState) => state.data.value?.years;\nexport const selectDivisionsByLevel = (state: RootState) =>\n    state.data.value?.divisions.byLevel;\nexport const selectValues = (state: RootState) : DerivedDataValueSet[] =>\n    state.data.value?.values;\n\nexport const selectAllCompareByFieldDetails = createSelector(\n    selectCompareByFields,\n    (compareByFields) : CompareByField[] => {\n        return compareByFields ? compareByFields.allIds\n            .map(id => compareByFields.byId[id])\n            : null\n    }\n);\n\nexport const selectNumericFields = createSelector(\n    selectFields,\n    (fields) : DataField[] => {\n        return fields ? fields.allIds\n            .map(id => fields.byId[id])\n            .filter(f => NUMERIC_FIELDS.includes(f.type)\n            ) : null\n    }\n);\n\nexport const selectGeoDivisionFields = createSelector(\n    selectLevels,\n    (levels) : DataField[] => {\n        return Object.values(levels.byId).map(level => ({\n            ...level,\n            group: 'Geographic',\n            type: 'geo'\n        }))\n    }\n);\n\nexport default dataSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport {last} from 'ramda';\nimport { RootState } from '../../app/store';\nimport {dataSlice} from \"../data/dataSlice\";\nimport {Data} from \"../../dashboard/config\";\n\nexport interface YearState {\n  value: number;\n  status: 'idle' | 'loading' | 'failed';\n}\n\nconst initialState: YearState = {\n  value: 2020,\n  status: 'idle',\n};\n\nexport const yearSlice = createSlice({\n  name: 'year',\n  initialState,\n  reducers: {\n    setYear: (state, action: PayloadAction<number>) => {\n      const value = action.payload;\n      if (value != null && value !== state.value) {\n          state.value = value;\n      }\n    }\n  },\n  extraReducers: {\n    // @ts-ignore\n    [dataSlice.actions.setData]: (state, action: PayloadAction<Data>) => {\n      const data = action.payload;\n      // TODO: I'd like to use the state but it's not set in the store yet.\n      // TODO: Also selectors cannot be run from reducers?\n      // TODO: That'd be the preferred way wouldn't it?\n      if (data.years) {\n        state.value = last(data.years);\n      }\n    }\n  }\n});\n\nexport const { setYear } = yearSlice.actions;\nexport const selectYear = (state: RootState) => state.year.value;\nexport default yearSlice.reducer;\n","import {PLOT_TYPES_MAP} from \"../../dashboard/config\";\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../../app/store';\n\nexport interface PlotTypeState {\n    value: string;\n    status: 'idle' | 'loading' | 'failed';\n}\n\nconst initialState: PlotTypeState = {\n    value: 'map',\n    status: 'idle',\n};\n\nexport const plotTypeSlice = createSlice({\n    name: 'plotType',\n    initialState,\n    // The `reducers` field lets us define reducers and generate associated actions\n    reducers: {\n        // Use the PayloadAction type to declare the contents of `action.payload`\n        setPlotType: (state, action: PayloadAction<string>) => {\n            const value = action.payload;\n            if (value != null && value !== '' /* && state.value !== value */)\n                state.value = value;\n        },\n    }\n});\n\nexport const { setPlotType } = plotTypeSlice.actions;\nexport const selectPlotType = (state: RootState) => PLOT_TYPES_MAP[state.plotType.value];\nexport default plotTypeSlice.reducer;\n","import {createSlice, PayloadAction} from '@reduxjs/toolkit';\nimport { RootState } from '../../app/store';\nimport masterData from '../../dashboard/data/master.json';\nimport {ControlValues} from \"../../dashboard/config\";\nimport {equals} from 'ramda';\n\nexport interface ControlsState {\n    value: ControlValues,\n    loaded: boolean\n}\n\nconst defaultFields = Object.keys(masterData.fields);\n\nconst initialState: ControlsState = {\n    value: {\n        area: \"us\",\n        compare: [],\n        level: \"state\",\n        x: defaultFields[0],\n        y: defaultFields[1],\n        z: \"pct_total_pop\"\n    },\n    loaded: false\n};\n\nexport const controlsSlice = createSlice({\n    name: 'controls',\n    initialState,\n    // The `reducers` field lets us define reducers and generate associated actions\n    reducers: {\n        setControls: (state, action: PayloadAction<Object>) => {\n            const newValue = {...state.value, ...action.payload};\n            if (!equals(state.value, newValue)) {\n                state.value = newValue;\n            }\n        },\n        setLoaded: (state) => {\n            state.loaded = true;\n        }\n    }\n});\n\nexport const { setControls, setLoaded } = controlsSlice.actions;\n\nexport const selectActualControlValues = (state: RootState) : ControlValues =>\n    state.controls.value;\n\nexport const selectControlsLoaded = (state: RootState) : boolean =>\n    state.controls.loaded;\n\nexport default controlsSlice.reducer;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport yearReducer from '../features/year/yearSlice';\nimport plotTypeReducer from '../features/plotType/plotTypeSlice';\nimport dataReducer from '../features/data/dataSlice';\nimport controlsReducer from '../features/controls/controlsSlice';\n\nexport const store = configureStore({\n  reducer: {\n    data: dataReducer,\n    year: yearReducer,\n    plotType: plotTypeReducer,\n    controls: controlsReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import { useEffect } from \"react\"\n\nconst useTouchOutside = (elementRef, onClick) => {\n    useEffect(() => {\n        const clickListener = event => {\n            if (!elementRef.current || elementRef.current.contains(event.target)) {\n                return\n            }\n            onClick(event)\n        }\n        // const moveListener = event => {\n        //     if (!elementRef.current || elementRef.current.contains(event.target)) {\n        //         return\n        //     }\n        //     onMove(event);\n        // }\n        document.addEventListener(\"touchstart\", clickListener)\n        // document.addEventListener(\"mousemove\", moveListener)\n        return () => {\n            document.removeEventListener(\"touchstart\", clickListener)\n            // document.removeEventListener(\"mousemove\", moveListener)\n        }\n    }, [elementRef, onClick])\n}\n\nexport default useTouchOutside\n","import React from 'react';\nimport { Tooltip } from '@visx/tooltip';\nimport { withBoundingRects } from '@visx/bounds';\n\nfunction CustomTooltipWithBounds({\n                                     left: initialLeft,\n                                     top: initialTop,\n                                     offsetLeft = 20,\n                                     offsetTop = 20,\n                                     rect,\n                                     parentRect,\n                                     getRects,\n                                     children,\n                                     style,\n                                     ...otherProps\n                                 }) {\n\n    let left = initialLeft;\n    let top = initialTop;\n\n    if (parentRect) {\n        if (parentRect.width > 0) {\n            if (left + offsetLeft + rect.width > parentRect.width) {\n                left = parentRect.width - rect.width - offsetLeft;\n            }\n            if (left < 0) {\n                left = 0;\n            }\n        }\n\n        if (parentRect.height > 0) {\n            if (top + offsetTop + rect.height > parentRect.height) {\n                top = parentRect.height - rect.height - offsetTop;\n            }\n            if (top < 0) {\n                top = 0;\n            }\n        }\n    }\n\n    return (\n        <Tooltip\n            style={{ top: 0, transform: `translate(${left}px, ${top}px)`, ...style }}\n            {...otherProps}\n        >\n            {children}\n        </Tooltip>\n    );\n}\nexport default withBoundingRects(CustomTooltipWithBounds);\n","import {intersection, reduce, tail} from 'ramda';\n\n// bind ::  [a] -> (a -> [b]) -> [b]\nconst bind = xs => f => xs.flatMap(f);\n\n// foldr :: (a -> b -> b) -> b -> [a] -> b\nconst foldr = f => a => xs =>\n    xs.reduceRight((a, x) => f(x)(a), a);\n\nexport const cartProdN = foldr(\n    xs => as =>\n        bind(as)(\n            x => bind(xs)(\n                a => [\n                    [a].concat(x)\n                ]\n            )\n        )\n)([\n    []\n]);\n\n// TODO: Are these (above and below) the same?\n\nexport function cartProduct<T>(...sets: T[][]) : T[][] {\n    return sets.reduce((acc: T[][], set: T[]) =>\n            acc.flatMap((x) => set.map(y => [...x, y])),\n        [[]]);\n}\n\nexport const intersectAll = (xs) => reduce(intersection, xs[0], tail(xs));\n\nexport const allValuesNotNull = (obj: Object) : boolean =>\n    Object.values(obj).every(f => f != null);\n\nexport const flattenArrayOfObjects = (arr: Object[]) : Object => {\n    const flatObject = {};\n    for(let i = 0; i < arr.length; i++) {\n        for(const property in arr[i]){\n            flatObject[`${property}`] = arr[i][property];\n        }\n    }\n    return flatObject;\n};\n\nexport function firstAndLast<T>(values: T[]) : T[] {\n    return [values[0], values[values.length - 1]];\n}\n\nexport function nestedFirstAndLast<T>(values: T[][]) : T[][] {\n    return values.map(firstAndLast);\n}\n\nexport function capitalize(s: string) : string {\n    return s[0].toUpperCase() + s.slice(1);\n}\n\nexport const sum = (array) => array.reduce((a, b) => a + b);\nexport const average = (array) => sum(array) / array.length;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import {\n    CompareByField,\n    CompareByFields,\n    CompareByFieldValue\n} from \"../config\";\nimport {firstAndLast, nestedFirstAndLast} from \"./misc\";\nimport {curry, compose, zipObj} from 'ramda';\n\ntype ColorHsv = {\n    h: number,\n    s: number,\n    v: number\n}\n\nconst DEFAULT_COLOR: ColorHsv = {h: 214, s: 0.8, v: 1};\n\nconst HUE_PRESETS = [\n    210,\n    350,\n    32,\n    285,\n    160\n];\n\nconst SAT_RANGE = [0.3, 1];\n\n// Generates a single color for a compare feature value\ntype ColorFn = (inputColor: ColorHsv,\n                value: CompareByFieldValue,\n                nFieldValues: number,\n                valueIndex: number,\n                isPrioritized: boolean) => ColorHsv\n\nexport const autoHueScale = (c: ColorHsv, n: number, i: number) : ColorHsv  => {\n    return {...c, h: HUE_PRESETS[i]};\n};\n\nexport const autoSatScale = (c: ColorHsv, n: number, i: number) : ColorHsv  => {\n    const s = ((SAT_RANGE[1] - SAT_RANGE[0]) / n) * i + SAT_RANGE[0];\n    return {...c, s, v: s >= 1/2 ? 1 - s/3 : 1 };\n};\n\nexport const autoScaleColorNominal = (\n    c, value, nFieldValues, index, isPrioritized\n) : ColorHsv => {\n    if (isPrioritized) {\n        return autoHueScale(c, nFieldValues, index);\n    } else {\n        // Assume ascending order\n        const sStart = SAT_RANGE[0];\n        const sEnd = 1;\n        const vStart = 1;\n        const vEnd = 0.5;\n        const sStep = (sEnd - sStart) / nFieldValues;\n        const vStep = (vEnd - vStart) / nFieldValues;\n        return {...c, s: sStart + sStep * index, v: vStart + vStep * index};\n    }\n};\n\nexport const autoScaleColorOrdinal = (\n    c, value, nFieldValues, index, isPrioritized\n) : ColorHsv => {\n    return autoSatScale(c, nFieldValues, index);\n};\n\nconst COMPARE_BY_COLOR_FNS: {[id: string]: ColorFn} = {  // Listed in priority order\n    'sex':  (c, value) =>\n        ({...c, h: value.shortName === 'M' ? 210 : 330}),\n    'race': autoScaleColorNominal,\n    'marital': autoScaleColorNominal,\n    'education': autoScaleColorNominal,\n    'age': autoScaleColorOrdinal,\n};\n\nconst COMPARE_BY_COLOR_PRIORITIES : {[key: string]: number} = {\n    'sex': 1,\n    'race': 2,\n    'marital': 2,\n    'education': 2,\n    'age': 3\n};\n\nfunction hsvToRgb(h, s, v) {\n    let r, g, b;\n    const h1 = h / 360;  // Convert hue to a value between 0 and 1\n    const i = Math.floor(h1 * 6);\n    const f = h1 * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n        case 0: r = v; g = t; b = p; break;\n        case 1: r = q; g = v; b = p; break;\n        case 2: r = p; g = v; b = t; break;\n        case 3: r = p; g = q; b = v; break;\n        case 4: r = t; g = p; b = v; break;\n        case 5: r = v; g = p; b = q; break;\n    }\n    return [ r * 255, g * 255, b * 255 ].map(x => Math.round(x));\n}\n\nfunction componentToHex(c) {\n    // @ts-ignore\n    const hex = c.toString(16);\n    return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(r, g, b) {\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n\nexport const hsvToHex = (h, s, v) : string => {\n    const [r, g, b] = hsvToRgb(h, s, v);\n    return rgbToHex(r, g, b);\n};\n\ntype FieldValueKey = {\n    field: string\n    value: string\n}\n\ntype ColorKeySet = {\n    k1?: FieldValueKey\n    k2?: FieldValueKey\n}\n\ntype KeysAndHsvColor = {\n    keys: ColorKeySet\n    color: ColorHsv\n}\n\ntype ColorPaletteHashMap = { [key: string]: string }\n\nexport type ColorPalette = {\n    hashMap: ColorPaletteHashMap\n    labels: {\n        rows: string[],\n        cols: string[]\n    },\n    fullNames: {\n        rows: string[],\n        cols: string[]\n    }\n    colors: {\n        byRowAndCol: string[][]\n    }\n}\n\nconst sortKeys = (cbfs: CompareByField[], keys: ColorKeySet) : ColorKeySet => {\n    if (keys.k2) {  // If it has 2 keys (0 or 1 and the order doesn't matter)\n        const fieldToIndexMap = zipObj(\n            cbfs.map((cbf) => cbf.id),\n            cbfs.map((_, i) => i)\n        );\n        if (fieldToIndexMap[keys.k1.field] > fieldToIndexMap[keys.k2.field]) {\n            return { k1: keys.k2, k2: keys.k1 };  // Switch order\n        }\n    }\n    return keys;  // Just return original order\n};\n\nconst createKey = (cbfs: CompareByField[], keys: ColorKeySet) : string => {\n    if (!keys.k1) {\n        return ''\n    } else {\n        const sk = sortKeys(cbfs, keys);\n        return sk.k1.field + '=' + sk.k1.value +\n        (sk.k2 ? (';' + sk.k2.field + '=' + sk.k2.value) : '')\n    }\n}\n\nconst addColorToPalette = (p: ColorPaletteHashMap,\n                           cbfs: CompareByField[],\n                           keys: ColorKeySet, color: string) => {\n    p[createKey(cbfs, keys)] = color;\n}\n\nconst createKeySet = (compareByFields: CompareByField[],\n                      value: Object) : ColorKeySet => {\n    const cbfs = Object.values(compareByFields);\n    if (cbfs.length === 0) {\n        return {};\n    }\n    const k = { k1: { field: cbfs[0].id, value: value[cbfs[0].id] }};\n    switch (cbfs.length) {\n        case 1: return k;\n        case 2: return { ...k, k2: { field: cbfs[1].id, value: value[cbfs[1].id] }};\n        default: throw new Error('Invalid compare by field length: ' + cbfs.length);\n    }\n};\n\nconst _getColorFromPalette = (p: ColorPaletteHashMap,\n                              cbfs: CompareByField[],\n                              ks: ColorKeySet) : string => {\n    return p[createKey(cbfs, ks)];\n}\n\nexport const getColorFromPalette = (p: ColorPalette,\n                                    cbfs: CompareByField[],\n                                    value: Object) : string =>\n    _getColorFromPalette(p.hashMap, cbfs, createKeySet(cbfs, value))\n\nconst getShortLabels = (compare: CompareByField) : string[] =>\n    Object.values(compare.values).map(v => v.shortName);\n\nconst getFullLabels = (compare: CompareByField) : string[] =>\n    Object.values(compare.values).map(v => v.fullName);\n\nfunction iterateOverCompareGrid<T>(fn: (ks: ColorKeySet) => T,\n                                   cbf1: CompareByField,\n                                   cbf2: CompareByField) : T[][] {\n    return Object.values(cbf1.values).map((v1) =>\n        Object.values(cbf2.values).map((v2) => fn({\n            k1: {field: cbf1.id, value: v1.shortName},\n            k2: {field: cbf2.id, value: v2.shortName}\n        })));\n}\n\nconst switchToAlwaysMakeLegendHorizontal = (cbfs: CompareByField[]) : CompareByField[] =>\n    Object.values(cbfs[1].values).length >= Object.values(cbfs[0].values).length\n        ? cbfs : [cbfs[1], cbfs[0]];\n\nconst setupColorPalette = (cbfs: CompareByField[],\n                           kahcs: KeysAndHsvColor[]) : ColorPalette => {\n    const p = { hashMap: {} };\n    kahcs.forEach((kahc) => {\n        addColorToPalette(\n            p.hashMap,\n            cbfs,\n            kahc.keys,\n            hsvToHex(kahc.color.h, kahc.color.s, kahc.color.v));\n    });\n    const keySets = kahcs.map(kahc => kahc.keys);\n    const getColor = curry(_getColorFromPalette)(p.hashMap, cbfs);\n    const getColorGrid = curry(iterateOverCompareGrid)(getColor);\n    switch (cbfs.length) {\n        case 0:\n            return {\n                ...p,\n                labels: { rows: [], cols: [] },\n                fullNames: { rows: [], cols: [] },\n                colors: { byRowAndCol: [] }\n            }\n        case 1:\n            return cbfs[0].type === 'nominal' ? {\n                ...p,\n                labels: {\n                    rows: getFullLabels(cbfs[0]),\n                    cols: []\n                },\n                fullNames: {\n                    rows: getFullLabels(cbfs[0]),\n                    cols: []\n                },\n                colors: {\n                    byRowAndCol: keySets.map(compose(x => [x], getColor))\n                }\n            } : {\n                ...p,\n                labels: {\n                    rows: [],\n                    cols: firstAndLast(getShortLabels(cbfs[0])),\n                },\n                fullNames: {\n                    rows: [],\n                    cols: firstAndLast(getFullLabels(cbfs[0])),\n                },\n                colors: {\n                    byRowAndCol: [firstAndLast(keySets.map(getColor))]\n                }\n            };\n        case 2:\n            if (cbfs[0].type === 'nominal') {  // nominal x nominal\n                const scbfs = switchToAlwaysMakeLegendHorizontal(cbfs);\n                return cbfs[1].type === 'nominal' ? {\n                    ...p,\n                    labels: {\n                        rows: getShortLabels(scbfs[0]),\n                        cols: getShortLabels(scbfs[1])\n                    },\n                    fullNames: {\n                        rows: getFullLabels(scbfs[0]),\n                        cols: getFullLabels(scbfs[1])\n                    },\n                    colors: {\n                        byRowAndCol: getColorGrid(scbfs[0], scbfs[1])\n                    }\n                } : {  // nominal x ordinal\n                    ...p,\n                    labels: {\n                        rows: getFullLabels(cbfs[0]),\n                        cols: firstAndLast(getShortLabels(cbfs[1]))\n                    },\n                    fullNames: {\n                        rows: getFullLabels(scbfs[0]),\n                        cols: firstAndLast(getFullLabels(cbfs[1]))\n                    },\n                    colors: {\n                        byRowAndCol: nestedFirstAndLast(getColorGrid(cbfs[0], cbfs[1]))\n                    }\n                }\n            } else {\n                return cbfs[1].type === 'ordinal' ? {  // ordinal x ordinal\n                    ...p,\n                    labels: {\n                        rows: firstAndLast(getShortLabels(cbfs[0])),\n                        cols: firstAndLast(getShortLabels(cbfs[1])),\n                    },\n                    fullNames: {\n                        rows: firstAndLast(getFullLabels(cbfs[0])),\n                        cols: firstAndLast(getFullLabels(cbfs[1])),\n                    },\n                    colors: {\n                        byRowAndCol: firstAndLast(nestedFirstAndLast(getColorGrid(cbfs[0], cbfs[1])))\n                    }\n                } : {  // ordinal x nominal\n                    ...p,\n                    labels: {\n                        rows: getFullLabels(cbfs[1]),\n                        cols: firstAndLast(getShortLabels(cbfs[0]))\n                    },\n                    fullNames: {\n                        rows: getFullLabels(cbfs[1]),\n                        cols: firstAndLast(getFullLabels(cbfs[0]))\n                    },\n                    colors: {\n                        byRowAndCol: nestedFirstAndLast(getColorGrid(cbfs[1], cbfs[0]))\n                    }\n                };\n            }\n        default:\n            throw new Error(`Has ${cbfs.length} compares. Must be 0-2.`)\n    }\n}\n\nexport const createColorPalette = (compareByFields: CompareByFields) : ColorPalette => {\n    const cbfs = Object.values(compareByFields);\n    const priorities = cbfs.map(cbf => COMPARE_BY_COLOR_PRIORITIES[cbf.id]);\n    const lowPriority = Math.max(...priorities);\n    const highPriority = Math.min(...priorities);\n    const isPrioritized = (cbf: CompareByField, i: number) : boolean => {\n        if (lowPriority === highPriority) {\n            return i === 0;\n        } else {\n            return COMPARE_BY_COLOR_PRIORITIES[cbf.id] === highPriority;\n        }\n    }\n    const kahcs = cbfs.reduce((\n        accum: KeysAndHsvColor[],\n        cbf: CompareByField,\n        cbfi: number\n    ) : KeysAndHsvColor[] => {\n        const isAccumDefault = !accum[0].keys.k1;\n        const fn = COMPARE_BY_COLOR_FNS[cbf.id];\n        if (!fn) {\n            throw new Error(\"Color function not found for \" + cbf.id);\n        }\n        const newColors: KeysAndHsvColor[] = accum.flatMap((\n            existing: KeysAndHsvColor\n        ) => {\n            const fieldValues = Object.values(cbf.values);\n            const nFieldValues = fieldValues.length;\n            return fieldValues.map((cbfv: CompareByFieldValue, vi) => ({\n                keys: isAccumDefault ? {\n                    k1: {\n                        field: cbf.id,\n                        value: cbfv.shortName,\n                    }\n                } : {\n                    ...existing.keys,\n                    k2: {\n                        field: cbf.id,\n                        value: cbfv.shortName\n                    }\n                },\n                color: fn(\n                    existing.color,\n                    cbfv,\n                    nFieldValues,\n                    vi,\n                    isPrioritized(cbf, cbfi))\n            }));\n        });\n        return isAccumDefault ? newColors : [...accum, ...newColors];\n    }, [{color: DEFAULT_COLOR, keys: {}}]);\n    return setupColorPalette(cbfs, kahcs);\n};\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCompare(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"256pt\",\n    height: \"256pt\",\n    viewBox: \"0 0 256 256\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#757575\",\n    fillRule: \"evenodd\",\n    stroke: \"#757575\",\n    strokeLinecap: \"square\",\n    strokeLinejoin: \"bevel\",\n    d: \"M69 114.85h48V219.5H69zM135.62 20.487h48v199.18h-48z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#757575\",\n    fillRule: \"evenodd\",\n    stroke: \"#757575\",\n    strokeWidth: 10,\n    strokeLinecap: \"square\",\n    strokeMiterlimit: 2,\n    d: \"M20 236.021h216\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCompare);\nexport default __webpack_public_path__ + \"static/media/Compare.7e039b5f1002d9c6ed17a8eb1f0d6ecd.svg\";\nexport { ForwardRef as ReactComponent };","import {\n    DerivedDataValueSet,\n    FeatureRanges,\n    LegendCorner,\n    LegendPosition,\n    PlotType\n} from \"../config\";\nimport {max, min} from 'd3-array';\nimport {ColorPalette, getColorFromPalette} from \"./colors\";\nimport {average} from \"./misc\";\n\nexport const processItemValues = (\n    vs: DerivedDataValueSet[],\n    controlFields,\n    divisions,\n    colorPalette: ColorPalette\n) => {\n    const createName = (v: DerivedDataValueSet) => {\n        const cs = controlFields.compare;\n        const div = divisions[v.geoid];\n        const area = controlFields.area;\n        const divName = cs.length > 0 ? div?.abbrev || div?.name : div?.name;\n        const areaName = cs.length > 0 ? area.abbrev : area.name;\n        const place = divName || areaName;\n        const getC = c => {\n            if (!c.values[v[c.id]]) {\n                // throw new Error(`Compare value '${c.id}' not found in ${place}`);\n                return [];\n            }\n            return c.values[v[c.id]].mediumName;\n        }\n        const parts = [\n            place,\n            cs.map(getC).join(', ')\n        ];\n        return parts.filter(x => x.length > 0).join(': ')\n    };\n    return vs.map(v => ({\n        ...v,\n        name: createName(v),\n        x: v[controlFields.x.id],\n        y: v[controlFields.y.id],\n        z: v[controlFields.z.id],\n        color: getColorFromPalette(colorPalette, controlFields.compare, v)\n    }));\n};\n\n/**\n * Assumes a linear scale\n */\nconst _findClearestCorner = (left: number[],\n                             right: number[],\n                             y_mean: number,\n                             forceCorner?: LegendCorner) : LegendPosition => {\n    const topLeft = (max(left) - y_mean) / y_mean;\n    const topRight = (max(right) - y_mean) / y_mean;\n    // Avoid lower corners by tipping the scale a little\n    const bottomLeft = ((y_mean * 2 - min(left)) / y_mean);\n    const bottomRight = ((y_mean * 1.5 - min(right)) / y_mean);\n    const minimum = min([topLeft, topRight, bottomLeft, bottomRight]);\n    if (forceCorner != null) {\n        if (forceCorner === LegendCorner.NW) {\n            return {corner: LegendCorner.NW, closestDataPoint: topLeft };\n        } else if (forceCorner === LegendCorner.NE) {\n            return {corner: LegendCorner.NE, closestDataPoint: topRight };\n        } else if (forceCorner === LegendCorner.SW) {\n            return {corner: LegendCorner.SW, closestDataPoint: bottomLeft };\n        } else if (forceCorner === LegendCorner.SE) {\n            return {corner: LegendCorner.SE, closestDataPoint: bottomRight };\n        }\n    }\n    if (topLeft === minimum) {\n        return {corner: LegendCorner.NW, closestDataPoint: topLeft };\n    } else if (topRight === minimum) {\n        return {corner: LegendCorner.NE, closestDataPoint: topRight };\n    } else if (bottomLeft === minimum) {\n        return {corner: LegendCorner.SW, closestDataPoint: bottomLeft };\n    } else if (bottomRight === minimum) {\n        return {corner: LegendCorner.SE, closestDataPoint: bottomRight };\n    } else {\n        return {corner: LegendCorner.NW, closestDataPoint: topLeft };\n    }\n};\n\nexport const chooseLegendPosition = (plotType: PlotType,\n                                     featureRanges: FeatureRanges,\n                                     data: any[],\n                                     forceCorner?: LegendCorner) : LegendPosition => {\n    const _splitHalfs = (pred: (any, number) => number,\n                         values: any[],\n                         c1: number,\n                         c2: number) : [number[], number[]] => {\n        return [\n            values.filter((v, i) => pred(v, i) < c1).map(v => v.y),\n            values.filter((v, i) => pred(v, i) > c2).map(v => v.y)\n        ];\n    };\n    const y_mean = average(featureRanges.y);\n    if (plotType.name === 'bubble') {\n        const c = average(featureRanges.x);\n        const x_min = featureRanges.x[0];\n        const x_max = featureRanges.x[1];\n        const c14 = (c + x_min) / 2;\n        const c34 = (c + x_max) / 2;\n        return _findClearestCorner(..._splitHalfs(d => d.x, data, c14, c34), y_mean, forceCorner);\n    } else if (plotType.name === 'line') {\n        const c = average(featureRanges.year);\n        return _findClearestCorner(..._splitHalfs(d => d.year, data, c, c), y_mean, forceCorner);\n    } else if (plotType.name === 'bar') {\n        const sortedData = data.sort((a, b) => a.scaledY - b.scaledY);\n        const c = data.length / 2;\n        return _findClearestCorner(..._splitHalfs((_, i) => i, sortedData, c, c), y_mean, forceCorner);\n    } else {\n        throw new Error('Unhandled plot type: ' + plotType.name);\n    }\n};\n","import {createSelector} from \"@reduxjs/toolkit\";\nimport {\n    selectAreas,\n    selectDivisionsByLevel,\n    selectFields,\n    selectLevels,\n    selectNumericFields,\n    selectValues,\n    selectTopologiesByAreaAndLevel,\n    selectCompareByFields,\n} from \"../features/data/dataSlice\";\nimport {selectActualControlValues} from \"../features/controls/controlsSlice\";\nimport {mapObjIndexed} from \"ramda\";\nimport {\n    Area,\n    CompareByField,\n    FeatureRanges, LegendCorner, LegendPosition,\n    PLOT_PRESETS,\n    PlotPreset\n} from \"./config\";\nimport {chooseLegendPosition, processItemValues} from \"./utils/domain\";\nimport {min, max} from 'd3-array';\nimport {selectYear} from \"../features/year/yearSlice\";\nimport {createColorPalette} from \"./utils/colors\";\nimport {selectPlotType} from \"../features/plotType/plotTypeSlice\";\nimport queryString from \"query-string\";\n\nexport const selectControlFieldValues = createSelector(\n    selectActualControlValues,\n    selectNumericFields,\n    (cv, nfs) => {\n        if (!nfs || nfs.length === 0) {\n            return cv;\n        }\n        return {\n            ...cv,\n            x: cv.x || nfs[0].id,\n            y: cv.y || nfs[1].id,\n            z: cv.z || nfs[2].id\n        }\n    }\n);\n\nexport const selectControlFields = createSelector(\n    selectAreas,\n    selectLevels,\n    selectFields,\n    selectCompareByFields,\n    selectControlFieldValues,\n    (areas, levels, fields, compareByFields, values) => {\n        return mapObjIndexed((v, k) => {\n            if (!fields || !v) {\n                return null;\n            } else if (k === 'area') {\n                return areas.byId[v];\n            } else if (k === 'compare') {\n                return v.map(cv => compareByFields.byId[cv]);\n            } else if  (k === 'level') {\n                return levels.byId[v];\n            } else {\n                return fields.byId[v];\n            }\n        }, values)\n    }\n);\n\nexport const selectColorPalette = createSelector(\n    selectControlFields,\n    (controls) => {\n        const cbfs = controls.compare;\n        return createColorPalette(cbfs);\n    }\n);\n\nexport const selectCurrentDivisions = createSelector(\n    selectDivisionsByLevel,\n    selectControlFieldValues,\n    (dvsByLevel, cv): any[] => {\n        return dvsByLevel[cv.level];\n    }\n);\n\nexport const selectTopologies = createSelector(\n    selectTopologiesByAreaAndLevel,\n    selectControlFieldValues,\n    (tbaal, cvs) => {\n        if (Object.keys(tbaal).length > 0) {\n            return tbaal[cvs.area] ? tbaal[cvs.area][cvs.level] : null;\n        } else {\n            return null;\n        }\n    }\n);\n\nexport const selectArea = createSelector(\n    selectAreas,\n    selectControlFieldValues,\n    (areas, cv) : Area => {\n        return areas.byId[cv.area];\n    }\n);\n\nexport const selectCurrentCompareDetails = createSelector(\n    selectCompareByFields,\n    selectControlFieldValues,\n    (cb, cv) : CompareByField[] => {\n        return cv.compare.map(c => cb.byId[c]);\n    }\n);\n\nconst summaryDataForAllYears = (vs, area, ds, cf, cp) => {\n    const avs = vs.filter(v => v.geoid === area.geoid);\n    return processItemValues(avs, cf, ds, cp);\n}\n\n\nconst individualDataForAllYears = (vs, area, ds, cf, cp) => {\n    const avs = vs.filter(v => v.geoid !== area.geoid);\n    return processItemValues(avs, cf, ds, cp);\n};\n\nconst individualDataIgnoringComparesForAllYears = (vs, area, ds, cf, cp) => {\n    const avs = vs.filter(v => v.geoid !== area.geoid);\n    return processItemValues(avs, {...cf, compare: []}, ds, cp);\n};\n\nexport const selectPlotData = createSelector(\n    selectPlotType,\n    selectValues,\n    selectArea,\n    selectCurrentDivisions,\n    selectControlFields,\n    selectYear,\n    selectColorPalette,\n    (plotType, vs, area, ds, cf, year, cp) => {\n        const summaryData = () => {\n            const avs = vs.filter(v => v.geoid === area.geoid && v.year === year);\n            return processItemValues(avs, cf, ds, cp);\n        };\n        const individualData = () => {\n            const avs = vs.filter(v => v.geoid !== area.geoid && v.year === year);\n            return processItemValues(avs, cf, ds, cp);\n        };\n        const individualDataIgnoringCompares = () => {\n            const avs = vs.filter(v => v.geoid !== area.geoid && v.year === year);\n            return processItemValues(avs, {...cf, compare: []}, ds, cp);\n        };\n\n        if (plotType.name === 'bubble') {\n            return individualData();\n        } else if (plotType.name === 'line') {\n            if (cf.compare.length === 0) {\n                return individualDataForAllYears(vs, area, ds, cf, cp);\n            } else {\n                return summaryDataForAllYears(vs, area, ds, cf, cp);\n            }\n        } else if (plotType.name === 'bar') {\n            if (cf.compare.length === 0) {\n                return individualData();\n            } else {\n                return summaryData();\n            }\n        } else if (plotType.name === 'map') {\n            return individualDataIgnoringCompares();\n        } else {\n            throw new Error('Unhandled plot type: ' + plotType.name);\n        }\n    }\n);\n\nexport const selectFeatureRanges = createSelector(\n    selectPlotType,\n    selectValues,\n    selectArea,\n    selectCurrentDivisions,\n    selectControlFields,\n    selectColorPalette,\n    (plotType, vs, area, ds, cf, cp) : FeatureRanges => {\n        const data = (() => {\n            if (plotType.name === 'map') {\n                return individualDataIgnoringComparesForAllYears(vs, area, ds, cf, cp);\n            } else if (plotType.name === 'bubble' || cf.compare.length === 0) {\n                return individualDataForAllYears(vs, area, ds, cf, cp);\n            } else {\n                return summaryDataForAllYears(vs, area, ds, cf, cp);\n            }\n        })();\n        const fvs = {\n            x: data.map(v => v.x),\n            y: data.map(v => v.y),\n            z: data.map(v => v.z),\n            year: data.map(v => v.year)\n        }\n        return {\n            x: [min(fvs.x), max(fvs.x)],\n            y: [min(fvs.y), max(fvs.y)],\n            z: [min(fvs.z), max(fvs.z)],\n            year: [min(fvs.year), max(fvs.year)]\n        };\n    }\n);\n\nexport const selectLegendPosition = createSelector(\n    selectPlotType,\n    selectPlotData,\n    selectFeatureRanges,\n    (plotType, data, featureRanges) : LegendPosition | undefined => {\n        if (featureRanges.y[0] == null) {\n            return undefined;\n        } else if (plotType.name === 'bubble' || plotType.name === 'line') {\n            return chooseLegendPosition(plotType, featureRanges, data);\n        } else if (plotType.name === 'bar') {\n            return chooseLegendPosition(plotType, featureRanges, data, LegendCorner.NE);\n        } else {\n            throw new Error('Unhandled plot type: ' + plotType.name);\n        }\n    }\n);\n\nexport const selectPlotPresets = createSelector(\n    selectAreas,\n    (areas) : PlotPreset[] => PLOT_PRESETS.map(p => ({\n        title: p.title,\n        area: areas.byId[p.params.area],\n        url: 'plot?' + queryString.stringify(p.params, {arrayFormat: 'bracket'})\n    })));\n\nexport const isLoaded = createSelector(\n    selectValues,\n    (values) => {\n        return values.length > 0;\n    }\n);\n","import React from \"react\";\nimport {defaultStyles as defaultTooltipStyles, useTooltip} from \"@visx/tooltip\";\nimport {\n    all,\n    curry,\n    groupBy,\n    keys,\n    last,\n    map,\n    range,\n    reduce,\n    tail,\n    values\n} from \"ramda\";\nimport useTouchOutside from \"./useTouchOutside\";\nimport TooltipWithBounds from '../dashboard/CustomTooltipWithBounds';\nimport {animated, useSpring} from \"react-spring\";\nimport {useAppSelector} from \"../app/hooks\";\nimport {selectPlotType} from \"../features/plotType/plotTypeSlice\";\nimport {selectControlFields} from \"../dashboard/selectors\";\nimport {FIELD_TYPE_FORMAT_VALUES_MAP} from \"../dashboard/config\";\n\nconst DEFAULT_OPTIONS = {\n    selectedOpacity: 0.8,\n    unselectedOpacity: 0.15,\n    defaultOpacity: 0.6,\n    animate: true\n};\n\ntype ItemMap = Map<string, any[]> | Record<string, any[]>;\ntype KeyValue = any | ((event: Event) => any)\n\nconst groupByKeys = (keyFields: string[], items: any[]) : ItemMap => {\n    const im = groupBy(item => item[keyFields[0]], values(items));\n    if (keyFields.length === 1) {\n        return im;\n    } else {\n        return map(curry(groupByKeys)(tail(keyFields)), im);\n    }\n};\n\nconst lookupKeys = (keys: string[], itemMap: ItemMap) => {\n    return reduce((im, k) => im[k], itemMap, keys);\n};\n\nconst lookupItem = (keys: string[], itemMap: ItemMap) => {\n    const results = lookupKeys(keys, itemMap);\n    if (results.length === 1) {\n        return results[0];\n    } else {\n        throw new Error(`Found ${results.length} results for lookup of ${keys}`);\n    }\n};\n\nconst matchesAllKeys = (keysToMatch: string[], itemKeys: string[]) : boolean => {\n    const n = Math.min(keysToMatch.length, itemKeys.length);\n    // Keys will be coerced into strings, but they might be originally numbers\n    // eslint-disable-next-line eqeqeq\n    return all(i => keysToMatch[i] == itemKeys[i], range(0, n));\n};\n\nconst TooltipContent = ({item}) => {\n    const controls = useAppSelector(selectControlFields);\n    const plotType = useAppSelector(selectPlotType);\n\n    const FormattedValue = ({field}: {field: string}) => {\n        const formatValue = FIELD_TYPE_FORMAT_VALUES_MAP[controls[field].type];\n        return (\n            plotType.fields[field] && controls[field] && (\n                <div>\n                    {controls[field].name}:{' '}\n                    {formatValue(item[field])}\n                </div>\n            )\n        );\n    };\n\n    return (\n        <div className='tooltip-content'>\n            <div className='tooltip-title'>\n                <h3>{item.name}</h3>\n                <div className='year'>{item.year}</div>\n            </div>\n            <div className='tooltip-body'>\n                <FormattedValue field='y' />\n                <FormattedValue field='x' />\n            </div>\n        </div>\n    );\n};\n\nconst useSelect = (items: any[], keyFields: string[],\n                   showLabel, disableInteraction = false) => {\n    const nKeyFields = keyFields.length;\n    const itemMap = groupByKeys(keyFields, items);\n    const [selectedKeys, selectKeys] = React.useState<string[]>(null);\n    const {\n        tooltipOpen,\n        tooltipLeft,\n        tooltipTop,\n        tooltipData,\n        showTooltip,\n        hideTooltip\n    } = useTooltip<React.ReactNode>();\n\n    const select = React.useCallback(\n        (itemKeys: string[]) => {\n            if (!selectedKeys || !matchesAllKeys(selectedKeys, itemKeys)) {\n                selectKeys(itemKeys);\n                const item = lookupItem(itemKeys, itemMap);\n                showTooltip({\n                    tooltipData: <TooltipContent item={item} />,\n                    tooltipLeft: item.scaledX,\n                    tooltipTop: item.scaledY,\n                });\n            }\n        },\n        [showTooltip, itemMap, selectedKeys]\n    );\n\n    const deselect = React.useCallback(() => {\n        selectKeys(null);\n        hideTooltip();\n    }, [hideTooltip]);\n\n    const getKeys = (key1) : string[] => {\n        switch (nKeyFields) {\n            case 1: return [key1];\n            case 2: return [key1, last(keys(itemMap[key1]))];\n            default: throw new Error(\"Unsupported # of keys: \" + nKeyFields);\n        }\n    };\n\n    React.useEffect(() => {\n        if (showLabel) {\n            select(getKeys(showLabel));\n        }\n    });\n\n    const Tooltip = React.memo(() => {\n        const ref = React.useRef(null);\n        // On touch outside isn't needed for closing the tooltip,\n        // but actually to be able to select the next point (on touchscreen)\n        useTouchOutside(ref, deselect);\n        return tooltipData ? (\n            <>\n                {tooltipOpen && tooltipData && (\n                    // @ts-ignore\n                    <TooltipWithBounds\n                        top={tooltipTop}\n                        left={tooltipLeft}\n                        style={{\n                            ...defaultTooltipStyles,\n                            fontSize: '1em',\n                            padding: '0.6em',\n                            margin: '0.75em'\n                        }}\n                        className='tooltip MuiPaper-elevation5'\n                    >\n                        <div ref={ref}>\n                            {tooltipData}\n                        </div>\n                    </TooltipWithBounds>\n                )}\n            </>\n        ) : null;\n    });\n\n    const makeSelectable = React.useCallback((keyValues: any[], c, options= DEFAULT_OPTIONS) => {\n        // eslint-disable-next-line react-hooks/rules-of-hooks\n        const [{ animOpacity }, setAnim] = useSpring(() => ({\n            animOpacity: options.defaultOpacity,\n        }));\n        const isSelected = selectedKeys && matchesAllKeys(selectedKeys, keyValues);\n        const opacity = isSelected ? options.selectedOpacity : selectedKeys ? options.unselectedOpacity : options.defaultOpacity;\n        const animate = options.animate == null || options.animate === true;\n        if (animate) {\n            setAnim({animOpacity: opacity});\n            // return React.cloneElement(c, {\n            //     key: keyValues.join('_'),\n            //     fillOpacity: animOpacity.to(x => x),\n            //     strokeOpacity:  animOpacity.to(x => x)\n            // });\n            return (\n                <animated.g\n                    fillOpacity={animOpacity.to(x => x)}\n                    strokeOpacity={animOpacity.to(x => x)}\n                    key={keyValues.join('_')}\n                >\n                    {c}\n                </animated.g>\n            );\n        } else {\n            return React.cloneElement(c, {\n                ...c.props,\n                key: keyValues.join('_'),\n                fillOpacity: opacity,\n                strokeOpacity: opacity\n            });\n        }\n    }, [selectedKeys]);\n\n    const makeInteractive = React.useCallback((keyValues: KeyValue[], c) => {\n        if (disableInteraction) {\n            return c;\n        } else {\n            const callback = (event) => {\n                const resolvedKeyValues = keyValues.map(k => k instanceof Function ? k(event) : k);\n                select(resolvedKeyValues);\n            }\n            return React.cloneElement(c, {\n                ...c.props,\n                onTouchStart: callback,\n                onMouseMove: callback,\n                onMouseLeave: deselect\n            });\n        }\n    }, [select, deselect, disableInteraction]);\n\n    const makeSelectableAndInteractive = React.useCallback(\n        (keyValues: KeyValue[], c, options= DEFAULT_OPTIONS) => {\n            const concreteKeys = keyValues.filter(k => !(k instanceof Function))\n            return makeInteractive(keyValues, makeSelectable(concreteKeys, c, options));\n        }, [makeSelectable, makeInteractive]);\n\n    return {makeSelectable, makeInteractive, makeSelectableAndInteractive, Tooltip};\n};\n\nexport default useSelect;\n","import React from \"react\";\nimport {animated, useSprings} from 'react-spring';\nimport {scaleLinear, scalePower} from \"@visx/scale\";\nimport useSelect from \"../hooks/useSelect\";\nimport {FeatureRanges} from \"./config\";\n\nconst paddingPct = 0.1;\n\nexport type BubblePlotProps = {\n    data: any[],\n    featureRanges: FeatureRanges\n    showLabel?: string\n    disableInteraction?: boolean\n    width: number\n    height: number\n};\n\nconst BubblePlot = ({\n    data,\n    featureRanges,\n    showLabel = null,\n    disableInteraction = false,\n    width,\n    height\n}: BubblePlotProps) => {\n    const padding = Math.min(width, height) * paddingPct;\n    const xScale = React.useMemo(() =>\n        scaleLinear<number>({\n            domain: featureRanges.x,\n            range: [padding, width - padding],\n            round: true\n        }), [featureRanges, padding, width]);\n    const yScale = React.useMemo(() =>\n        scaleLinear<number>({\n            domain: featureRanges.y,\n            range: [height - padding / 2, padding],\n            round: true\n        }), [featureRanges, padding, height]);\n    const sizeScale = React.useMemo(() =>\n        scalePower<number>({\n            domain: [featureRanges.z[0] * 80, featureRanges.z[1] * 120],\n            range: [0.01 * (height - padding), 0.06 * (height - padding)],\n            exponent: 0.5\n        }), [featureRanges, padding, height]);\n    const items = data\n        .filter(v => v.x != null && v.y != null && v.z != null)\n        .map(v => ({\n            ...v,\n            scaledX: xScale(v.x),\n            scaledY: yScale(v.y),\n            size: sizeScale(v.z * 100)\n        }));\n\n    const {makeSelectableAndInteractive, Tooltip} =\n        useSelect(items, ['name'], showLabel, disableInteraction);\n    const animFn = index => ({\n        animX: items[index].scaledX,\n        animY: items[index].scaledY,\n        animSize: items[index].size\n    });\n    const [springs, api] = useSprings(items.length, animFn);\n    api.start(animFn);\n\n    return (\n        <>\n            <svg width={width} height={height}>\n                {items.map((item, i) => {\n                    return makeSelectableAndInteractive([item.name],\n                        <animated.circle\n                            cx={springs[i].animX}\n                            cy={springs[i].animY}\n                            r={springs[i].animSize}\n                            fill={item.color + 'EE'}\n                            stroke={item.color}\n                        />\n                    );\n                })}\n            </svg>\n            <Tooltip />\n        </>\n    );\n};\n\nexport default BubblePlot;\n","import React from 'react';\nimport { geoPath, geoAlbersUsa, geoCentroid } from 'd3-geo';\nimport {animated, useSprings} from 'react-spring';\nimport { AlbersUsa } from '@visx/geo';\nimport * as topojson from 'topojson-client';\nimport {zipObj} from \"ramda\";\nimport { hcl } from 'd3-color';\nimport { scaleLinear } from 'd3-scale';\nimport { interpolateHcl } from 'd3-interpolate';\nimport {useAppSelector} from \"../app/hooks\";\nimport useSelect from \"../hooks/useSelect\";\nimport {DataField, FeatureRanges} from \"./config\";\nimport {\n    selectArea, selectCurrentDivisions,\n    selectTopologies\n} from \"./selectors\";\n\nexport type MapPlotProps = {\n    data: any[]\n    featureRanges: FeatureRanges\n    width: number\n    height: number\n    yAxisVar: DataField\n    showLabel?: string\n    disableInteraction?: boolean\n};\n\ninterface FeatureShape {\n    type: 'Feature';\n    id: string;\n    geometry: { coordinates: topojson.Position[][]; type: 'MultiPolygon' };\n    properties: { };\n}\nconst projection = geoAlbersUsa();\nconst usMapOffset: [number, number] = [0.025, 0];\n\nconst opacityOptions = {\n    selectedOpacity: 1,\n    unselectedOpacity: 0.2,\n    defaultOpacity: 0.8,\n    animate: true\n};\n\nconst strokeFactor = 0.002;\n\nconst DumbMapPlot = ({ data, featureRanges, width, height, area, divisions, topologies,\n                         showLabel = null, disableInteraction = false }) => {\n    const scale = Math.round(Math.min(width, height) * 1.4);\n    const topoFeature = topojson.feature(topologies, topologies.objects.data);\n    const { features: featColl } = topoFeature as {\n        type: 'FeatureCollection';\n        features: FeatureShape[];\n    };\n    const colorScale = scaleLinear()\n        .domain(featureRanges.y)\n        // @ts-ignore\n        .range([\n            hcl('rgba(41,122,204,0.1)'),\n            hcl('#0265c9')])\n        // @ts-ignore\n        .interpolate(interpolateHcl)\n\n    const path = geoPath().projection(projection);\n    projection.scale(1).translate(area.id === 'us' ? usMapOffset : [0, 0]);\n    const b = path.bounds(topoFeature);\n    const s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height);\n    const t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];\n    projection.scale(s).translate([t[0], t[1]]);\n\n    const tempItems = data.map(v => ({\n        ...v,\n        ...divisions[v.geoid],\n        color: colorScale(v.y),\n    }));\n    const itemMap = zipObj(tempItems.map(d => d.geoid), tempItems);\n    const items = featColl.map(f => {\n        const c = projection(geoCentroid(f));\n        return {\n            ...itemMap[f.id],\n            scaledX: c[0],\n            scaledY: c[1]\n        };\n    });\n\n    const {makeSelectableAndInteractive, Tooltip} =\n        useSelect(items, ['name'], showLabel, disableInteraction);\n    const animFn = index => ({ animColor: items[index].color });\n    const [springs, api] = useSprings(items.length, animFn);\n    api.start(animFn);\n    return width < 10 ? null : (\n        <>\n            <svg width={width} height={height}>\n                <AlbersUsa<FeatureShape>\n                    data={featColl}\n                    scale={s}\n                    translate={[t[0], t[1]]}\n                >\n                    {({ features}) =>\n                        features\n                            .map(({ feature, path }, i) => {\n                                const item = itemMap[feature.id];\n                                if (!item) {\n                                    return null;\n                                }\n                                return makeSelectableAndInteractive([item.name],\n                                    <animated.path\n                                        className='map-poly'\n                                        d={path || ''}\n                                        fill={springs[i].animColor}\n                                        strokeWidth={item.name === 'Alaska' ? 0 : scale * strokeFactor}\n                                    />, opacityOptions\n                                )\n                            })\n                    }\n                </AlbersUsa>\n            </svg>\n            <Tooltip />\n        </>\n    );\n};\n\nconst MapPlot = (props: MapPlotProps) => {\n    const area = useAppSelector(selectArea);\n    const topologies = useAppSelector(selectTopologies);\n    const divisions = useAppSelector(selectCurrentDivisions);\n    return topologies &&\n      <DumbMapPlot {...props}\n                   area={area}\n                   divisions={divisions}\n                   topologies={topologies} />\n}\n\nexport default MapPlot;\n","import React from 'react';\nimport { LinePath } from '@visx/shape';\nimport {scaleLinear} from \"@visx/scale\";\nimport {GlyphCircle} from '@visx/glyph';\nimport { localPoint } from '@visx/event';\nimport { voronoi } from '@visx/voronoi';\nimport {groupBy, curry} from \"ramda\";\nimport useSelect from \"../hooks/useSelect\";\nimport {FeatureRanges} from \"./config\";\n\nconst hPaddingPct = 0.015;\nconst vPaddingPct = 0.1\n\nexport type LinePlotProps = {\n    data: any[]\n    featureRanges: FeatureRanges\n    showLabel?: string\n    disableInteraction?: boolean\n    width: number\n    height: number\n};\n\nconst lineOptions = {\n    selectedOpacity: 0.9,\n    unselectedOpacity: 0.15,\n    defaultOpacity: 0.6,\n    animate: true\n};\n\nconst pointOptions = {\n    selectedOpacity: 1,\n    unselectedOpacity: 0,\n    defaultOpacity: 0,\n    animate: false\n};\n\nconst LinePlot = ({\n    data,\n    featureRanges,\n    showLabel = null,\n    disableInteraction = false,\n    width,\n    height\n}: LinePlotProps) => {\n    const hPadding = React.useMemo(() =>\n            height * hPaddingPct,\n        [height]\n    );\n    const vPadding = React.useMemo(() =>\n            width * vPaddingPct,\n        [width]\n    );\n    const xScale = scaleLinear<number>({\n        domain: featureRanges.year,\n        range: [hPadding, width - hPadding],\n        round: true\n    });\n    const yScale = scaleLinear<number>({\n        domain: featureRanges.y,\n        range: [height - vPadding, vPadding],\n        round: true\n    });\n    const items = data\n        .map(d => ({\n            ...d,\n            scaledX: xScale(d.year),\n            scaledY: yScale(d.y),\n        }));\n\n    const lines = groupBy(d => d.name, items);\n    const lineKeys = Object.keys(lines);\n    const {makeSelectable, makeSelectableAndInteractive, Tooltip} =\n        useSelect(items, ['name', 'year'], showLabel, disableInteraction);\n    const scaledX = (d) => d.scaledX;\n    const scaledY = (d) => d.scaledY;\n    const strokeWidth = Math.max(Math.round(width / 150), 1);\n    const circleSize = Math.round(strokeWidth * 16);\n\n    const voronoiInstance = voronoi({\n        x: scaledX,\n        y: scaledY,\n        width,\n        height\n    });\n\n    const findNearest = (line, event) => {\n        const point = localPoint(event);\n        const nearest = voronoiInstance(line).find(point.x, point.y).data;\n        return nearest.year;\n    };\n\n    return (\n        <>\n            <svg width={width} height={height}>\n                <>\n                    {lineKeys.map((key) => {\n                        const line = lines[key];\n                        return (\n                            <g key={key}>\n                                {makeSelectableAndInteractive([line[0].name, curry(findNearest)(line)],\n                                    <LinePath\n                                    data={line}\n                                    x={(point: any) => point.scaledX}\n                                    y={(point: any) => point.scaledY}\n                                    stroke={line[0].color}\n                                    strokeWidth={strokeWidth}\n                                    />, lineOptions\n                                )}\n                                {line.map(point => makeSelectable([point.name, point.year],\n                                    <GlyphCircle\n                                    left={point.scaledX}\n                                    top={point.scaledY}\n                                    fill={point.color}\n                                    stroke='#FFFFFF'\n                                    size={circleSize}\n                                    strokeWidth={Math.max(strokeWidth / 3, 1)}\n                                    />, pointOptions\n                                ))}\n                            </g>\n                        );\n                    })}\n                </>\n            </svg>\n            <Tooltip />\n        </>\n    );\n};\n\nexport default LinePlot;\n","import React from \"react\";\nimport {scaleBand, scaleLinear} from \"@visx/scale\";\nimport useSelect from \"../hooks/useSelect\";\nimport {animated, useSprings} from 'react-spring';\nimport {range} from 'ramda';\nimport {FeatureRanges, PCT_V_SPACE_LEFT_FOR_LEGEND} from \"./config\";\n\nconst hPaddingPct = 0.015;\nconst vPaddingPct = 0.02\n\nexport type BarPlotProps = {\n    data: any[]\n    featureRanges: FeatureRanges\n    showLabel?: string\n    disableInteraction?: boolean\n    width: number\n    height: number\n};\n\nconst getHeightAdjustment = (featureRanges: FeatureRanges, height: number, startAtZero: boolean = true) : number => {\n    const domain = featureRanges.y[1] - (startAtZero ? 0 : featureRanges.y[0]);\n    const pctOfLowest = featureRanges.y[0] / domain;\n    const range = 1 - PCT_V_SPACE_LEFT_FOR_LEGEND;\n    return height - Math.min(height, height * (range / pctOfLowest));\n};\n\nconst BarPlot = ({\n    data,\n    featureRanges,\n    showLabel = null,\n    disableInteraction = false,\n    width,\n    height\n}: BarPlotProps) => {\n    const hPadding = React.useMemo(() =>\n        Math.min(width, height) * hPaddingPct,\n        [width, height]\n    );\n    const vPadding = React.useMemo(() =>\n        Math.min(width, height) * vPaddingPct,\n        [width, height]\n    );\n    const heightAdjustment = getHeightAdjustment (featureRanges, height);\n    const yScale = React.useMemo(() => scaleLinear<number>({\n        domain: [0, featureRanges.y[1]],\n        range: [height - vPadding, heightAdjustment + vPadding],\n        round: true\n    }), [height, heightAdjustment, vPadding, featureRanges]);\n    const tempItems: any[] = data\n        .map(v => ({\n            ...v,\n            scaledY: yScale(v.y)\n        }))\n        .sort((a, b) => a.scaledY - b.scaledY);\n    const xScale = React.useMemo(() => scaleBand<number>({\n        range: [hPadding, width - hPadding],\n        round: false,\n        domain: range(0, tempItems.length),\n        padding: 0.25,\n    }), [tempItems, hPadding, width]);\n    const items = tempItems.map((item, i) => ({\n        ...item,\n        scaledX: xScale(i)\n    }))\n    const {makeSelectableAndInteractive, Tooltip} =\n        useSelect(items, ['name'], showLabel, disableInteraction);\n    const animFn = index => ({\n        animY: items[index].scaledY,\n        animHeight: height - items[index].scaledY\n    });\n    const [springs, api] = useSprings(items.length, animFn);\n    api.start(animFn);\n    return (\n        <>\n            <svg width={width} height={height - vPadding}>\n                {items.map((item, i) => {\n                    return makeSelectableAndInteractive([item.name],\n                        <animated.rect\n                            y={springs[i].animY}\n                            height={springs[i].animHeight}\n                            x={item.scaledX}\n                            width={xScale.bandwidth()}\n                            fill={item.color}\n                        />\n                    )\n                })}\n            </svg>\n            <Tooltip />\n        </>\n    );\n};\n\nexport default BarPlot;\n","\n\nexport const setSearchPart = (s: string) => {\n    const parts = window.location.hash.split('?');\n    window.location.hash = [parts[0], s.replace('?', '')].join('?');\n};\n","import React from \"react\";\nimport useMediaQuery from '@mui/material/useMediaQuery';\nimport useDarkMode from 'use-dark-mode';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\n// import {TransitionProps} from \"@mui/material/transitions\";\nimport {\n    Button,\n    // Collapse,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    FormControl,\n    FormGroup,\n    IconButton,\n    InputLabel,\n    NativeSelect,\n    TextField\n} from \"@mui/material\";\nimport {\n    FacebookIcon,\n    FacebookShareButton,\n    LinkedinIcon,\n    LinkedinShareButton,\n    PinterestIcon,\n    PinterestShareButton,\n    RedditIcon,\n    RedditShareButton,\n    TwitterIcon,\n    TwitterShareButton,\n} from \"react-share\";\nimport FileCopyOutlinedIcon from '@mui/icons-material/FileCopyOutlined';\nimport * as htmlToImage from 'html-to-image';\nimport {\n    Area,\n    AxisLabelSource, PlotType,\n    SHARE_SIZE_MAP,\n    SHARE_SIZES\n} from \"./config\";\nimport {useAppSelector} from \"../app/hooks\";\nimport {selectPlotType} from \"../features/plotType/plotTypeSlice\";\nimport {selectYear} from \"../features/year/yearSlice\";\nimport {selectArea} from \"./selectors\";\nimport './sharing.scss';\nimport {useTheme} from \"@mui/system\";\nimport {useLocation} from \"react-router-dom\";\nimport {setSearchPart} from \"./utils/url\";\n\nconst SCALE = 1;\nconst MAX_PREVIEW_WIDTH = 208 / SCALE;\nconst MAX_PREVIEW_HEIGHT = 208 / SCALE;\n\nconst calculatePreviewSize = ({width, height}) => {\n    const ratio = height / width;\n    const h1 = Math.min(ratio * MAX_PREVIEW_WIDTH, MAX_PREVIEW_HEIGHT);\n    const w = Math.min(h1 / ratio, MAX_PREVIEW_WIDTH);\n    const h = Math.min(w * ratio);\n    return {width: w, height: h};\n};\n\n// const ShareTransition = React.forwardRef(function Transition(\n//     props: TransitionProps & { children?: React.ReactElement<any, any> },\n//     ref: React.Ref<unknown>,\n// ) {\n//     return <Collapse ref={ref} {...props} timeout={500} />;\n// });\n\nconst BaseDialog = ({isOpen, setOpen, children, fullScreen=false}) => {\n    const [alreadyOpen, setAlreadyOpen] = React.useState(false);\n    const {search} = useLocation();\n\n    React.useEffect(() => {\n        if (isOpen) {\n            if (!search.includes('dialog=open')) {\n                if (alreadyOpen) {\n                    setOpen(false);\n                    setAlreadyOpen(false);\n                } else {\n                    setSearchPart([search, 'dialog=open'].join('&'));\n                    setAlreadyOpen(true);\n                }\n            }\n        }\n    }, [search, setOpen, isOpen, alreadyOpen]);\n\n    return (\n        <Dialog\n            className='share-dialog'\n            open={isOpen}\n            onClose={() => {\n                setOpen(false);\n                window.history.back();\n            }}\n            fullScreen={fullScreen}\n            keepMounted\n        >\n            {children}\n        </Dialog>\n    );\n};\n\nconst createPlotTitle = (plotType: PlotType,\n                         area: Area,\n                         year: number,\n                         compares: { name: string }[],\n                         xAxisLabel: string,\n                         yAxisLabel: string) => {\n    const cs = compares.length > 0 ? ' by ' + compares.map(c => c.name).join('/') : ''\n    return (!plotType.xAxisLabelSource || plotType.xAxisLabelSource === AxisLabelSource.COMPARE ?\n        yAxisLabel + cs :\n        yAxisLabel + ' / ' + xAxisLabel.toLowerCase() + cs) +\n        (plotType.name === 'line' ? '' : ` (${area.abbrev}, ${year})`)\n};\n\nexport const DumbImageDialog = ({plot, isOpen, setOpen, label, setLabel, pageInDarkMode,\n                                compares, xAxisLabel, yAxisLabel, showAxisLabels,\n                                plotType, area, year, items}) => {\n    const plotTitle = createPlotTitle(plotType, area, year, compares, xAxisLabel, yAxisLabel);\n    const defaultShareSize = SHARE_SIZES[0];\n    const [sharePresetSize, setSharePresetSize] = React.useState(defaultShareSize);\n    const [previewSize, setPreviewSize] = React.useState({\n        width: MAX_PREVIEW_WIDTH,\n        height: MAX_PREVIEW_HEIGHT\n    });\n    const [shareSize, setShareSize] = React.useState({\n        width: defaultShareSize.width,\n        height: defaultShareSize.height\n    });\n    const [format, setFormat] = React.useState('PNG');\n    const [imgData, setImgData] = React.useState<string>(null);\n    const fontSize = Math.round(previewSize.width / 40);\n    const theme = useTheme();\n    const fullScreen = useMediaQuery(theme.breakpoints.down('sm'));\n    const [darkModeState, setDarkModeState] = React.useState(pageInDarkMode);\n    const darkModeRef = React.useRef({});\n    darkModeRef.current = darkModeState;\n\n    const ImagePreview = () => {\n        const darkMode = useDarkMode(pageInDarkMode, {\n            classNameDark: 'preview-dark-mode',\n            classNameLight: 'preview-light-mode',\n            storageKey: 'previewDarkMode'\n        });\n        React.useEffect(() => {\n            darkModeRef.current ? darkMode.enable() : darkMode.disable();\n        }, [darkMode]);\n        return (\n            <div className='gen-target'>\n                <div className='plot-frame'>\n                    <div className='title'>{plotTitle}</div>\n                    <div className='subtitle'>\n                        Statistipedia: statistipedia.org/explore\n                    </div>\n                    {plot}\n                </div>\n                { showAxisLabels && xAxisLabel &&\n                  <div className='x-axis'>\n                      {xAxisLabel || 'Year'}\n                  </div>\n                }\n                { showAxisLabels && yAxisLabel &&\n                  <div className='y-axis'>\n                      {yAxisLabel}\n                  </div>\n                }\n            </div>\n        );\n    };\n\n    const canvasToPng = (canvas) => {\n        return canvas.toDataURL(\"image/png\", 1.0);\n    };\n\n    const getGenerateFn = () => {\n        switch (format) {\n            case 'PNG': return htmlToImage.toPng;\n            case 'SVG': return htmlToImage.toSvg;\n            default: throw Error('Unhandled format: ' + format);\n        }\n    };\n\n    const GenerateDialog = ({setImgData}) => {\n        const generate = () => {\n            const el: any = document\n                .getElementById('preview')\n                .getElementsByClassName('gen-target')[0];\n            getGenerateFn()(el, {\n                canvasWidth: shareSize.width,\n                canvasHeight: shareSize.height,\n                pixelRatio: 1,\n                width: el.clientWidth,\n                height: el.clientHeight,\n                // skipAutoScale: true,\n                style: {\n                    transform: 'scale(1)'\n                }\n            }).then((dataUrl) => {\n                setImgData(dataUrl);\n            });\n        };\n\n        const setNewSize = (newSize) => {\n            setShareSize(newSize);\n            setPreviewSize(calculatePreviewSize(newSize));\n        };\n\n        const onPresetSizeSelect = (event) => {\n            const name = event.target.value;\n            if (name === 'Custom') {\n                setSharePresetSize(null);\n                document\n                    .getElementsByClassName('MuiDialog-container')[0]\n                    .getElementsByClassName('MuiPaper-root')[0]\n                    .scrollTo(0, 9999);\n            } else {\n                const s = SHARE_SIZE_MAP[name];\n                setSharePresetSize(s);\n                setNewSize(s);\n            }\n        };\n\n        const onSizeChange = (newSize) => {\n            setSharePresetSize(null);\n            setNewSize(newSize);\n        };\n\n        // const onLabelChange = (event) => {\n        //     const value = event.target.value;\n        //     setLabel(value === ' ' ? null : value);\n        // };\n\n        const onFormatChange = (event) => {\n            const value = event.target.value;\n            setFormat(value);\n        };\n\n        const onModeChange = (event) => {\n            const value = event.target.value;\n            const b = value === 'Dark'\n            setDarkModeState(b);\n        };\n\n        return (\n            <>\n                <div className='dialog-title'>Generate image</div>\n                <DialogContent className='dialog-content'>\n                    <div id='preview-container'>\n                        <div id='preview' style={{...previewSize, fontSize}}>\n                            <ImagePreview />\n                        </div>\n                        <div className=\"MuiFormLabel-root caption\">\n                            Preview\n                        </div>\n                    </div>\n                    <div className='share-controls'>\n                        <div className='size-inputs'>\n                            <FormControl>\n                                <InputLabel variant=\"standard\" htmlFor=\"preset-size\">Size</InputLabel>\n                                <NativeSelect id=\"preset-size\"\n                                              onChange={onPresetSizeSelect}\n                                              value={sharePresetSize ? sharePresetSize.name : 'Custom'}>\n                                    <optgroup label=\"Presets\">\n                                        {SHARE_SIZES.map((s) => (\n                                            <option key={s.name}>{s.name}</option>\n                                        ))}\n                                    </optgroup>\n                                    <option>Custom</option>\n                                </NativeSelect>\n                            </FormControl>\n                            <FormGroup row className='custom-size-inputs top-padded row'>\n                                {['width', 'height'].map((s) => (\n                                    <FormControl key={s} className='top-padded custom-size-input'>\n                                        <TextField helperText={s}\n                                                   variant=\"standard\"\n                                                   onChange={(event) =>\n                                                       onSizeChange({...shareSize, [s]: event.target.value})}\n                                                   value={shareSize[s]} />\n                                    </FormControl>\n                                ))}\n                            </FormGroup>\n                            {/*<FormGroup row className='row'>*/}\n                            {/*    <FormControl className=\"form-control\">*/}\n                            {/*        <InputLabel variant=\"standard\" htmlFor=\"label\">Labeled item</InputLabel>*/}\n                            {/*        <NativeSelect id=\"label\"*/}\n                            {/*                      value={label ? label : ' '}*/}\n                            {/*                      onChange={onLabelChange}>*/}\n                            {/*            <option value=' ' />*/}\n                            {/*            {items.map(({name}) => (*/}\n                            {/*                <option key={name}>{name}</option>*/}\n                            {/*            ))}*/}\n                            {/*        </NativeSelect>*/}\n                            {/*    </FormControl>*/}\n                            {/*</FormGroup>*/}\n                            <FormGroup row className='top-padded row'>\n                                <FormControl className=\"form-control\">\n                                    <InputLabel variant=\"standard\" htmlFor=\"format\">Format</InputLabel>\n                                    <NativeSelect id=\"format\"\n                                                  value={format}\n                                                  onChange={onFormatChange}\n                                    >\n                                        <option>PNG</option>\n                                        <option>SVG</option>\n                                    </NativeSelect>\n                                </FormControl>\n                                <FormControl className=\"form-control\">\n                                    <InputLabel variant=\"standard\" htmlFor=\"light_dark\">\n                                        Mode\n                                    </InputLabel>\n                                    <NativeSelect id=\"light_dark\"\n                                                  value={darkModeRef.current ? 'Dark' : 'Light'}\n                                                  onChange={onModeChange}>\n                                        <option>Light</option>\n                                        <option>Dark</option>\n                                    </NativeSelect>\n                                </FormControl>\n                            </FormGroup>\n                            {/*<FormControl className=\"form-control\">*/}\n                            {/*    <FormControlLabel*/}\n                            {/*        control={*/}\n                            {/*            <Switch*/}\n                            {/*                color=\"primary\"*/}\n                            {/*            />*/}\n                            {/*        }*/}\n                            {/*        label=\"Add QR code\"*/}\n                            {/*    />*/}\n                            {/*</FormControl>*/}\n                        </div>\n                    </div>\n                </DialogContent>\n                <DialogActions className='dialog-actions'>\n                    <Button onClick={() => window.history.back()}>Close</Button>\n                    <Button onClick={generate}>Generate</Button>\n                </DialogActions>\n            </>\n        );\n    };\n\n    const DownloadDialog = ({imgData, setImgData}) => {\n        const url = window.location.href;\n\n        // const share = () => {\n        //     if (navigator.share) {\n        //         navigator.share({\n        //             title: 'web.dev',\n        //             text: 'Check out web.dev.',\n        //             // url: 'https://web.dev/',\n        //             files: [image]\n        //         })\n        //             .then(() => alert('Successful share'))\n        //             .catch((error) => alert(error));\n        //     }\n        // };\n        return (\n            <>\n                <div className='dialog-title'>Download image</div>\n                <DialogContent className='dialog-content'>\n                    <div className='generated-image'>\n                        <a download={plotTitle} href={imgData}>\n                            <img alt=\"Generated\" src={imgData} />\n                        </a>\n                    </div>\n                    <div className='share-controls'>\n                        <div className='image-share-btns'>\n                            <div className='image-share-btn'>\n                                <PinterestShareButton\n                                    url={url}\n                                    media={imgData}\n                                >\n                                    <PinterestIcon round />\n                                    <div style={{color: '#C9242E'}}>\n                                        Share on Pinterest\n                                    </div>\n                                </PinterestShareButton>\n                            </div>\n                        </div>\n                    </div>\n                </DialogContent>\n                <DialogActions className='dialog-actions'>\n                    <Button onClick={() => setImgData(null)}>Back</Button>\n                    <Button onClick={() => window.history.back()}>Close</Button>\n                    <Button href={imgData} download={plotTitle}>Download</Button>\n                </DialogActions>\n            </>\n        )\n    };\n    return (\n        <BaseDialog isOpen={isOpen} setOpen={setOpen} fullScreen={fullScreen}>\n            {imgData\n                ? <DownloadDialog imgData={imgData} setImgData={setImgData} />\n                : <GenerateDialog setImgData={setImgData} />\n            }\n        </BaseDialog>\n    )\n}\n\nexport const ImageDialog = (props) => {\n    const plotType = useAppSelector(selectPlotType);\n    const area = useAppSelector(selectArea);\n    const year = useAppSelector(selectYear);\n    const items = [];  // TODO: Needs to provide the same items provided to the specific plot type\n    return <DumbImageDialog {...props}\n                            plotType={plotType}\n                            area={area}\n                            year={year}\n                            items={items} />\n};\n\nexport const BasicShareDialog = ({isOpen, setOpen, title='Statistipedia Explore'}) => {\n    const url = window.location.href;\n    return (\n        <BaseDialog isOpen={isOpen} setOpen={setOpen}>\n            <>\n                <div className='dialog-header'>\n                    <div className='dialog-title'>Share</div>\n                </div>\n                <DialogContent className='dialog-content'>\n                    <div className='social-btns'>\n                        <FacebookShareButton\n                            url={url}\n                            quote={title}\n                        >\n                            <FacebookIcon round />\n                        </FacebookShareButton>\n                        <TwitterShareButton\n                            url={url}\n                            title={title}\n                        >\n                            <TwitterIcon round />\n                        </TwitterShareButton>\n                        <RedditShareButton\n                            url={url}\n                            title={title}\n                        >\n                            <RedditIcon round />\n                        </RedditShareButton>\n                        <LinkedinShareButton url={url}>\n                            <LinkedinIcon round />\n                        </LinkedinShareButton>\n                    </div>\n                    <div style={{display: 'flex'}}>\n                        <TextField value={url} />\n                        <CopyToClipboard onCopy={() => {}} text={url}>\n                            <IconButton aria-label=\"copy\"\n                                        className='copy-btn'\n                                        title='Copy to clipboard'>\n                                <FileCopyOutlinedIcon />\n                            </IconButton>\n                        </CopyToClipboard>\n                    </div>\n                </DialogContent>\n                <DialogActions className='dialog-actions'>\n                    <Button onClick={() => window.history.back()}>Close</Button>\n                </DialogActions>\n            </>\n        </BaseDialog>\n    );\n};\n\nexport const SharePlotDialog  = ({isOpen, setOpen, compares, xAxisLabel, yAxisLabel}) => {\n    const plotType = useAppSelector(selectPlotType);\n    const area = useAppSelector(selectArea);\n    const year = useAppSelector(selectYear);\n    const plotTitle = createPlotTitle(plotType, area, year, compares, xAxisLabel, yAxisLabel);\n    return <BasicShareDialog isOpen={isOpen} setOpen={setOpen} title={plotTitle} />;\n};\n","import React from 'react';\nimport { useAppSelector, useAppDispatch } from '../../app/hooks';\nimport { setYear, selectYear } from './yearSlice';\nimport {Box, Slider} from \"@mui/material\";\nimport {styled} from \"@mui/system\";\nimport {selectPlotType} from \"../plotType/plotTypeSlice\";\nimport {last} from 'ramda';\nimport './YearSlider.scss';\nimport {selectYears} from \"../data/dataSlice\";\n\nconst PrettoSlider = styled(Slider)({\n    color: '#318Cf6',\n    height: 8,\n    '& .MuiSlider-track': {\n        border: 'none',\n    },\n    '& .MuiSlider-thumb': {\n        height: 24,\n        width: 24,\n        backgroundColor: '#fff',\n        border: '2px solid currentColor',\n        '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\n            boxShadow: 'inherit',\n        },\n        '&:before': {\n            display: 'none',\n        },\n    },\n    '& .MuiSlider-valueLabel': {\n        lineHeight: 1.2,\n        fontSize: 12,\n        background: 'unset',\n        padding: 0,\n        width: 32,\n        height: 32,\n        borderRadius: '50% 50% 50% 0',\n        backgroundColor: '#318Cf6',\n        transformOrigin: 'bottom left',\n        transform: 'translate(50%, -100%) rotate(-45deg) scale(0)',\n        '&:before': { display: 'none' },\n        '&.MuiSlider-valueLabelOpen': {\n            transform: 'translate(50%, -100%) rotate(-45deg) scale(1)',\n        },\n        '& > *': {\n            transform: 'rotate(45deg)',\n        },\n    },\n    '& .Mui-disabled .MuiSlider-valueLabel': {\n        display: 'none'\n    }\n});\n\nconst YearSlider = () => {\n    const year = useAppSelector(selectYear);\n    const plotType = useAppSelector(selectPlotType);\n    const years = useAppSelector(selectYears);\n    const dispatch = useAppDispatch();\n\n    return plotType && years && year && (\n        <Box sx={{\n            flex: '1 1'\n        }}>\n            <PrettoSlider\n                className='custom-slider'\n                value={year}\n                min={years[0]}\n                max={last(years)}\n                step={1}\n                disabled={plotType.name === 'line'}\n                valueLabelDisplay=\"on\"\n                onChange={(event, y: number) => {\n                    if (year !== y) {\n                        dispatch(setYear(y))\n                    }\n                }}\n                sx={{\n                    paddingTop: '20px',\n                    '& .MuiSlider-markLabel': {\n                        top: '40px'\n                    }\n                }}\n            />\n        </Box>\n    );\n}\n\nexport default YearSlider;\n","import PlaceIcon from \"@mui/icons-material/Place\";\nimport {ReactComponent as CompareIconSrc} from \"./icons/Compare.svg\";\nimport {ReactComponent as CompareDiffIconSrc} from \"./icons/CompareDiff.svg\";\nimport TagIcon from \"@mui/icons-material/Tag\";\nimport AccessTimeFilledIcon from '@mui/icons-material/AccessTimeFilled';\nimport CalendarMonthIcon from '@mui/icons-material/CalendarMonth';\nimport TimelapseIcon from '@mui/icons-material/Timelapse';\nimport PaidIcon from '@mui/icons-material/Paid';\nimport {SvgIcon} from \"@mui/material\";\nimport BubbleChartIcon from \"@mui/icons-material/BubbleChart\";\nimport DoDisturbIcon from '@mui/icons-material/DoDisturb';\nimport TimelineIcon from \"@mui/icons-material/Timeline\";\nimport BarChartIcon from \"@mui/icons-material/BarChart\";\nimport RoomIcon from \"@mui/icons-material/Room\";\n\nconst makeIcon = (iconSrc) => () => (\n    <SvgIcon component={iconSrc} viewBox=\"0 0 256 256\" />\n);\n\nexport const FIELD_TYPE_ICONS_MAP: {[name: string]: any} = {\n    'geo': PlaceIcon,\n    'numeric': makeIcon(CompareIconSrc),\n    'nominal': makeIcon(CompareIconSrc),\n    'ordinal': makeIcon(CompareIconSrc),\n    'percent': TimelapseIcon,\n    'dollars': PaidIcon,\n    'minutes': AccessTimeFilledIcon,\n    'hours': AccessTimeFilledIcon,\n    'years': CalendarMonthIcon,\n    'none': DoDisturbIcon,\n    'default': TagIcon\n};\n\nexport const PLOT_TYPE_ICONS_MAP: {[name: string]: typeof SvgIcon} = {\n    'bubble': BubbleChartIcon,\n    'line': TimelineIcon,\n    'bar': BarChartIcon,\n    'map': RoomIcon\n};\n","import {ToggleButton, ToggleButtonGroup} from \"@mui/material\";\nimport {PLOT_TYPES} from \"../../dashboard/config\";\nimport React from \"react\";\nimport {useAppDispatch, useAppSelector} from \"../../app/hooks\";\nimport {selectPlotType, setPlotType} from \"./plotTypeSlice\";\nimport {PLOT_TYPE_ICONS_MAP} from \"../../dashboard/icons\";\n\n\nconst PlotTypeSelect = () => {\n    const plotType = useAppSelector(selectPlotType);\n    const dispatch = useAppDispatch();\n\n    const changePlotType = (event, name) => {\n        dispatch(setPlotType(name));\n    }\n\n    return (\n        <div className='plot-type'>\n            <ToggleButtonGroup size='small'\n                               value={plotType.name}\n                               exclusive\n                               onChange={changePlotType}>\n                {PLOT_TYPES.map((pt) => {\n                    const Icon = PLOT_TYPE_ICONS_MAP[pt.name];\n                    return (\n                        <ToggleButton key={pt.name} value={pt.name}>\n                            {<Icon />}\n                        </ToggleButton>\n                    );\n                })}\n            </ToggleButtonGroup>\n        </div>\n    );\n};\n\nexport default PlotTypeSelect;\n","import PlotTypeSelect from \"../plotType/PlotTypeSelect\";\nimport {\n    Autocomplete, Button,\n    Divider, Drawer,\n    FormControl, Input, InputAdornment,\n    InputLabel, List, ListItem, ListItemText, Menu, MenuItem, MenuList,\n    NativeSelect, Select, ListItemIcon,\n    TextField, IconButton\n} from \"@mui/material\";\nimport React, {ChangeEvent, useEffect} from \"react\";\nimport {useAppDispatch, useAppSelector} from \"../../app/hooks\";\nimport {setControls} from \"./controlsSlice\";\nimport {selectPlotType} from \"../plotType/plotTypeSlice\";\nimport {\n    selectAreas,\n    selectAllCompareByFieldDetails,\n    selectNumericFields, selectLevels\n} from \"../data/dataSlice\";\nimport {selectControlFields} from \"../../dashboard/selectors\";\nimport {allValuesNotNull, capitalize} from \"../../dashboard/utils/misc\";\nimport {groupBy, curry, zipObj} from \"ramda\";\nimport {\n    BOTTOM_DRAWER_CORNER,\n    BOTTOM_DRAWER_HEIGHT, CompareByField,\n    DataField\n} from \"../../dashboard/config\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport {useTheme} from \"@mui/system\";\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport './Controls.scss';\nimport {FIELD_TYPE_ICONS_MAP} from \"../../dashboard/icons\";\nimport Cached from \"@mui/icons-material/Cached\";\n\ntype FieldOption = DataField & {\n    disabled: boolean\n}\n\ntype FieldGroup = {\n    name: string,\n    fields: FieldOption[]\n};\n\nconst groupFields = (fields: any[]) : FieldGroup[] => {\n    const gs = groupBy(f => f.group, fields);\n    return Object.keys(gs).map(k => ({ name: k, fields: gs[k] }));\n};\n\nconst DrawerFieldSelect = ({children, title, open, setOpen}) => {\n    useEffect(() => {\n        document.body.style.position = open ? 'fixed' : 'initial';\n    }, [open]);\n\n    return (\n        <Drawer\n            anchor='bottom'\n            PaperProps={{\n                style: {\n                    height: BOTTOM_DRAWER_HEIGHT,\n                    borderRadius: `${BOTTOM_DRAWER_CORNER}px ${BOTTOM_DRAWER_CORNER}px 0 0`\n                }\n            }}\n            ModalProps={{\n                keepMounted: true\n            }}\n            open={open}\n            onClose={() => setOpen(false)}\n        >\n            <div>\n                <div className='select-drawer-bar'>\n                    <div className='title'>{title}</div>\n                    <div className='actions'>\n                        <Button onClick={() => setOpen(false)}>Close</Button>\n                    </div>\n                </div>\n                <div className='select-drawer-content'>\n                    {children}\n                </div>\n            </div>\n        </Drawer>\n    );\n};\n\nconst MenuFieldSelect = ({children, anchorEl, setAnchorEl}) => (\n    <Menu\n        variant=\"menu\"\n        anchorEl={anchorEl}\n        open={anchorEl != null}\n        onClose={() => setAnchorEl(null)}\n        MenuListProps={{\n            role: 'listbox',\n        }}\n    >\n        {children}\n    </Menu>\n);\n\nconst FieldSelect = ({children, title, anchorEl, setAnchorEl}) => {\n    const theme = useTheme();\n    const useDrawer = useMediaQuery(theme.breakpoints.down('md'));\n    return useDrawer ? (\n        <DrawerFieldSelect title={title}\n                           open={anchorEl != null}\n                           setOpen={() => setAnchorEl(null)}>\n            {children}\n        </DrawerFieldSelect>\n    ) : (\n        <MenuFieldSelect anchorEl={anchorEl}\n                         setAnchorEl={setAnchorEl}>\n            {children}\n        </MenuFieldSelect>\n    )\n};\n\nconst BaseFieldSelect = ({field, options, onChange, disabled=false, label,\n                             value, className=undefined} :\n                             {field: string, options: FieldGroup[], onChange,\n                                 disabled?: boolean, label: string,\n                                 value: string, className?: string}) => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const handleClickListItem = (event) => {\n        !disabled && setAnchorEl(event.currentTarget);\n    };\n    return (\n        <div>\n            <FormControl className=\"form-control\" disabled={disabled}>\n                <InputLabel variant=\"standard\" htmlFor={`field-${field}`}>\n                    {label}\n                </InputLabel>\n                <div className={`${disabled ? 'Mui-disabled ': ''}${className ? className + ' ' : ''}custom-select MuiInput-root MuiInput-underline MuiInputBase-root MuiInputBase-colorPrimary MuiInputBase-formControl MuiSelect-root`}\n                     onClick={handleClickListItem}>\n                    <div role=\"button\" aria-expanded=\"false\"\n                         aria-haspopup=\"listbox\" aria-labelledby=\"compare-by-1\"\n                         id=\"compare-by-1\"\n                         className=\"MuiSelect-select MuiSelect-standard MuiInput-input MuiInputBase-input\">\n                        {value}\n                    </div>\n                    <ArrowDropDownIcon className='adornment' />\n                    <Input id={`field-${field}`}\n                           className=\"MuiSelect-nativeInput css-yf8vq0-MuiSelect-nativeInput\"\n                           type='hidden'\n                           value={value}\n                           aria-hidden=\"true\"\n                    />\n                </div>\n            </FormControl>\n            <FieldSelect title={label} anchorEl={anchorEl} setAnchorEl={setAnchorEl}>\n                {options.flatMap((g, i) => [\n                    i > 0 ? <Divider key={`${g.name}_divider`} /> : null,\n                    <MenuItem disabled={true}\n                              key={`${g.name}_header`}\n                              className='menu-group-header'>\n                        {g.name}\n                    </MenuItem>,\n                    ...g.fields.map(f => {\n                        const Icon = FIELD_TYPE_ICONS_MAP[f.type] || FIELD_TYPE_ICONS_MAP.default;\n                        return (\n                            <MenuItem key={f.id}\n                                      value={f.id}\n                                      selected={f.name === value}\n                                      disabled={f.disabled}\n                                      onClick={() => onChange({[field]: f.id})}>\n                                <ListItemIcon>\n                                    <Icon/>\n                                </ListItemIcon>\n                                <ListItemText primary={f.name}\n                                              secondary={f.description}/>\n                            </MenuItem>\n                        )\n                    })\n                ])}\n            </FieldSelect>\n        </div>\n    );\n};\n\nconst Controls = () => {\n    const plotType = useAppSelector(selectPlotType);\n    const controls = useAppSelector(selectControlFields);\n    const controlsIsReady = allValuesNotNull(controls);\n    const numericFields = useAppSelector(selectNumericFields);\n    const compareByFields = useAppSelector(selectAllCompareByFieldDetails);\n    const areas = useAppSelector(selectAreas);\n    const levels = useAppSelector(selectLevels);\n    const dispatch = useAppDispatch();\n\n    const disableUsedCompares = (fields: CompareByField[]) : CompareByField[] => {\n        const used = controls.compare.map(c => c.id);\n        return fields.map(f => ({\n            ...f,\n            disabled: used.includes(f.id)\n        }));\n    };\n\n    const addRecents = (fields: CompareByField[]) : CompareByField[] => {\n        const none = {\n            id: 'none',\n            type: 'none',\n            name: 'None',\n            description: 'Clear field',\n            group: 'Recently used',\n            values: {}\n        };\n        return [none, ...fields];\n    }\n\n    const numericFieldGroups = groupFields(numericFields);\n    const compareByGroups = groupFields(addRecents(disableUsedCompares(compareByFields)));\n\n    const updateState = (newState: {[key: string]: any}) => {\n        return dispatch(setControls(zipObj(Object.keys(newState), Object.values(newState))));\n    };\n\n    const updateCompare = (i: number, newState: {[key: string]: any}) => {\n        const newNewState = newState;\n        const k = Object.keys(newState)[0];\n        const v = Object.values(newState)[0];\n        if (v === 'none') {\n            switch (i) {\n                case 0: newNewState[k] = controls.compare.length === 2 ?\n                    [controls.compare[1].id] : []; break;\n                case 1: newNewState[k] = [controls.compare[0].id]; break;\n                default: throw new Error('Unexpected compare index: ' + i)\n            }\n        } else {\n            switch (i) {\n                case 0: newNewState[k] = controls.compare.length === 2 ?\n                    [v, controls.compare[1].id] : [v]; break;\n                case 1: newNewState[k] = [controls.compare[0].id, v]; break;\n                default: throw new Error('Unexpected compare index: ' + i)\n            }\n        }\n        return updateState(newNewState);\n    };\n\n    const switchCompares = () => {\n        const newState = {\n            'compare': [controls.compare[1].id, controls.compare[0].id]\n        };\n        return(updateState(newState));\n    };\n\n    const CompareByFieldSelect = ({i}: {i: number}) => (\n        <BaseFieldSelect field={`compare`}\n                         className='compare-by'\n                         options={compareByGroups}\n                         onChange={curry(updateCompare)(i)}\n                         disabled={plotType.name === 'map' || i > controls.compare.length}\n                         label='Compare by'\n                         value={controls.compare[i]?.name || ' '}\n        />\n    );\n\n    const FieldSelect = ({field} : {field: string}) => (\n        <BaseFieldSelect field={field}\n                         options={numericFieldGroups}\n                         onChange={updateState}\n                         disabled={!plotType.fields[field]}\n                         label={plotType.fields[field] || `${field.toUpperCase()}-Axis`}\n                         value={controls[field].name}\n        />\n    );\n\n    const BasicSelect =\n        ({field, options, disabled=false,\n             onChange=(e) => updateState({[field]: e.target.value})} :\n             {field: string, options: {allIds: string[], byId}, disabled?: boolean,\n             onChange?: (e: ChangeEvent<HTMLSelectElement>) => void}) => (\n        <FormControl className=\"form-control\" disabled={disabled}>\n            <InputLabel variant=\"standard\" htmlFor={`field-${field}`}>\n                {capitalize(field)}\n            </InputLabel>\n            <NativeSelect id={field}\n                          className='custom-select'\n                          onChange={onChange}\n                          value={controls[field].id}>\n                {options.allIds.map(id => (\n                    <option key={id} value={id}>{options.byId[id].name}</option>\n                ))}\n            </NativeSelect>\n        </FormControl>\n    )\n\n    // Not working\n    const AutocompleteSelect =\n        ({field, options, disabled=false} :\n             {field: string, options: {allIds: string[], byId}, disabled?: boolean}) => (\n        <Autocomplete\n            freeSolo\n            disabled={disabled}\n            id={field}\n            className=\"form-control\"\n            options={options.allIds}\n            value={controls[field].id}\n            getOptionLabel={(option) => options.byId[option].name}\n            renderInput={(params) =>\n                <TextField {...params} variant=\"standard\" label={capitalize(field)} />}\n        />\n    )\n\n    return controlsIsReady && areas.allIds.length > 0 && (\n        <div className='controls'>\n            <PlotTypeSelect />\n            <BasicSelect field='area'\n                         options={areas}\n                         onChange={(e) => {\n                             const v = e.target.value;\n                             updateState({\n                                 'area': v,\n                                 'level': v === 'us' ? 'state' : 'county'\n                             });\n                         }} />\n            <BasicSelect field='level' options={levels} disabled={true} />\n            <div className='compare-by-fieldset'>\n                <div className='fields'>\n                    <CompareByFieldSelect i={0} />\n                    <CompareByFieldSelect i={1} />\n                </div>\n\n                <div className='switch'>\n                    <IconButton size='small'\n                                disabled={plotType.name === 'map' || controls.compare.length < 2}\n                                onClick={switchCompares}>\n                        <Cached />\n                    </IconButton>\n                </div>\n            </div>\n            <FieldSelect field='x' />\n            <FieldSelect field='y' />\n            <FieldSelect field='z' />\n        </div>\n    );\n};\n\nexport default Controls;\n","import React from 'react';\nimport {useAppDispatch, useAppSelector} from \"../../app/hooks\";\nimport {\n    clearDataValues,\n    selectCompareByFields,\n    setData\n} from \"./dataSlice\";\nimport {DATA_DIR, DataValue, DerivedDataValueSet} from \"../../dashboard/config\";\nimport {groupBy, difference} from 'ramda';\nimport axios from \"axios\";\nimport {flattenArrayOfObjects} from \"../../dashboard/utils/misc\";\nimport {\n    selectControlFields,\n    selectControlFieldValues\n} from \"../../dashboard/selectors\";\nimport {selectControlsLoaded} from \"../controls/controlsSlice\";\nimport {selectPlotType} from \"../plotType/plotTypeSlice\";\n\ntype ChunkParams = {\n    level: string\n    area: string\n}\n\ntype ValueChunkParams = ChunkParams & {\n    compare: string[]\n    feature: string\n}\n\ntype TopologyChunkParams = {\n\n}\n\ntype ChunkToFetch<P> = {\n    url: string,\n    params: P\n}\n\ntype FetchedChunk<P> = {\n    data: DataValue[],\n    params: P\n}\n\ntype FlattenedValueChunk = {\n    data: DataValue,\n    params: ValueChunkParams\n}\n\nexport const computeValueChunk = (\n    area: string,\n    level: string,\n    feature: string,\n    compare: string[],\n    plotType: string\n) : ChunkToFetch<ValueChunkParams> => {\n    const c = compare.length === 0 || plotType === 'map' ? 'all' : compare.join('_');\n    return {\n        url: `/pums/${area}/${level}/${feature}/${c}.json`,\n        params: {\n            area,\n            level,\n            compare,\n            feature,\n        }\n    };\n};\n\nexport const computeTopologyChunk = (\n    area: string,\n    level: string\n) : ChunkToFetch<TopologyChunkParams> => {\n    return {\n        url: `/topologies/${area}.json`,\n        params: {\n            area,\n            level\n        }\n    };\n}\n\nconst sortCompares = (compareFields, compares) => {\n    return compareFields.allIds.filter(c => compares.includes(c));\n};\n\nconst DataManager = () => {\n    const plotType = useAppSelector(selectPlotType);\n    const controls = useAppSelector(selectControlFieldValues);\n    const compareFields = useAppSelector(selectCompareByFields);\n    const controlsLoaded = useAppSelector(selectControlsLoaded);\n    const dispatch = useAppDispatch();\n\n    React.useEffect(() => {\n        const _computeChunks = () : ChunkToFetch<ValueChunkParams|TopologyChunkParams>[] => {\n            const compares = sortCompares(compareFields, controls.compare);\n            const {x, y, z} = controls;\n            return [\n                ...[x, y, z].map(f =>\n                    computeValueChunk(\n                        controls.area, controls.level, f, compares, plotType.name)),\n                computeTopologyChunk(controls.area, controls.level)\n            ];\n        }\n\n        const isValueChunk = (c: FetchedChunk<ValueChunkParams|TopologyChunkParams>) : boolean => {\n            // @ts-ignore\n            return !!c.params.compare;\n        }\n\n        const groupByFn = (v: FlattenedValueChunk) => {\n            const compareValues = v.params.compare.map(c => v.data[c]);\n            return v.data.geoid + \"_\" + v.data.year + \"_\" + compareValues.join(\"_\");\n        }\n\n        const mergeFeatures = (vs: FlattenedValueChunk[]) : DerivedDataValueSet => {\n            const featureSet = [...new Set(vs.flatMap(v => v.params.feature))];\n            const allKeys = [...new Set(vs.flatMap(v => Object.keys(v.data)))];\n            const nonFeatureSet = difference(allKeys, featureSet);\n            const output = {};\n            vs.forEach(v => {\n                featureSet.forEach(feature => {\n                    const featureValue = v.data[feature];\n                    if (featureValue != null) {\n                        output[feature] = featureValue\n                    }\n                });\n            });\n            nonFeatureSet.forEach(key => {      // All non-feature values\n                output[key] = vs[0].data[key];  // should be the same\n            });\n            return output;\n        };\n\n        const processValues = (cs: FetchedChunk<ValueChunkParams>[]) : DerivedDataValueSet[] => {\n            const vs: FlattenedValueChunk[] = cs.flatMap(\n                c => c.data.map(d => ({data: d, params: c.params})));\n            const groups: FlattenedValueChunk[][] = Object.values(groupBy(groupByFn, vs));\n            return groups.map(mergeFeatures);\n        };\n\n        const onChunksFetched = (cs: FetchedChunk<ValueChunkParams|TopologyChunkParams>[]): void => {\n            const valueDataArray = cs.filter(isValueChunk) as FetchedChunk<ValueChunkParams>[];\n            const valueData = processValues(valueDataArray);\n            const otherData = cs.filter(c => !isValueChunk(c)).map(c => c.data);\n            const data = { values: valueData, ...flattenArrayOfObjects(otherData) };\n            dispatch(setData(data));\n        };\n\n        const _fetchChunks = (cs: ChunkToFetch<ValueChunkParams|TopologyChunkParams>[]) => {\n            Promise.all(cs.map(c => axios.get(DATA_DIR + c.url))).then((responses) => {\n                const fcs = responses.map((r, i) =>\n                    ({data: r.data, params: cs[i].params}));\n                onChunksFetched(fcs);\n            });\n        };\n\n        const update = () => {\n            return (dispatch, getState) => {\n                dispatch(clearDataValues());\n                _fetchChunks(_computeChunks());\n            }\n        };\n\n        if (controlsLoaded)\n            dispatch(update());\n    }, [dispatch, plotType, controls, controlsLoaded]);  // data left out of deps to prevent infinite loop\n\n    return null;\n}\n\nexport default DataManager;\n","import React from 'react';\nimport {useLocation} from 'react-router-dom';\nimport {useAppDispatch, useAppSelector} from \"../app/hooks\";\nimport {selectControlFields, selectControlFieldValues} from \"./selectors\";\nimport {selectYear, setYear} from \"../features/year/yearSlice\";\nimport {map, filter,} from 'ramda';\nimport {selectPlotType, setPlotType} from \"../features/plotType/plotTypeSlice\";\nimport {setControls, setLoaded} from \"../features/controls/controlsSlice\";\nimport {setSearchPart} from \"./utils/url\";\nconst queryString = require('query-string');\n\nconst Url = () => {\n    const controls = useAppSelector(selectControlFieldValues);\n    const storedYear = useAppSelector(selectYear);\n    const storedPlotType = useAppSelector(selectPlotType);\n    const dispatch = useAppDispatch();\n    const {search} = useLocation();\n\n    // Don't think we need the thunk stuff anymore, but just leave it for now.\n\n    const updateUrl = () => {\n        return (dispatch, getState) => {\n            const state = getState();\n            const controls = selectControlFields(state);\n            const storedYear = selectYear(state);\n            const storedPlotType = selectPlotType(state);\n            if (state.controls.loaded) {\n                const allParams = {\n                    plot: storedPlotType.name,\n                    ...map(f => f ? f.id : null, controls),\n                    compare: controls.compare.map(c => c.id),\n                    year: storedYear\n                };\n                const params = filter(p => !!p, allParams);\n                const newS = queryString.stringify(params, {arrayFormat: 'bracket'});\n                if (newS !== search) {\n                    setSearchPart(newS);\n                    // TODO: Should we really clobber all the history?\n                    // window.history.replaceState({}, null, '?' + s);\n                }\n            }\n        }\n    }\n\n    const configUpdated = () => {\n        const { x, y, z, area, level, compare, plot, year } =\n            queryString.parse(search, {arrayFormat: 'bracket'});\n        const nonNullControls = filter(v => !!v, {x, y, z, area, level, compare});\n        dispatch(setControls(nonNullControls));\n        if (!!plot)\n            dispatch(setPlotType(plot));\n        if (!!year)\n            dispatch(setYear(parseInt(year)));\n    }\n\n    const loadState = () => {\n        return (dispatch, getState) => {\n            dispatch(updateUrl());\n            dispatch(setLoaded());\n        }\n    }\n\n    React.useEffect(() => {  // Only first load\n        dispatch(loadState());\n    }, []);\n\n    React.useEffect(() => {   // On URL change\n        configUpdated();\n    }, [search]);\n\n    React.useEffect(() => {   // On controls change\n        dispatch(updateUrl());\n    }, [dispatch, controls, storedYear, storedPlotType]);\n\n    return null\n};\n\nexport default Url\n","import {FC} from 'react';\nimport './Legend.scss';\nimport {useAppSelector} from \"../app/hooks\";\nimport {\n    selectColorPalette,\n    selectCurrentCompareDetails,\n    selectLegendPosition,\n} from \"./selectors\";\nimport {ColorPalette} from \"./utils/colors\";\nimport {CompareByField, LegendCorner, LegendPosition} from \"./config\";\nimport Tooltip from '@mui/material/Tooltip';\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\nimport {tooltipClasses} from \"@mui/material\";\n\ntype LegendComponentProps = {\n    compares: CompareByField[]\n    colorPalette: ColorPalette\n}\n\nconst bgAlphaHex = 'CC';\n\nconst OrdinalStrip = ({fromColor, toColor, label=null}) => {\n    return (\n        <>\n            <div className='strip'\n                 style={{\n                     backgroundImage: `linear-gradient(to right, ${fromColor + bgAlphaHex}, ${toColor + bgAlphaHex})`\n                 }}>\n                {label}\n            </div>\n        </>\n    )\n}\n\nconst OrdinalLabels = ({start, end}) => (\n    <div className='labels strip'>\n        <div className='label' style={{ top: 0, left: 0 }}>{start}</div>\n        <div className='label' style={{ top: 0, right: 0 }}>{end}</div>\n    </div>\n)\n\nconst OrdinalLegend = ({colorPalette}: LegendComponentProps) => {\n    return (\n        <div className='ordinal'>\n            <OrdinalLabels start={colorPalette.labels.cols[0]}\n                           end={colorPalette.labels.cols[1]} />\n            <OrdinalStrip fromColor={colorPalette.colors.byRowAndCol[0][0]}\n                          toColor={colorPalette.colors.byRowAndCol[0][1]}\n            />\n        </div>\n    );\n};\n\nconst NominalLegend = ({colorPalette}: LegendComponentProps) => {\n    // const cols = [\n    //     {name: 'Wh', hue: 200},\n    //     {name: 'Bl', hue: 340},\n    //     {name: 'Hs', hue: 150},\n    //     {name: 'As', hue: 40},\n    // ];\n\n    return (\n        <div className='nominal'>\n            {colorPalette.colors.byRowAndCol.map((row, r) =>\n                <div key={'row-' + r}\n                     className='strip'\n                     style={{ backgroundColor: row[0] + bgAlphaHex }}>\n                    {colorPalette.labels.rows[r]}\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst OrdinalByNominalLegend = ({colorPalette}: LegendComponentProps) => (\n    <div className='ordinal'>\n        <OrdinalLabels start={colorPalette.labels.cols[0]}\n                       end={colorPalette.labels.cols[1]} />\n        {colorPalette.colors.byRowAndCol.map((colorRow, r) => (\n            <OrdinalStrip key={'row-' + r}\n                          fromColor={colorRow[0]}\n                          toColor={colorRow[1]}\n                          label={colorPalette.labels.rows[r]}\n            />\n        ))}\n    </div>\n);\n\nconst NominalByNominalLegend = ({colorPalette}: LegendComponentProps) => (\n    <table className='nominal-grid' cellPadding={0} cellSpacing={0}>\n        <tbody>\n            <tr>\n                <th />\n                {colorPalette.labels.cols.map((col, c) => (\n                    <th key={'col-header-' + c} className='col-header'>\n                        {col}\n                    </th>\n                ))}\n            </tr>\n            {colorPalette.colors.byRowAndCol.map((colorRow, r) => (\n                <tr key={'row-' + r} >\n                    <th className='row-header'>\n                        {colorPalette.labels.rows[r]}\n                    </th>\n                    {colorRow.map((colorCell, c) => (\n                        <Tooltip disableFocusListener\n                                 key={`cell-${c}-${r}`}\n                                 title={\n                                     colorPalette.fullNames.rows[r] + ', ' +\n                                     colorPalette.fullNames.cols[c]}>\n                            <td className='cell'\n                                style={{\n                                    backgroundColor: colorCell + bgAlphaHex\n                                }} />\n                        </Tooltip>\n                    ))}\n                </tr>\n            ))}\n        </tbody>\n    </table>\n);\n\nconst OrdinalByOrdinalLegend = ({colorPalette}: LegendComponentProps) => {\n    const cs = colorPalette.colors.byRowAndCol;\n    const ls = colorPalette.labels;\n    return (\n        <div  className='ordinal'>\n            <div className='layer'\n                 style={{\n                     backgroundImage: `linear-gradient(to right, ${cs[0][0] + bgAlphaHex}, ${cs[0][1] + bgAlphaHex})`,\n                }}\n            >\n            </div>\n            <div className='layer'\n                 style={{\n                     backgroundImage: `linear-gradient(to right, ${cs[1][0] + bgAlphaHex}, ${cs[1][1] + bgAlphaHex}`,\n                     WebkitMask: 'linear-gradient(to bottom, #0000, #00000080 50%, #000D 80%, #000 100%)',\n                     mask: 'linear-gradient(to bottom, #0000, #00000080 50%, #000D 80%, #000 100%)',\n                 }}\n            >\n            </div>\n            <div className='label' style={{ top: 4, left: 16}}>${ls.cols[0]}</div>\n            <div className='label' style={{ top: 4, right: 10}}>${ls.cols[1]}</div>\n            <div className='label' style={{ top: 16, left: 6 }}>${ls.rows[0]}</div>\n            <div className='label' style={{ bottom: 10, left: 6 }}>${ls.rows[1]}</div>\n        </div>\n    );\n};\n\nconst getLegendComponent = (compares: CompareByField[]) : FC<LegendComponentProps> => {\n    const types = compares.map(c => c.type);\n    switch (compares.length) {\n        case 0:\n            return null;\n        case 1:\n            return types[0] === 'nominal' ? NominalLegend : OrdinalLegend;\n        case 2:\n            if (types[0] === 'nominal') {\n                return types[1] === 'nominal' ? NominalByNominalLegend : OrdinalByNominalLegend;\n            } else {\n                return types[1] === 'ordinal' ? OrdinalByOrdinalLegend : OrdinalByNominalLegend;\n            }\n        default:\n            throw new Error(`Has ${compares.length} compares. Must be 0-2.`)\n    }\n};\n\nconst Legend = () => {\n    const colorPalette = useAppSelector(selectColorPalette);\n    const compares = useAppSelector(selectCurrentCompareDetails);\n    const position = useAppSelector(selectLegendPosition);\n    const LegendComponent = getLegendComponent(compares);\n    if (!position || compares.length === 0) {\n        return null;\n    }\n    return(\n        <div className={`legend ${position.corner}`}>\n            <LegendComponent colorPalette={colorPalette} compares={compares} />\n        </div>\n    );\n}\n\nexport default Legend;\n","import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {\n    AppBar, Collapse,\n    Divider, Drawer,\n    Hidden, IconButton,\n    List,\n    ListItemButton, ListItemIcon,\n    ListItemText, Toolbar, Typography\n} from \"@mui/material\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport DataIcon from \"@mui/icons-material/Storage\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport LightModeIcon from \"@mui/icons-material/LightMode\";\nimport DarkModeIcon from \"@mui/icons-material/DarkMode\";\nimport ExpandLess from \"@mui/icons-material/ExpandLess\";\nimport ExpandMore from \"@mui/icons-material/ExpandMore\";\nimport './Nav.scss';\nimport ShareIcon from \"@mui/icons-material/Share\";\nimport {useAppSelector} from \"../app/hooks\";\nimport {selectPlotPresets} from \"./selectors\";\n\nconst SideMenuItem = ({text, icon, children=null}) => {\n    const [open, setOpen] = React.useState(false);\n    return (\n        <>\n            <ListItemButton onClick={() => setOpen(!open)}>\n                <ListItemIcon className='menu-item-icon'>{icon}</ListItemIcon>\n                <ListItemText primary={text} />\n                {children && (open ? <ExpandLess /> : <ExpandMore />)}\n            </ListItemButton>\n            {children && (\n                <Collapse in={open} timeout=\"auto\" unmountOnExit className='nested-menu'>\n                    {children}\n                </Collapse>\n            )}\n        </>\n    );\n};\n\nconst Nav = ({darkMode, ShareDialog, children=null}) => {\n    const plotPresets = useAppSelector(selectPlotPresets);\n    const [shareOpen, setShareOpen] = React.useState(false);\n    const [drawerOpen, setDrawerOpen] = React.useState(false);\n    const drawer = (\n        <div className='side-menu'>\n            <Divider />\n            <List>\n                <a href='/'>\n                    <SideMenuItem text='Statistpedia' icon={<HomeIcon />} />\n                </a>\n                {/*<SideMenuItem text='Datasets' icon={<DataIcon />} />*/}\n                <SideMenuItem text='Presets' icon={<DataIcon />}>\n                    <List>\n                        { plotPresets.map((p) => (\n                            <Link to={'/' + p.url} key={p.title}>\n                                <ListItemButton>\n                                    <ListItemText>{p.title}</ListItemText>\n                                </ListItemButton>\n                            </Link>\n                        ))}\n                    </List>\n                </SideMenuItem>\n            </List>\n            <Divider />\n        </div>\n    );\n    return (\n        <>\n            <nav>\n                <Hidden xlUp>\n                    <Drawer\n                        variant=\"temporary\"\n                        open={drawerOpen}\n                        onClose={() => setDrawerOpen(false)}\n                        ModalProps={{\n                            keepMounted: true, // Better open performance on mobile.\n                        }}\n                    >\n                        {drawer}\n                    </Drawer>\n                </Hidden>\n                <Hidden xlDown>\n                    <Drawer\n                        variant=\"permanent\"\n                        open\n                    >\n                        {drawer}\n                    </Drawer>\n                </Hidden>\n            </nav>\n            <AppBar className='top-bar'\n                    position=\"static\"\n                    elevation={darkMode.value ? 0 : 1}>\n                <Toolbar variant=\"dense\">\n                    <IconButton edge=\"start\"\n                                sx={{\n                                    marginRight: '0.5em',\n                                    display: { xs: 'inline-flex', xl: 'none' }\n                                }}\n                                onClick={() => setDrawerOpen(!drawerOpen)}\n                                color=\"inherit\"\n                                aria-label=\"menu\">\n                        <MenuIcon />\n                    </IconButton>\n                    <Typography\n                        id='site-title'\n                        variant=\"h1\"\n                        sx={{\n                            display: ['none', 'block']\n                        }}\n                    >\n                        <Link to='/' style={{\n                            color: 'inherit',\n                            textDecoration: 'none'\n                        }}>\n                            Statistipedia <sub><small><i>EXPLORE</i></small></sub>\n                        </Link>\n                    </Typography>\n                    <Typography\n                        id='site-title'\n                        variant=\"h1\"\n                        sx={{\n                            display: ['block', 'none']\n                        }}\n                    >\n                        <Link to='/' style={{\n                            color: 'inherit',\n                            textDecoration: 'none'\n                        }}>\n                            S<sub><small><i>E</i></small></sub>\n                        </Link>\n                    </Typography>\n                    <div className=\"grow\" />\n                    {children}\n                    <IconButton className='menu-btn'\n                                onClick={() => setShareOpen(true)}\n                                color=\"inherit\">\n                        <ShareIcon />\n                    </IconButton>\n                    <IconButton edge=\"end\"\n                                className='menu-btn'\n                                onClick={darkMode.toggle}\n                                color=\"inherit\">\n                        {darkMode.value ? <LightModeIcon /> : <DarkModeIcon />}\n                    </IconButton>\n                    {shareOpen && <ShareDialog isOpen={shareOpen} setOpen={setShareOpen} />}\n                </Toolbar>\n            </AppBar>\n\n        </>\n    );\n};\n\nexport default Nav;\n","var _style, _g, _path, _circle, _path2, _circle2, _path3, _circle3, _path4, _circle4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg8\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: 0,\n    y: 0,\n    viewBox: \"0 0 3492.7 3492.7\",\n    style: {\n      enableBackground: \"new 0 0 3492.7 3492.7\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _style || (_style = /*#__PURE__*/React.createElement(\"style\", null, \".st0{fill:#fad214}.st1{fill:none;stroke:#000;stroke-width:72;stroke-miterlimit:10}\")), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"layer1\",\n    transform: \"translate(0 935.16)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"rect815\",\n    className: \"st0\",\n    d: \"M50.6 703 1638.1-884.5c59.8-59.8 156.7-59.8 216.5 0L3442.1 703c59.8 59.8 59.8 156.7 0 216.5L1854.6 2506.9c-59.8 59.8-156.7 59.8-216.5 0L50.6 919.5c-59.7-59.8-59.7-156.7 0-216.5z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"rect9557\",\n    d: \"M86.7 739.1 1674.2-848.4c39.9-39.9 104.5-39.9 144.3 0L3406 739.1c39.9 39.9 39.9 104.5 0 144.3L1818.5 2470.9c-39.9 39.9-104.5 39.9-144.3 0L86.7 883.4c-39.8-39.9-39.8-104.5 0-144.3z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"rect9559\",\n    className: \"st0\",\n    d: \"M134.8 787.2 1722.3-800.3c13.3-13.3 34.8-13.3 48.1 0L3357.9 787.2c13.3 13.3 13.3 34.8 0 48.1L1770.4 2422.8c-13.3 13.3-34.8 13.3-48.1 0L134.8 835.3c-13.3-13.3-13.3-34.9 0-48.1z\"\n  }))), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M910.4 1666.4h320v689.1h-320zm453.1-187h320v876.1h-320zm445.8 376.1h320v500h-320zm453-451.9h320v951.9h-320z\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 1070.4,\n    cy: 1295,\n    r: 80\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st1\",\n    d: \"m1067.3 1300.5 447.8-252.2\"\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 1520.5,\n    cy: 1065.5,\n    r: 80\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st1\",\n    d: \"m1523.5 1054.5 423.6 325.2\"\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 1947.1,\n    cy: 1356.7,\n    r: 80\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    className: \"st1\",\n    d: \"m1947.1 1378.7 475.2-323.2\"\n  })), _circle4 || (_circle4 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 2422.3,\n    cy: 1060.5,\n    r: 80\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.f1b06215e30a508523e86ea7b7957da4.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport {Provider} from 'react-redux';\nimport {HashRouter, Link, Route, Routes} from \"react-router-dom\";\nimport useDarkMode from 'use-dark-mode';\nimport {store} from '../app/store';\nimport {\n    Box,\n    Button,\n    Card,\n    CircularProgress,\n    CssBaseline,\n    IconButton,\n    ThemeProvider,\n    useMediaQuery\n} from '@mui/material';\nimport {createTheme} from '@mui/material/styles';\nimport BubblePlot from \"./BubblePlot\";\nimport {ParentSize} from \"@visx/responsive\";\nimport './Dashboard.scss';\nimport PlayIcon from '@mui/icons-material/PlayArrow';\nimport PhotoCameraIcon from '@mui/icons-material/PhotoCamera';\nimport {AxisLabelSource} from \"./config\";\nimport {setUseWhatChange, useWhatChanged} from '@simbathesailor/use-what-changed';\nimport MapPlot from \"./MapPlot\";\nimport LinePlot from \"./LinePlot\";\nimport BarPlot from \"./BarPlot\";\nimport {BasicShareDialog, ImageDialog, SharePlotDialog} from \"./sharing\";\nimport YearSlider from \"../features/year/YearSlider\";\nimport {useAppSelector} from \"../app/hooks\";\nimport {selectPlotType} from \"../features/plotType/plotTypeSlice\";\nimport Controls from \"../features/controls/Controls\";\nimport DataManager from \"../features/data/DataManager\";\nimport Url from './Url';\nimport {\n    isLoaded,\n    selectControlFields,\n    selectFeatureRanges, selectLegendPosition, selectPlotData,\n    selectPlotPresets\n} from \"./selectors\";\nimport {allValuesNotNull} from \"./utils/misc\";\nimport Legend from \"./Legend\";\nimport Nav from \"./Nav\";\nimport LogoIcon from \"./icons/logo.svg\";\n\nsetUseWhatChange(process.env.NODE_ENV === 'development');\nrequire('typeface-roboto');\n\nconst LoadingPlot = ({width, height}) => (\n    <div className='loading-plot' style={{width, height}}>\n        <CircularProgress variant='indeterminate'\n                          size={Math.min(Math.round(width / 7), 80)} />\n    </div>\n);\n\nconst PlotArea = ({plotType,\n                      axisLabels, xAxisLabel=null, yAxisLabel=null,\n                      disableInteraction = false, showLabel,\n                      x, y, levelVar}) => {\n    const DumbPlotArea = ({width, height}) => {\n        const data = useAppSelector(selectPlotData);\n        const featureRanges = useAppSelector(selectFeatureRanges);\n        const props = {\n            data,\n            featureRanges,\n            showLabel,\n            disableInteraction,\n            width,\n            height\n        };\n        switch (plotType.name) {\n            case 'bubble': return <BubblePlot {...props} />;\n            case 'line': return <LinePlot {...props}  />;\n            case 'bar': return <BarPlot {...props}  />;\n            default: return <MapPlot {...props} yAxisVar={y} />;\n        }\n    }\n    const loading = !useAppSelector(isLoaded);\n    return (\n        <ParentSize debounceTime={10} className='bg'>\n            {({ width, height }) => {\n                return (width + height) > 0 && (\n                    <div className='plot' style={{width, height}}>\n                        {loading ?\n                        <LoadingPlot width={width} height={height} /> :\n                        <DumbPlotArea width={width} height={height} /> }\n                        {axisLabels && !plotType.hideAxisLabels && (\n                            <>\n                                <div className='x-axis'>\n                                    {xAxisLabel || levelVar}\n                                </div>\n                                <div className='y-axis' style={{width: height}}>\n                                    {yAxisLabel}\n                                </div>\n                            </>\n                        )}\n                        {plotType.name !== 'map' && <Legend />}\n                    </div>\n                )\n            }}\n        </ParentSize>\n    );\n};\n\ntype DumbDashboardProps = {\n    darkMode: any\n    plotType: any\n    controls: any\n}\n\nconst DumbDashboard = ({darkMode, plotType, controls}: DumbDashboardProps) => {\n    const [showLabel, setShowLabel] = React.useState(null);\n\n    const computeXAxisLabel = () : string => {\n        switch (plotType.xAxisLabelSource) {\n            case AxisLabelSource.VAR: return controls.x.name;\n            case AxisLabelSource.COMPARE: return controls.compare.map(c => c.name).join('/');\n            case AxisLabelSource.YEAR: return 'Year'\n            default: return null;\n        }\n    };\n\n    const xAxisLabel = computeXAxisLabel();\n    const yAxisLabel = controls.y?.name;\n\n    const DashboardNav = () => {\n        const [genImgOpen, setGenImgOpen] = React.useState(false);\n        return (\n            <>\n                <Nav darkMode={darkMode} ShareDialog={\n                    ({isOpen, setOpen}) => <SharePlotDialog\n                        compares={controls.compare}\n                        xAxisLabel={xAxisLabel}\n                        yAxisLabel={yAxisLabel}\n                        isOpen={isOpen}\n                        setOpen={setOpen} />\n                }>\n                    <IconButton className='menu-btn'\n                                onClick={() => setGenImgOpen(true)}\n                                color=\"inherit\">\n                        <PhotoCameraIcon />\n                    </IconButton>\n                </Nav>\n                {genImgOpen && <ImageDialog\n                  isOpen={genImgOpen}\n                  setOpen={setGenImgOpen}\n                  label={showLabel}\n                  setLabel={setShowLabel}\n                  compares={controls.compare}\n                  xAxisLabel={xAxisLabel}\n                  yAxisLabel={yAxisLabel}\n                  showAxisLabels={!plotType.hideAxisLabels}\n                  pageInDarkMode={darkMode.value}\n                  plot={<Plot axisLabels={false}\n                              disableInteraction={true}\n                              showLabel={showLabel} />} />}\n            </>\n        );\n    }\n\n    const Plot = ({axisLabels, showLabel = null, disableInteraction = false}) => {\n        return (\n            <PlotArea plotType={plotType}\n                      axisLabels={axisLabels}\n                      disableInteraction={disableInteraction}\n                      showLabel={showLabel}\n                      x={controls.x}\n                      y={controls.y}\n                      xAxisLabel={xAxisLabel}\n                      yAxisLabel={yAxisLabel}\n                      levelVar={controls.level.name}\n            />\n        );\n    };\n\n    // useWhatChanged([plotType, controls]);\n\n    return (\n        <>\n            <DashboardNav />\n            <div id=\"dashboard\">\n                <main>\n                    <div className='plot-area'>\n                        <Card className='section'>\n                            <div id='inner-plot-container'>\n                                <Plot axisLabels={true} />\n                            </div>\n                        </Card>\n                    </div>\n                    <div className='timeline'>\n                        <IconButton className='play' disabled={plotType.name === 'line'}>\n                            <PlayIcon />\n                        </IconButton>\n                        <YearSlider />\n                    </div>\n                </main>\n                <aside>\n                    <Controls />\n                </aside>\n            </div>\n        </>\n    );\n};\n\nconst Dashboard = ({darkMode}) => {\n    const plotType = useAppSelector(selectPlotType);\n    const controls = useAppSelector(selectControlFields);\n    const controlsIsReady = allValuesNotNull(controls);\n    return (\n        <>\n            {\n                controlsIsReady && plotType &&\n                <DumbDashboard darkMode={darkMode}\n                               plotType={plotType}\n                               controls={controls} />\n            }\n            <Url />\n            <DataManager />\n        </>\n    );\n};\n\nconst ExternalLink = ({to, style={}, children}) => (\n    <a href={to}\n          target='_blank'\n          rel='noreferrer'\n          className='external'\n          style={style}\n    >\n        {children}\n    </a>\n);\n\nconst SiteScreenshot = ({file}: {file: string}) => (\n    <a href={'/explore/img/' + file} className='screenshot' target='screenshot'>\n        <img src={'/explore/img/' + file} width='100%' alt='screenshot' />\n    </a>\n);\n\nconst DumbHome = ({darkMode, plotPresets}) => (\n    <>\n        <Nav darkMode={darkMode} ShareDialog={BasicShareDialog} />\n        <div id='home'>\n            <main>\n                <Card className='section'>\n                    <img className='logo' src={LogoIcon} alt='Statistipedia logo' />\n                    <h2>Welcome to Statistipedia <i>Explore!</i></h2>\n                    <p>\n                        This is an interactive dashboard.\n                    </p>\n                    <p style={{textAlign: 'center', margin: '1.5em 0'}}>\n                        <Link to='plot' className='btn'>\n                            <Button variant=\"contained\">Enter dashboard here</Button>\n                        </Link>\n                    </p>\n                    <p>Or you can try these presets:</p>\n                    <table id='presets-table'>\n                        <tbody>\n                        <tr>\n                            <th>Area</th>\n                            <th>Description</th>\n                        </tr>\n                        { plotPresets.map((p) => (\n                            <tr key={p.title}>\n                                <td>\n                                    <ExternalLink to={p.area.link}\n                                          style={{whiteSpace: 'nowrap'}}>\n                                        {p.area.name}\n                                    </ExternalLink>\n                                </td>\n                                <td>\n                                    <Link to={'/' + p.url}>{p.title}</Link>\n                                </td>\n                            </tr>\n                        ))}\n                        </tbody>\n                    </table>\n                </Card>\n            </main>\n            <aside>\n                <SiteScreenshot file='screenshot1.png' />\n                <SiteScreenshot file='screenshot3.png' />\n                <SiteScreenshot file='screenshot2.png' />\n                <SiteScreenshot file='screenshot4.png' />\n            </aside>\n        </div>\n    </>\n);\n\nconst Home = ({darkMode}) => {\n    const plotPresets = useAppSelector(selectPlotPresets);\n    return <DumbHome darkMode={darkMode} plotPresets={plotPresets} />;\n};\n\nconst About = ({darkMode}) => (\n    <>\n        <Nav darkMode={darkMode} ShareDialog={BasicShareDialog} />\n        <div id='about'>\n            Sun God Ra\n        </div>\n    </>\n);\n\nconst DashboardApp = () => {\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n    const darkMode = useDarkMode(prefersDarkMode);\n    const theme = React.useMemo(\n        () =>\n            createTheme({\n                palette: {\n                    mode: darkMode.value ? 'dark' : 'light',\n                    primary: {\n                        main: darkMode.value ? '#175391' : '#2278CF'\n                    }\n                },\n                breakpoints: {\n                    values: {\n                        xs: 1,\n                        sm: 360,\n                        md: 640,\n                        lg: 960,\n                        xl: 1080,\n                    },\n                }\n            }),\n        [darkMode],\n    );\n    return (\n        <Provider store={store}>\n            <ThemeProvider theme={theme}>\n                <CssBaseline />\n                <Box sx={{\n                    boxSizing: 'border-box',\n                    width: '100%',\n                    height: '100%',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    paddingLeft: { xs: 0, xl: '270px' }\n                }}>\n                    <HashRouter>\n                        <Routes>\n                            <Route path=\"\" element={<Home darkMode={darkMode} />}/>\n                            <Route path=\"about\" element={<About darkMode={darkMode} />}/>\n                            <Route path=\"plot\" element={<Dashboard darkMode={darkMode} />}/>\n                        </Routes>\n                    </HashRouter>\n                </Box>\n            </ThemeProvider>\n        </Provider>\n    );\n};\n\nexport default DashboardApp;\n"],"names":["AxisLabelSource","LegendCorner","PLOT_TYPES","name","xAxisLabelSource","VAR","fields","x","y","z","YEAR","COMPARE","hideAxisLabels","PLOT_TYPES_MAP","zipObj","map","p","SHARE_SIZES","width","height","SHARE_SIZE_MAP","formatNum","minDigits","maxDigits","num","options","maximumFractionDigits","minimumFractionDigits","Number","toLocaleString","undefined","justAddCommas","curry","removeDecimals","oneDecimalPlace","dollarsAndCents","FIELD_TYPE_FORMAT_VALUES_MAP","_","Error","value","NUMERIC_FIELDS","indexBy","prop","FIELD_CFGS","type","group","COMPARE_BY_FIELD_CFGS","PLOT_PRESETS","title","params","area","level","compare","plot","augmentField","cfg","f","id","processData","data","newData","areas","byId","a","link","allIds","Object","keys","levels","compareByFields","initialState","masterData","values","topologies","byAreaAndLevel","status","dataSlice","createSlice","reducers","setData","state","action","payload","clearDataValues","actions","selectAreas","selectFields","selectCompareByFields","selectLevels","selectYears","years","selectValues","selectAllCompareByFieldDetails","createSelector","selectNumericFields","filter","includes","yearSlice","setYear","extraReducers","last","selectYear","year","plotTypeSlice","setPlotType","selectPlotType","plotType","defaultFields","loaded","controlsSlice","setControls","newValue","equals","setLoaded","selectControlsLoaded","controls","store","configureStore","reducer","dataReducer","yearReducer","plotTypeReducer","controlsReducer","elementRef","onClick","useEffect","clickListener","event","current","contains","target","document","addEventListener","removeEventListener","withBoundingRects","initialLeft","left","initialTop","top","offsetLeft","offsetTop","rect","parentRect","children","getRects","style","otherProps","transform","useAppDispatch","useDispatch","useAppSelector","useSelector","bind","xs","flatMap","as","concat","reduceRight","allValuesNotNull","obj","every","firstAndLast","length","nestedFirstAndLast","capitalize","s","toUpperCase","slice","average","array","reduce","b","sum","DEFAULT_COLOR","h","v","HUE_PRESETS","SAT_RANGE","autoScaleColorNominal","c","nFieldValues","index","isPrioritized","n","i","autoHueScale","sStart","sStep","vStep","COMPARE_BY_COLOR_FNS","shortName","autoSatScale","COMPARE_BY_COLOR_PRIORITIES","componentToHex","hex","toString","hsvToHex","r","g","h1","Math","floor","q","t","round","hsvToRgb","rgbToHex","createKey","cbfs","k1","sk","k2","fieldToIndexMap","cbf","field","sortKeys","_getColorFromPalette","ks","getColorFromPalette","hashMap","k","createKeySet","getShortLabels","getFullLabels","fullName","iterateOverCompareGrid","fn","cbf1","cbf2","v1","v2","_path","_path2","setupColorPalette","kahcs","forEach","kahc","color","addColorToPalette","keySets","getColor","getColorGrid","labels","rows","cols","fullNames","colors","byRowAndCol","compose","scbfs","switchToAlwaysMakeLegendHorizontal","processItemValues","vs","controlFields","divisions","colorPalette","createName","cs","div","geoid","divName","abbrev","areaName","mediumName","join","_findClearestCorner","right","y_mean","forceCorner","topLeft","max","topRight","bottomLeft","min","bottomRight","minimum","NW","corner","closestDataPoint","NE","SW","SE","chooseLegendPosition","featureRanges","_splitHalfs","pred","c1","c2","c14","c34","d","sortedData","sort","scaledY","selectControlFieldValues","cv","nfs","selectControlFields","mapObjIndexed","selectColorPalette","priorities","lowPriority","highPriority","accum","cbfi","isAccumDefault","newColors","existing","fieldValues","cbfv","vi","createColorPalette","selectCurrentDivisions","byLevel","dvsByLevel","selectTopologies","tbaal","cvs","selectArea","selectCurrentCompareDetails","cb","summaryDataForAllYears","ds","cf","cp","avs","individualDataForAllYears","selectPlotData","individualData","summaryData","individualDataIgnoringCompares","selectFeatureRanges","individualDataIgnoringComparesForAllYears","fvs","selectLegendPosition","selectPlotPresets","url","queryString","arrayFormat","isLoaded","DEFAULT_OPTIONS","selectedOpacity","unselectedOpacity","defaultOpacity","animate","groupByKeys","keyFields","items","im","groupBy","item","tail","lookupItem","itemMap","results","lookupKeys","matchesAllKeys","keysToMatch","itemKeys","all","range","TooltipContent","FormattedValue","formatValue","className","showLabel","disableInteraction","nKeyFields","React","selectedKeys","selectKeys","useTooltip","tooltipOpen","tooltipLeft","tooltipTop","tooltipData","showTooltip","hideTooltip","select","scaledX","deselect","getKeys","key1","Tooltip","ref","useTouchOutside","defaultTooltipStyles","fontSize","padding","margin","makeSelectable","keyValues","useSpring","animOpacity","setAnim","isSelected","opacity","animated","fillOpacity","to","strokeOpacity","props","key","makeInteractive","callback","resolvedKeyValues","Function","onTouchStart","onMouseMove","onMouseLeave","makeSelectableAndInteractive","concreteKeys","xScale","scaleLinear","domain","yScale","sizeScale","scalePower","exponent","size","useSelect","animFn","animX","animY","animSize","useSprings","springs","start","cx","cy","fill","stroke","projection","geoAlbersUsa","usMapOffset","opacityOptions","DumbMapPlot","scale","topoFeature","topojson","objects","featColl","features","colorScale","hcl","interpolate","interpolateHcl","path","geoPath","translate","bounds","tempItems","geoCentroid","animColor","AlbersUsa","feature","strokeWidth","lineOptions","pointOptions","hPadding","vPadding","lines","lineKeys","circleSize","voronoiInstance","voronoi","findNearest","line","point","localPoint","find","LinePath","GlyphCircle","heightAdjustment","startAtZero","pctOfLowest","getHeightAdjustment","scaleBand","animHeight","bandwidth","setSearchPart","parts","window","location","hash","split","replace","BaseDialog","isOpen","setOpen","fullScreen","alreadyOpen","setAlreadyOpen","search","useLocation","Dialog","open","onClose","history","back","keepMounted","createPlotTitle","compares","xAxisLabel","yAxisLabel","toLowerCase","DumbImageDialog","pageInDarkMode","label","setLabel","showAxisLabels","plotTitle","defaultShareSize","sharePresetSize","setSharePresetSize","previewSize","setPreviewSize","shareSize","setShareSize","format","setFormat","imgData","setImgData","theme","useTheme","useMediaQuery","breakpoints","down","darkModeState","setDarkModeState","darkModeRef","ImagePreview","darkMode","useDarkMode","classNameDark","classNameLight","storageKey","enable","disable","GenerateDialog","setNewSize","newSize","ratio","w","calculatePreviewSize","DialogContent","FormControl","InputLabel","variant","htmlFor","NativeSelect","onChange","getElementsByClassName","scrollTo","FormGroup","row","TextField","helperText","DialogActions","Button","el","getElementById","htmlToImage","getGenerateFn","canvasWidth","canvasHeight","pixelRatio","clientWidth","clientHeight","then","dataUrl","DownloadDialog","href","download","alt","src","PinterestShareButton","media","PinterestIcon","ImageDialog","BasicShareDialog","FacebookShareButton","quote","FacebookIcon","TwitterShareButton","TwitterIcon","RedditShareButton","RedditIcon","LinkedinShareButton","LinkedinIcon","display","CopyToClipboard","onCopy","text","IconButton","FileCopyOutlined","SharePlotDialog","PrettoSlider","styled","Slider","border","backgroundColor","boxShadow","lineHeight","background","borderRadius","transformOrigin","dispatch","Box","sx","flex","step","disabled","valueLabelDisplay","paddingTop","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCompare","_ref","svgRef","titleId","xmlns","viewBox","fillRule","strokeLinecap","strokeLinejoin","strokeMiterlimit","ForwardRef","makeIcon","iconSrc","SvgIcon","component","FIELD_TYPE_ICONS_MAP","PlaceIcon","CompareIconSrc","TimelapseIcon","PaidIcon","AccessTimeFilledIcon","CalendarMonthIcon","DoDisturbIcon","TagIcon","PLOT_TYPE_ICONS_MAP","BubbleChartIcon","TimelineIcon","BarChartIcon","RoomIcon","ToggleButtonGroup","exclusive","pt","Icon","ToggleButton","groupFields","gs","DrawerFieldSelect","body","position","Drawer","anchor","PaperProps","ModalProps","MenuFieldSelect","anchorEl","setAnchorEl","Menu","MenuListProps","role","FieldSelect","BaseFieldSelect","currentTarget","ArrowDropDown","Input","Divider","MenuItem","selected","ListItemIcon","ListItemText","primary","secondary","description","controlsIsReady","numericFields","numericFieldGroups","compareByGroups","used","disableUsedCompares","updateState","newState","updateCompare","newNewState","CompareByFieldSelect","BasicSelect","e","Cached","compareFields","controlsLoaded","isValueChunk","groupByFn","compareValues","mergeFeatures","featureSet","Set","allKeys","nonFeatureSet","difference","output","featureValue","onChunksFetched","valueData","processValues","otherData","arr","flatObject","property","flattenArrayOfObjects","getState","sortCompares","computeValueChunk","_computeChunks","Promise","axios","responses","fcs","require","storedYear","storedPlotType","updateUrl","allParams","newS","stringify","parse","nonNullControls","parseInt","configUpdated","bgAlphaHex","OrdinalStrip","fromColor","toColor","backgroundImage","OrdinalLabels","end","OrdinalLegend","NominalLegend","OrdinalByNominalLegend","colorRow","NominalByNominalLegend","cellPadding","cellSpacing","col","colorCell","disableFocusListener","OrdinalByOrdinalLegend","ls","WebkitMask","mask","bottom","LegendComponent","types","getLegendComponent","SideMenuItem","icon","ListItemButton","ExpandLess","ExpandMore","Collapse","in","timeout","unmountOnExit","ShareDialog","plotPresets","shareOpen","setShareOpen","drawerOpen","setDrawerOpen","drawer","List","Home","Hidden","xlUp","xlDown","AppBar","elevation","Toolbar","edge","marginRight","xl","Typography","textDecoration","Share","toggle","LightMode","DarkMode","setUseWhatChange","process","LoadingPlot","CircularProgress","PlotArea","axisLabels","levelVar","DumbPlotArea","yAxisVar","loading","ParentSize","debounceTime","DumbDashboard","setShowLabel","computeXAxisLabel","DashboardNav","genImgOpen","setGenImgOpen","PhotoCamera","Plot","Card","Dashboard","ExternalLink","rel","SiteScreenshot","file","DumbHome","LogoIcon","textAlign","whiteSpace","About","prefersDarkMode","createTheme","palette","mode","main","sm","md","lg","ThemeProvider","CssBaseline","boxSizing","flexDirection","paddingLeft","element"],"sourceRoot":""}